{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p> <p>PA</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"#code","title":"code","text":"<p>examples fot Codeblocks Some <code>code</code></p> <p>A plain Codeblock</p> a title for the codeblock<pre><code>    int main(){\n        std::cout&lt;&lt;\"fuck off\";\n    }\n</code></pre> <p>seconda CodeBlock <pre><code>    def bublle_sort(items):\n        for i in range(len(iyems)):\n            for j in range(len(items)-1-i):\n                if items[j]&gt;items[j+1]:\n                    items[j],items[j+1]=items[j+1],items[j]\n</code></pre></p>"},{"location":"page1/","title":"\u5efa\u7ad9\u7684\u8bb0\u5f55","text":"<p>\u6253\u7b97\u8fd8\u662f\u8fc1\u79fb\u5230\u4e3b\u4ed3\u5e93\u4e86 https://github.com/alongcyber/notetest.git</p>"},{"location":"page1/#another-heading","title":"Another heading","text":"<p>Some more shit</p>"},{"location":"page1/#_2","title":"\u4e00\u4e9b\u6c9f\u662f","text":"<p>\u54c8\u54c8\u54c8\u628a\u5587\u53ed\u5361\u548c\u5355\u4f4d,\u5f88\u559c\u6b22\u6211\u7684\u952e\u76d8\u6572\u51fb\u7684\u58f0\u97f3,\u6709\u4e00\u79cd\u6e05\u65b0\u6109\u60a6\u7684\u5feb\u611f,\u8c01\u61c2\u963f,\u7ed9\u865a\u62df\u673a\u65b0\u589e\u4e8632GB\u5185\u5b58,\u987f\u65f6\u6d41\u7545\u4e86\u8bb8\u591a,\u8f93\u5165\u6cd5\u4e0d\u518d\u6709\u83ab\u540d\u7684\u987f\u632b.</p>"},{"location":"page1/#_3","title":"\u8fd9\u4e9b\u5929","text":"<p>\u534a\u89d2\u5b57\u6bcd\u7684\u7f8e,\u8c01\u61c2,\u611f\u89c9\u5f88\u591a\u4e8b\u60c5,\u6ca1\u6709\u5fc5\u8981\u5f04\u7684\u4e0d\u4e00\u6837,\u61c2\u6211\u610f\u601d\u4e48.</p>"},{"location":"page1/#_4","title":"\u5173\u4e8e\u8fd9\u4e2a\u793c\u62dc","text":"<p>\u8fd9\u4e2a\u793c\u62dc\u6709\u4e9b\u4e8b\u60c5\u6b65\u5165\u4e86\u6b63\u89c4,\u6bd4\u5982\u8003\u7814,\u6bd4\u5982coding,\u6bd4\u5982\u4e94\u7ea7\u6d41\u6c34\u7ebfCPU,\u6bd4\u5982CSAPP,\u6bd4\u5982\u6211\u5bf9\u4e00\u4e9b\u4e8b\u60c5\u7684\u8ba4\u8bc6. \u79ef\u6781\u4f7f\u7528\u534a\u89d2\u6807\u70b9\u7b26\u53f7\u7684\u597d\u5904(<code>ctrl</code>+<code>up</code>)=&gt;</p>"},{"location":"page1/#_5","title":"\u5f00\u59cb\u5b9e\u73b0\u4ee3\u7801\u9ad8\u7cb1","text":"<p>\u6587\u6863\u770b\u7684\u4e0d\u591f\u4ed4\u7ec6. \u5f00\u59cb\u55ef\u9020</p> Customization\u5f88\u5f00\u5fc3\u7684\u4e8b\u60c5 <ul> <li>nav</li> <li>js</li> <li>css \u76ee\u524d\u4e86\u89e3\u7684\u60c5\u51b5,\u5927\u6982\u5c31\u662fnav\u662fnavigator\u5bfc\u822a,js\u5e94\u8be5\u8ddfkatex\u6709\u70b9\u5173\u7cfb,css\u5927\u6982\u6216\u8bb8\u5df2\u7ecf\u89e3\u51b3?(haha) \u63a5\u4e0b\u6765\u60f3\u505a\u7684\u4e8b\u60c5,\u5927\u6982\u5c31\u662f\u597d\u597d\u7684\u5199note\u4e86.,\u5927\u6982\u5c31\u662f\u68b3\u7406\u6e05\u9664nav\u7684\u7528\u6cd5,\u7136\u540e\u6539\u4e00\u4e0b\u4e0bicon,\u7136\u540e\u5f00\u59cb\u55ef\u9020note</li> </ul> <p>\u76ee\u524d\u603b\u7b97\u628agit\u6700\u57fa\u672c\u7684\u4e00\u4e9b\u4e1c\u897f\u641e\u7684\u6bd4\u8f83\u6e05\u695a\u4e86,\u8fd8\u6ca1\u5f04\u6e05\u695a\u7684\u662fmerge\u8fd9\u4e9b\u591a\u7ebf\u5f00\u53d1,\u56e2\u961f\u534f\u4f5c\u7684\u4e1c\u897f,\u4f46\u662f\u6211\u5355\u4eba\u5f00\u53d1,\u5355\u9879\u5f00\u6cd5.</p> <p>\u597d\u50cfmarkdown\u4e5f\u6709\u70b9\u8fd9\u4e2a\u5c31\u8fd1\u539f\u5219\u7684\u610f\u601d,\u542c\u96be\u7ef7\u7684.</p> <p>\u8fd9\u4e2a\u661f\u671f\u63a5\u4e0b\u6765\u7684\u65f6\u95f4\u5c31\u4f1a\u662f\u6069\u9020,\u79ef\u5206\u9ad8\u6570balabla.</p> <p>Changing the logo and icons When installing Material for Mkdocs,you immediately get access to over 8,000 icons ready to be used for customization  of specific parts of the theme and/or then writing your documentation in Markdown.Not enough</p>"},{"location":"page1/#table","title":"\u5173\u4e8etable","text":"<p>| shit  | shit    | |-------|------r lobortis orci</p> Ordered list <p>| |<code>get</code>  | Fetch resource| |<code>PUT</code>  | Update res|</p> <p>-&gt;r lobortis orci</p> Ordered listCC++ <pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  printf(\"Hello world!\\n\");\n  return 0;\n}\n</code></pre> <pre><code>#include &lt;iostream&gt;\n\nint main(void) {\n  std::cout &lt;&lt; \"Hello world!\" &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre> Conten tabs with code blocks<pre><code>\u5728markdoown\u4e2d\u8f93\u5165\n=== \"C\"\n\n    ``` c\n    #include &lt;stdio.h&gt;\n\nr lobortis orci\n\n=== \"Ordered list\"\n\n\n=== \"C++\"\n\n    ``` c++\n    #include &lt;iostream&gt;\n\n    int main(void) {\n      std::cout &lt;&lt; \"Hello world!\" &lt;&lt; std::endl;\n      return 0;\n    }\n    ``` \n</code></pre> Unordered listOrdered list <ul> <li>Sed sagittis eleifend rutrum</li> <li>Donec vitae suscipit est</li> <li>Nulla tempor lobortis orci</li> </ul> <ol> <li>Sed sagittis eleifend rutrum</li> <li>Donec vitae suscipit est</li> <li>Nulla tempor lobortis orci</li> </ol> <p>\u4e00\u5b9a\u8981\u7a7a\u683c\u963f,\u5e76\u4e14\u6709\u7f29\u8fdb(\u5d4c\u5957\u5236\u8868\u7b26) \u9700\u8981\u4e24\u6b21\u7f29\u8fdb</p>"},{"location":"page1/#nav","title":"nav(\u5bfc\u822a)","text":"<p>\u8fd8\u662f\u5f97\u624b\u52a8\u4fee\u6539mkdocs.yml\u4e2d\u7684\u76ee\u5f55,\u5e76\u4e0d\u662f\u81ea\u52a8\u68c0\u6d4b\u65b0\u589e\u6587\u672c\u6587\u4ef6\u6765\u81ea\u52a8\u751f\u6210mkdocs.yml</p>"},{"location":"page1/#neovim","title":"neovim","text":"<ul> <li>\u56db\u79cdmode<code>command</code>,<code>insert</code>,<code>normal</code>,<code>view</code>.</li> <li> <p><code>Esc</code>  =&gt; <code>normal</code> =&gt; <code>i</code>,<code>I</code>,<code>o</code>,<code>O</code>,<code>a</code>,<code>A</code> =&gt; <code>insert</code>=&gt;<code>Esc</code> =&gt; <code>normal</code>=&gt;<code>ctrl+v</code>=&gt;<code>view</code>=&gt;<code>:</code>=&gt;<code>command</code></p> </li> <li> <p><code>0</code></p> </li> </ul>"},{"location":"page1/#github","title":"\u4f7f\u7528\u591a\u4e2a\u5bc6\u94a5\u6765\u5728\u591a\u4e2agithub\u8d26\u53f7\u4e0a\u5207\u6362","text":"<p>How can I configure multiple SSH keys for different GitHub accounts? To configure multiple SSH keys for different GitHub accounts, you can follow these steps:</p> <ol> <li>Generate SSH keys: For each GitHub account, generate a new SSH key (if you haven't already) with a unique email address.</li> </ol> <pre><code>ssh-keygen -t rsa -b 4096 -C \"your-email@example.com\"\n</code></pre> <p>When prompted, give each key a unique name, such as <code>id_rsa_account1</code>, <code>id_rsa_account2</code>, etc.</p> <ol> <li>Add SSH keys to ssh-agent: Start the ssh-agent in the background and add your new SSH private key to the ssh-agent.</li> </ol> <pre><code>eval \"$(ssh-agent -s)\"\nssh-add ~/.ssh/id_rsa_account1\nssh-add ~/.ssh/id_rsa_account2\n</code></pre> <ol> <li> <p>Add SSH keys to GitHub accounts: For each GitHub account, go to Settings -&gt; SSH and GPG keys -&gt; New SSH key, then paste the contents of the corresponding public key file (e.g., <code>id_rsa_account1.pub</code>, <code>id_rsa_account2.pub</code>, etc.).</p> </li> <li> <p>Create SSH config file: Create a new configuration file for SSH in your user directory, if it doesn't already exist.</p> </li> </ol> <pre><code>touch ~/.ssh/config\n</code></pre> <ol> <li>Edit SSH config file: Open the SSH config file in a text editor, and add an entry for each GitHub account.</li> </ol> <pre><code># Account 1\nHost github.com-account1\n    HostName github.com\n    User git\n    IdentityFile ~/.ssh/id_rsa_account1\n\n# Account 2\nHost github.com-account2\n    HostName github.com\n    User git\n    IdentityFile ~/.ssh/id_rsa_account2\n</code></pre> <ol> <li>Use SSH config in Git: When cloning a repository, use the Host alias you set in the SSH config file.</li> </ol> <pre><code>git clone git@github.com-account1:username/repo.git\n</code></pre> <p>Replace <code>username</code> with your GitHub username and <code>repo</code> with your repository name. Use the correct Host alias for the account you want to use.</p> <p>This way, you can use multiple SSH keys for different GitHub accounts.</p>"},{"location":"page1/#tweak","title":"\u5173\u4e8etweak","text":"<p>\u8fd9\u4e2aubuntu\u4e0a\u7684\u6539\u53d8\u5168\u5c40\u7684\u4e1c\u897f\u6709\u70b9\u795e\u5947,\u53ef\u4ee5\u6539\u5b57\u4f53,\u7cfb\u7edf\u8bed\u8a00\u8bbe\u7f6e\u7684\u66f4\u6539\u8fd8\u5f97<code>reboot</code>,\u4e0d\u8fc7\u73b0\u5728\u7ed3\u679c\u8fd8\u884c.(half punctuations)</p>"},{"location":"page1/#clash","title":"\u5173\u4e8eclash","text":"<p>\u8981\u5728Ubuntu 20.04\u4e0a\u5b9e\u73b0\u5f00\u673a\u81ea\u52a8\u8fd0\u884cClash\u4ee3\u7406,\u4f60\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\u64cd\u4f5c\uff1a</p> <ol> <li>\u521b\u5efa\u542f\u52a8\u811a\u672c\uff1a</li> <li> <p>\u9996\u5148,\u521b\u5efa\u4e00\u4e2a\u542f\u52a8\u811a\u672c,\u7528\u4e8e\u542f\u52a8Clash\u4ee3\u7406.\u4f60\u53ef\u4ee5\u5728 <code>/etc/init.d/</code> \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u811a\u672c\u6587\u4ef6,\u6bd4\u5982 <code>clash-start.sh</code>.</p> </li> <li> <p>\u7f16\u8f91\u542f\u52a8\u811a\u672c\uff1a</p> </li> <li> <p>\u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\uff08\u6bd4\u5982 <code>nano</code> \u6216 <code>vim</code>\uff09\u7f16\u8f91\u8fd9\u4e2a\u811a\u672c\u6587\u4ef6.\u5728\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a      <pre><code>#!/bin/bash\n/path/to/your/clash-binary -d /path/to/your/config/directory\n</code></pre>      \u8bf7\u66ff\u6362 <code>/path/to/your/clash-binary</code> \u4e3a\u4f60\u5b9e\u9645\u7684 Clash \u53ef\u6267\u884c\u6587\u4ef6\u8def\u5f84,<code>/path/to/your/config/directory</code> \u4e3a\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55.</p> </li> <li> <p>\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\uff1a</p> </li> <li> <p>\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\u7ed9\u4f60\u7684\u542f\u52a8\u811a\u672c\uff1a      <pre><code>sudo chmod +x /etc/init.d/clash-start.sh\n</code></pre></p> </li> <li> <p>\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\u52a8\uff1a</p> </li> <li> <p>\u4f7f\u7528 <code>update-rc.d</code> \u547d\u4ee4\u5c06\u811a\u672c\u6dfb\u52a0\u5230\u542f\u52a8\u9879\u4e2d\uff1a      <pre><code>sudo update-rc.d clash-start.sh defaults\n</code></pre></p> </li> <li> <p>\u6d4b\u8bd5\uff1a</p> </li> <li>\u73b0\u5728\u4f60\u53ef\u4ee5\u6d4b\u8bd5\u8fd9\u4e2a\u542f\u52a8\u811a\u672c\u662f\u5426\u80fd\u591f\u6b63\u5e38\u8fd0\u884c.\u4f60\u53ef\u4ee5\u91cd\u542f\u4f60\u7684\u8ba1\u7b97\u673a,\u7136\u540e\u68c0\u67e5 Clash \u662f\u5426\u5df2\u7ecf\u81ea\u52a8\u542f\u52a8\u4e86.</li> </ol> <p>\u8fd9\u6837,\u6bcf\u6b21\u7cfb\u7edf\u542f\u52a8\u65f6,Clash \u4ee3\u7406\u90fd\u4f1a\u81ea\u52a8\u8fd0\u884c.</p>"},{"location":"page1/#clash_1","title":"clash\u900f\u660e\u4ee3\u7406","text":"<p>TUN \u6a21\u5f0f \u65b0\u7248\u7684 Clash Premium \u5185\u6838\u652f\u6301 TUN \u6a21\u5f0f,\u4e14\u76ee\u524d\u5df2\u652f\u6301 Linux \u7cfb\u7edf\u4e0b\u7684 auto-route \u548c auto-detect-interface,\u65e0\u9700\u624b\u52a8\u8bbe\u7f6e\u8f6c\u53d1\u8868,\u53ef\u4ee5\u65b9\u4fbf\u5feb\u6377\u7684\u5b9e\u73b0 \u900f\u660e\u7f51\u5173\uff08\u65c1\u8def\u7531\uff09 \u7684\u529f\u80fd.</p> <p>\u9996\u5148\u9700\u8981\u4e0b\u8f7d Clash Premium \u7248\u672c,\u66ff\u6362\u4e0a\u9762\u7684 clash \u6587\u4ef6.\u63a5\u7740\u9700\u8981\u8bbe\u7f6e Linux \u7cfb\u7edf,\u5f00\u542f\u8f6c\u53d1\u529f\u80fd.\u7f16\u8f91\u6587\u4ef6 /etc/sysctl.conf,\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <p><pre><code>net.ipv4.ip_forward=1\n</code></pre> \u4fdd\u5b58\u9000\u51fa\u540e,\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f\u4fee\u6539\u751f\u6548\uff1a</p> <pre><code>sudo sysctl -p\n</code></pre> <p>\u7136\u540e\u63a5\u7740\u9700\u8981\u5173\u95ed\u7cfb\u7edf\u7684 DNS \u670d\u52a1,\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <p><pre><code>sudo systemctl stop systemd-resolved\nsudo systemctl disable systemd-resolved\n</code></pre> \u5173\u4e8e\u4ee3\u7406\u73af\u5883\u4e0b DNS \u89e3\u6790\u884c\u4e3a\u7684\u6df1\u5165\u63a2\u8ba8,\u53ef\u4ee5\u53c2\u89c1\u6d45\u8c08\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684 DNS \u89e3\u6790\u884c\u4e3a\u4ee5\u53ca\u6211\u6709\u7279\u522b\u7684 DNS \u914d\u7f6e\u548c\u4f7f\u7528\u6280\u5de7.</p> <p>\u63a5\u7740\u9700\u8981\u8bbe\u7f6e Clash \u7684\u914d\u7f6e\u6587\u4ef6,\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>dns:\n  enable: true\n  listen: 0.0.0.0:53\n  enhanced-mode: fake-ip\n  nameserver:\n    - 114.114.114.114\n  fallback:\n    - 8.8.8.8\ntun:\n  enable: true\n  stack: system # or gvisor\n  dns-hijack:\n    - 8.8.8.8:53\n    - tcp://8.8.8.8:53\n    - any:53\n    - tcp://any:53\n  auto-route: true # auto set global route\n  auto-detect-interface: true # conflict with interface-name\n  ```\n\n\u6700\u540e\u91cd\u542f Clash \u670d\u52a1\u5373\u53ef,\u8fd9\u6837\u6d41\u91cf\u5c31\u4f1a\u901a\u8fc7 TUN \u63a5\u53e3\u8f6c\u53d1,\u540c\u65f6\u5229\u7528\u5f3a\u5927\u7684\u5206\u6d41\u89c4\u5219,\u5b9e\u73b0\u6309\u9700\u4ee3\u7406.\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u5c40\u57df\u7f51\u5185\u7684\u7f51\u5173\u5730\u5740\u548c DNS \u670d\u52a1\u5668\u5730\u5740,\u5b9e\u73b0\u900f\u660e\u7f51\u5173.\n\n##### \u4e3a\u4ec0\u4e48\u6211\u7684clash\u6ca1\u6709dashboard\n\u56e0\u4e3a\u6ca1\u6709\u6240\u4ee5\u6ca1\u6709,\u6211\u627e\u5230\u7684 clash for linux \u7684\u7248\u672c\u662f\u4e0d\u5e26\u63a7\u5236\u754c\u9762\u7684,\u9700\u8981\u8bbf\u95ee \u8fd9\u4e2a web \u63a7\u5236\u53f0 \u624d\u80fd\u8fdb\u884c\u63a7\u5236.\u540e\u6765\u4e3a\u4e86\u65b9\u4fbf\u8bbf\u95ee,\u6211\u5c31\u628a\u4ed6\u7684\u5305\u90fd\u7ed9\u6293\u4e86\u4e0b\u6765,\u653e\u5728\u4e86\u672c\u5730\u7684 nginx \u4e0a.\u5f97\u6709\u4e2aclash-ui(\u4f46\u662f\u539f\u9879\u76ee\u5df2\u7ecf\u88ab\u5220\u6389sad)\n\nhttps://clash.razord.top/#/proxies\n\n[https://www.joeyne.cool/http/proxy/ubuntu-\u5b89\u88c5clash\u5e76\u914d\u7f6e\u5f00\u673a\u542f\u52a8/#clash-for-linux](https://www.joeyne.cool/http/proxy/ubuntu-\u5b89\u88c5clash\u5e76\u914d\u7f6e\u5f00\u673a\u542f\u52a8/#clash-for-linux)\n```shell\n\n# \u8fdb\u5165\u4e0b\u8f7d\u76ee\u5f55\uff08\u9ed8\u8ba4\u60c5\u51b5\u662f\u4e0b\u8f7d\u5230 ~/Downloads \u76ee\u5f55\uff0c\u5982\u679c\u4e0d\u662f\u8bf7\u8fdb\u5165\u5230\u5bf9\u5e94\u7684\u4e0b\u8f7d\u76ee\u5f55\uff09\ncd ~/Downloads\n# \u89e3\u538b\ngunzip clash-linux-amd64-v3-v1.15.1.gz\n# \u91cd\u547d\u540d\nmv clash-linux-amd64-v3-v1.15.1 clash\n# \u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650(\u89e3\u538b\u540e\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5982\u679c\u6ca1\u6709\u6267\u884c\u6743\u9650\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\uff09\nchmod +x clash\n# \u590d\u5236clash \u5230/usr/bin/\u6587\u4ef6\u5939(\u8fd9\u6837\u5728\u7ec8\u7aef\u4efb\u4f55\u4f4d\u7f6e\u6267\u884c clash \u5373\u53ef\u542f\u52a8)\nsudo mv clash /usr/bin/\n</code></pre> <pre><code>[Unit]\nDescription=clash\n\n[Service]\nType=simple\nExecStart=/usr/bin/clash -f /home/along/desk/clash/config.yaml\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>"},{"location":"page1/#gitgithub","title":"\u5173\u4e8egit\u548cgithub","text":"<p>ssh\u7684\u5bc6\u94a5\u53ea\u80fd\u6765\u9a8c\u8bc1ssh\u534f\u8bae\u76f8\u5173\u7684,\u4f60\u5982\u679c\u4f7f\u7528\u7684\u662fhttps\u7684\u5c31\u4e0d\u80fd\u9a8c\u8bc1.\u6240\u4ee5\u6dfb\u52a0remote\u7684\u65f6\u5019\u8981\u6ce8\u610f,\u5982\u679c\u662fssh\u7684\u8bdd,\u5c31\u8981\u7528ssh\u7684\u5730\u5740,\u5982\u679c\u662fhttps\u7684\u8bdd,\u5c31\u8981\u7528https\u7684\u5730\u5740.</p>"},{"location":"page1/#git-remote","title":"\u66f4\u6539\u6216\u8005\u6dfb\u52a0git remote\u4ed3\u5e93\u7684\u5730\u5740","text":"<pre><code>git remote set-url origin yours_github_repository_url\ngit remote add origin yours_github_repository_url\n# \u6b64\u5904origin\u53ef\u4ee5\u81ea\u884c\u4fee\u6539\n</code></pre>"},{"location":"page1/#_6","title":"\u5f3a\u5236\u63a8\u9001","text":"<p>\u5982\u679c\u4f60\u4e0d\u5728\u4e4e<code>main</code>\u5206\u652f\u7684\u5185\u5bb9\uff0c\u5e76\u4e14\u4f60\u60f3\u8981\u5c06<code>pa1</code>\u5206\u652f\u7684\u5185\u5bb9\u5f3a\u5236\u63a8\u9001\u5230<code>main</code>\u5206\u652f\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code># \u5207\u6362\u5230pa1\u5206\u652f\ngit checkout pa1\n\n# \u5f3a\u5236\u63a8\u9001\u5230\u8fdc\u7aef\u7684main\u5206\u652f\ngit push origin +pa1:main\n# origin\u662f\u8fdc\u7aef\u4ed3\u5e93\u7684\u540d\u79f0\uff0c+pa1:main\u8868\u793a\u5c06\u672c\u5730\u7684pa1\u5206\u652f\u5f3a\u5236\u63a8\u9001\u5230\u8fdc\u7aef\u7684main\u5206\u652f\n</code></pre> <p>\u8fd9\u91cc\u7684<code>+</code>\u7b26\u53f7\u8868\u793a\u5f3a\u5236\u63a8\u9001\u3002\u8fd9\u5c06\u4f1a\u8986\u76d6\u8fdc\u7aef\u7684<code>main</code>\u5206\u652f\uff0c\u4f7f\u5176\u4e0e\u4f60\u672c\u5730\u7684<code>pa1</code>\u5206\u652f\u5b8c\u5168\u76f8\u540c\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u5f3a\u5236\u63a8\u9001\u662f\u4e00\u79cd\u7834\u574f\u6027\u64cd\u4f5c\uff0c\u5b83\u4f1a\u6c38\u4e45\u5730\u8986\u76d6\u8fdc\u7aef\u7684<code>main</code>\u5206\u652f\u3002\u5728\u4f60\u6267\u884c\u8fd9\u4e2a\u64cd\u4f5c\u4e4b\u524d\uff0c\u4f60\u5e94\u8be5\u786e\u4fdd\u4f60\u4e0d\u9700\u8981<code>main</code>\u5206\u652f\u4e0a\u7684\u4efb\u4f55\u66f4\u6539\uff0c\u6216\u8005\u4f60\u5df2\u7ecf\u5907\u4efd\u4e86\u8fd9\u4e9b\u66f4\u6539\u3002</p>"},{"location":"page1/#markdown","title":"\u4e00\u4e9b\u5173\u4e8emarkdown\u7684\u8bb0\u5f55","text":""},{"location":"page1/#_7","title":"\u5173\u4e8e\u62e9\u65e5\u98de\u5347","text":"<p>\u786e\u5b9e\u597d\u770b,\u7136\u540e\u6211\u8fd8\u662f\u89c9\u5f97\u8fd9\u4e2a\u8f93\u5165\u6cd5\u5f97\u6362\u4e00\u4e0b,\u4e4b\u524d\u5728B\u7ad9\u4e0a\u770b\u5230\u4e2d\u5dde\u97f5\u52a9\u624b\u91cd\u6784\u7248.</p> <p>\u4f5c\u8005\uff1a\u595a\u6c34\u6eaa\u6d41\u897f \u94fe\u63a5\uff1ahttps://zhuanlan.zhihu.com/p/681840313 \u6765\u6e90\uff1a\u77e5\u4e4e \u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002</p> <ol> <li> <p>\u4ec0\u4e48\u662f\u201c\u6c11\u65cf\u56e2\u7ed3\u4e3b\u4e49\u201d\uff0c\u4ec0\u4e48\u662f\u201c\u56e2\u7ed3\u6d3e\u201d \u6240\u8c13\u201c\u6c11\u65cf\u56e2\u7ed3\u4e3b\u4e49\u201d\u662f\u6211\u56fd\u7279\u6b8a\u56fd\u60c5\u53d1\u5c55\u51fa\u6765\u7684\u9006\u5411\u6c11\u65cf\u4e3b\u4e49\uff0c\u201c\u56e2\u7ed3\u4e3b\u4e49\u201d\u7684\u672c\u8d28\u662f\u5728\u6c11\u65cf\u5dee\u5f02\u5bf9\u5f85\u653f\u7b56\u4e0b\u4ee5\u6c11\u65cf\u6587\u5316\u4e3a\u5bf9\u7acb\u57fa\u7840\u7684\u6c11\u65cf\u5206\u88c2\u4e3b\u4e49\u3002\u5b83\u8fc7\u5206\u5f3a\u8c03\u201c\u6c11\u65cf\u7684\u865a\u65e0\u6027\u201d\uff0c\u540c\u65f6\u81f4\u529b\u4e8e\u201c\u53bb\u6c49\u65cf\u5316\u201d\uff0c\u5426\u5b9a\u5e7f\u5927\u6c49\u65cf\u4eba\u6c11\u5e94\u6709\u7684\u6c49\u65cf\u5386\u53f2\u53d9\u4e8b\u3002\u5b83\u4e0d\u4ec5\u62b9\u6740\u4e86\u5404\u5c11\u6570\u6c11\u65cf\u7684\u6587\u5316\u6e90\u5934\uff0c\u5404\u5c11\u6570\u6c11\u65cf\u6709\u81ea\u8eab\u6587\u5316\u7684\u4eba\u6587\u521d\u7956\uff0c\u53ef\u201c\u56e2\u7ed3\u4e3b\u4e49\u201d\u4e00\u5473\u7684\u626d\u66f2\u5c11\u6570\u6c11\u65cf\u6587\u5316\uff0c\u529b\u56fe\u5c06\u6240\u6709\u7684\u5c11\u6570\u6c11\u65cf\u7684\u4eba\u6587\u521d\u7956\u5f3a\u884c\u5212\u5b9a\u4e3a\u708e\u5e1d\u9ec4\u5e1d\uff0c\u5b83\u66f4\u626d\u66f2\u4e86\u6c49\u6587\u5316\u7684\u6587\u5316\u539f\u6559\u65e8\u9636\u6bb5\u7684\u53d1\u5c55\u5386\u53f2\u3002\u201c\u56e2\u7ed3\u6d3e\u201d\u4eec\u5728\u53e3\u53f7\u4e0a\u548c\u8a00\u8bba\u4e2d\u62e5\u62a4\u6c11\u65cf\u56e2\u7ed3\u5e73\u7b49\uff0c\u5b9e\u9645\u4e0a\u6a21\u7cca\u4e86\u5b9e\u9645\u5b58\u5728\u7684\u6c11\u65cf\u653f\u7b56\u7684\u5dee\u5f02\u5bf9\u5f85\uff0c\u548c\u793e\u4f1a\u4e3b\u4e49\u5e02\u573a\u7ecf\u6d4e\u53d1\u5c55\u6761\u4ef6\u4e0b\u7684\u5ba2\u89c2\u6c11\u65cf\u5173\u7cfb\u7684\u5185\u5728\u77db\u76fe\uff0c\u4ed6\u4eec\u5f80\u5f80\u5047\u9a6c\u514b\u601d\u4e3b\u4e49\u8005\uff0c\u4ee5\u7edf\u6218\u653f\u7b56\u4e3a\u653f\u6cbb\u6b63\u786e\u4e4b\u80cc\u4e66\uff0c\u501f\u201c\u6c11\u65cf\u56e2\u7ed3\u201d\u4e4b\u540d\uff0c\u4e0d\u63d0\u5148\u9a8c\u77db\u76fe\u800c\u53ea\u63d0\u7ed3\u679c\u7ec8\u8bba\u3002\u5c31\u5982\u540c\u6574\u5929\u628a\u201c\u5171\u4ea7\u4e3b\u4e49\u4e00\u5b9a\u8981\u5b9e\u73b0\u201d\u7684\u4e0d\u6210\u719f\u7684\uff0c\u5c1a\u4e14\u5e7c\u7a1a\u7684\u7f51\u7edc\u5de6\u6d3e\u5174\u8da3\u5c11\u5e74\u4eec\u4e00\u6837\uff0c\u4e0d\u540c\u7684\u662f\uff0c\u201c\u56e2\u7ed3\u6d3e\u201d\u4eec\u5e76\u4e0d\u5e7c\u7a1a\uff0c\u4ed6\u4eec\u7684\u5e95\u6c14\u662f\u201c\u7edf\u6218\u4ef7\u503c\u201d\uff0c\u4ed6\u4eec\u7684\u672c\u8d28\u662f\u5c11\u6570\u6c11\u65cf\u4e2d\u5c45\u5fc3\u4e0d\u826f\u7684\u5206\u88c2\u5206\u5b50\u3002</p> </li> <li> <p>\u4ec0\u4e48\u662f\u201c\u56e2\u7ed3\u53f2\u89c2\u201d \u201c\u56e2\u7ed3\u53f2\u89c2\u201d\u662f\u5728\u4e16\u754c\u89c2\u4e0a\u662f\u9519\u8bef\u7684\u552f\u5fc3\u53f2\u89c2\uff0c\u56e2\u7ed3\u6d3e\u5f80\u5f80\u6307\u9e7f\u4e3a\u9a6c\uff0c\u6307\u201c\u56e2\u7ed3\u53f2\u89c2\u201d\u4e3a\u201c\u9636\u7ea7\u53f2\u89c2\u201d\uff0c\u62ab\u7740\u9636\u7ea7\u53f2\u89c2\u7684\u76ae\uff0c\u6df7\u6dc6\u5386\u53f2\u6982\u5ff5\u548c\u63a9\u76d6\u5386\u53f2\u53d1\u5c55\u8fc7\u7a0b\u4e2d\u7684\u4e8b\u4ef6\u548c\u4e8b\u5b9e\u4ee5\u53ca\u57fa\u672c\u7ed3\u679c\uff0c\u9636\u7ea7\u53f2\u89c2\u8981\u4e0e\u201c\u56e2\u7ed3\u53f2\u89c2\u201d\u5212\u6e05\u754c\u9650\u3002\u56e2\u7ed3\u53f2\u89c2\u5ffd\u7565\uff0c\u6a21\u7cca\uff0c\u751a\u81f3\u7f8e\u5316\u4e0d\u540c\u6c11\u65cf\u5386\u53f2\u53d1\u5c55\u4e4b\u95f4\u7684\u77db\u76fe\u548c\u5177\u4f53\u7684\u5386\u53f2\u6c11\u65cf\u9057\u7559\u95ee\u9898\uff0c\u5b83\u5728\u54f2\u5b66\u89c2\u4e0a\u5426\u5b9a\u4e86\u5386\u53f2\u552f\u7269\u4e3b\u4e49\uff0c\u5426\u5b9a\u4e86\u9a6c\u514b\u601d\u4e3b\u4e49\u54f2\u5b66\u3002\u5b83\u628a\u201c\u6c11\u65cf\u5171\u540c\u4f53\u201d\u7684\u6982\u5ff5\u5957\u7528\u5230\u4e86\u4e0d\u7b26\u5408\u5b9e\u9645\u60c5\u51b5\u7684\u53e4\u4ee3\u7684\u5404\u4e2a\u5386\u53f2\u9636\u6bb5\uff0c\u53ea\u4e00\u6627\u7684\u5f3a\u8c03\u8840\u7edf\u7684\u878d\u5408\uff0c\u6587\u5316\u7684\u5305\u5bb9\uff0c\u800c\u5ffd\u89c6\u4e86\u4e0d\u540c\u6c11\u65cf\u4e4b\u95f4\u7684\u4e0d\u540c\u5386\u53f2\u7ecf\u6d4e\u53d1\u5c55\u57fa\u7840\uff0c\u4e0d\u540c\u6587\u5316\u4e60\u4fd7\u8bde\u751f\u793e\u4f1a\u53ca\u81ea\u7136\u5730\u7406\u6761\u4ef6\uff0c\u53ea\u63d0\u51fa\u5171\u6027\uff0c\u4e0d\u7a81\u51fa\u4e2a\u6027\uff0c\u53ea\u8c08\u8bba\u6574\u4f53\uff0c\u4e0d\u8ba8\u8bba\u90e8\u5206\u3002\u53ea\u8bf4\u660e\u5168\u90e8\uff0c\u4e0d\u641e\u6e05\u533a\u522b\u3002\u5728\u73b0\u4ee3\u79d1\u5b66\uff0c\u5206\u5b50\u751f\u7269\u5b66\u7684\u53d1\u5c55\u548c\u5f00\u653e\u6c11\u95f4\u7684\u553e\u6db2\u68c0\u6d4b\u7684\u6f6e\u6d41\u4e0b\uff0c\u65e9\u5c31\u5e94\u8be5\u88ab\u626b\u5165\u5386\u53f2\u5783\u573e\u6876\u7684\u201c\u6c49\u4eba\u6742\u8840\u8bba\u201d\uff0c\u201c\u6c49\u4eba\u80e1\u5316\u8bba\u201d\u5df2\u7ecf\u88ab\u51fb\u7834\uff0c\u5b9e\u9645\u60c5\u51b5\u8bc1\u660e\u4e86\uff0c\u6c49\u6c11\u65cf\u8840\u7edf\u5728\u4e16\u754c\u4e0a\u6070\u6070\u662f\u6781\u4e3a\u7eaf\u6b63\u7684\uff0c\u53cd\u5012\u662f\u4e0d\u5c11\u539f\u672c\u662f\u5c11\u6570\u6c11\u65cf\u7684\u4eba\u6c11\u7fa4\u4f17\uff0c\u53d1\u73b0\u81ea\u5df1\u6c49\u4eba\u8840\u7edf\u7684\u6bd4\u91cd\u5360\u4e3b\u4f53\u3002\u56e2\u7ed3\u53f2\u89c2\u53cd\u5bf9\u5b9e\u4e8b\u6c42\u662f\u770b\u5f85\u95ee\u9898\uff0c\u662f\u843d\u540e\u4e14\u9519\u8bef\u7684\u611a\u8822\u53f2\u89c2\uff0c\u9a6c\u514b\u601d\u4e3b\u4e49\u8005\u8981\u8b66\u60d5\u8fd9\u79cd\u53f2\u89c2\u7684\u865a\u5047\u9762\u8c8c\u3002</p> </li> <li> <p>\u201c\u56e2\u7ed3\u4e3b\u4e49\u201d\uff0c\u201c\u56e2\u7ed3\u6d3e\u201d\u7684\u65b9\u6cd5\u8bba\u548c\u65b9\u6cd5 \u56e2\u7ed3\u6d3e\u4eec\u5f80\u5f80\u8fd0\u7528\u9a6c\u514b\u601d\u4e3b\u4e49\u54f2\u5b66\u53ca\u9a6c\u514b\u601d\u4e3b\u4e49\u653f\u6cbb\u7ecf\u6d4e\u5b66\u4e2d\u7684\u4e13\u4e1a\u672f\u8bed\u6765\u54c4\u9a97\uff0c\u88f9\u631f\u65e0\u77e5\u7684\u7f51\u7edc\u6c11\u4f17\u548c\u5bf9\u9a6c\u514b\u601d\u4e3b\u4e49\u4e86\u89e3\u4e0d\u6df1\u7684\uff0c\u53ea\u5b58\u5728\u4e8e\u8a00\u8bba\u6a21\u4eff\u7684\u7f51\u7edc\u9a6c\u514b\u601d\u4e3b\u4e49\u8eab\u4efd\u5174\u8da3\u7231\u597d\u8005\u3002\u4ed6\u4eec\u53ea\u5f3a\u8c03\u6211\u56fd\u66fe\u7ecf\u201c\u53cd\u5bf9\u5927\u6c49\u65cf\u4e3b\u4e49\u201d\uff0c\u5374\u53ea\u53e3\u4e0d\u63d0\u6211\u56fd\u4e5f\u53cd\u5bf9\u201c\u5730\u65b9\u6c11\u65cf\u4e3b\u4e49\u201d\u4ed6\u4eec\u91cd\u590d\u5ff5\u53e8\u201c\u4e16\u4e0a\u6709\u9636\u7ea7\u800c\u65e0\u6c11\u65cf\u201d\uff0c\u800c\u8fd9\u4e0d\u8fc7\u662f\u65af\u5927\u6797\u4e3b\u4e49\u5728\u82cf\u5171\u5efa\u8bbe\u4e2d\u6240\u53d1\u5c55\u51fa\u9519\u8bef\u7684\u6c11\u65cf\u89c2\u70b9\u7684\u8bba\u8c03\u4e4b\u4e00\u7f62\u4e86\u3002\u9a6c\u514b\u601d\u548c\u5217\u5b81\u4ece\u672a\u76f4\u63a5\u63d0\u51fa\u201c\u4e16\u754c\u4e0a\u6709\u9636\u7ea7\u800c\u65e0\u6c11\u65cf\u201d\u7684\u89c2\u70b9\u3002\u9636\u7ea7\u7684\u5b58\u5728\u57fa\u4e8e\u751f\u4ea7\u8d44\u6599\u79c1\u6709\u5236\u800c\u5b58\u5728\u3002\u6c11\u65cf\u7684\u5b58\u5728\u57fa\u4e8e\u4ee5\u4e00\u5b9a\u9636\u6bb5\u7684\u6c11\u65cf\u8840\u7edf\u4e3a\u57fa\u7840\uff0c\u548c\u4e00\u5b9a\u65f6\u671f\u957f\u671f\u5171\u5b58\u4ea4\u5f80\u5173\u7cfb\u4e2d\u7684\u4eba\u7c7b\u5171\u540c\u6587\u5316\u3002\u9a6c\u514b\u601d\u4e3b\u4e49\u8005\u8ba4\u4e3a\uff0c\u9636\u7ea7\u548c\u6c11\u65cf\u5728\u7269\u8d28\u57fa\u7840\u548c\u610f\u8bc6\u5f62\u6001\u4e24\u4e2a\u65b9\u9762\u662f\u540c\u65f6\u6d88\u706d\u7684\uff0c\u800c\u8fd9\u79cd\u6d88\u706d\u9700\u8981\u5728\u5171\u4ea7\u4e3b\u4e49\u5efa\u7acb\u7684\u524d\u63d0\u4e0b\u3002\u6d88\u706d\u6c11\u65cf\uff0c\u4e0d\u4ee3\u8868\u6d88\u706d\u6c11\u65cf\u8089\u4f53\uff0c\u4e5f\u4e0d\u4ee3\u8868\u6c11\u65cf\u6587\u5316\uff0c\u548c\u5426\u5b9a\u6c11\u65cf\u53d1\u5c55\u7684\u5386\u53f2\u3002\u800c\u662f\u6d88\u706d\u6c11\u65cf\u4e3b\u4e49\u5bf9\u6587\u5316\u4ea4\u6d41\u548c\u7269\u8d28\u4ea4\u5f80\u7684\u601d\u60f3\u9694\u9602\u548c\u5236\u5ea6\u963b\u65ad\u3002\u4e16\u754c\u4e0a\u6709\u9636\u7ea7\uff0c\u4e5f\u6709\u6c11\u65cf\u3002\u6c11\u65cf\u4e3b\u4e49\u662f\u6307\u4e00\u56fd\u7684\u6c11\u65cf\u8d44\u4ea7\u9636\u7ea7\u4e3a\u6269\u5f20\u5e02\u573a\u7ecf\u6d4e\u5229\u76ca\u5bf9\u672c\u56fd\u672c\u6c11\u65cf\u65e0\u4ea7\u9636\u7ea7\u7684\u538b\u8feb\u548c\u52a8\u5458\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u8d38\u6613\u4fdd\u62a4\u4e3b\u4e49\uff0c\u5bf9\u5916\u6218\u4e89\u5f81\u5175\u7b49\u3002\u90a3\u4e9b\u9f13\u5439\u201c\u81ea\u7531\u4e3b\u4e49\u201d\u4e0e\u201c\u6c11\u65cf\u4e3b\u4e49\u201d\u8054\u5408\u8d77\u6765\u7684\uff0c\u90fd\u662f\u4ee5\u538b\u69a8\u672c\u6c11\u65cf\u5229\u76ca\u4e3a\u76ee\u7684\u7684\u8d44\u4ea7\u9636\u7ea7\u8bba\u8c03\u3002\u540c\u6837\u7684\uff0c\u90a3\u4e9b\u9f13\u5439\u201c\u4e16\u4e0a\u6709\u9636\u7ea7\u800c\u65e0\u6c11\u65cf\u201d\u4e0e\u201c\u56e2\u7ed3\u7edf\u6218\u201d\u8054\u5408\u8d77\u6765\u7684\uff0c\u662f\u9006\u5411\u6c11\u65cf\u4e3b\u4e49\u7684\u5229\u76ca\u5206\u5b50\uff0c\u5047\u501f\u9a6c\u514b\u601d\u4e3b\u4e49\u540d\u4e49\uff0c\u52a8\u5458\u7edd\u5927\u591a\u6570\u4eba\u56e2\u7ed3\u6781\u5c11\u6570\u4eba\uff0c\u5728\u6c11\u65cf\u95ee\u9898\u4e0a\u89c2\u70b9\u5931\u8861\uff0c\u672c\u8d28\u662f\u5206\u88c2\u4e3b\u4e49\u7684\u8bba\u8c03\u3002</p> </li> <li> <p>\u9a6c\u514b\u601d\u4e3b\u4e49\u8005\u7684\u65b9\u6cd5\u8bba\u548c\u65b9\u6cd5 \u9996\u5148\uff0c\u62e5\u62a4\u6c11\u65cf\u5e73\u7b49\u5c31\u8981\u53cd\u5bf9\u6c11\u65cf\u5dee\u5f02\u5bf9\u5f85\u653f\u7b56\u3002\u7edf\u6218\u53ea\u80fd\u662f\u6682\u65f6\u7684\u9700\u8981\uff0c\u800c\u201c\u6682\u65f6\u201d\u662f\u6709\u754c\u9650\u3001\u6709\u65f6\u95f4\u671f\u9650\u7684\u3002\u4f8b\u5982\u5c11\u6570\u6c11\u65cf\u52a0\u5206\u653f\u7b56\uff0c\u662f\u5b9e\u6253\u5b9e\u7684\u5197\u653f\u5197\u7b56\uff0c\u5b83\u5ffd\u7565\u4e86\u5c11\u6570\u6c11\u65cf\u5730\u533a\u771f\u6b63\u9700\u8981\u7684\u6559\u80b2\u8d44\u6e90\u8c03\u914d\uff0c\u6559\u80b2\u4e8b\u4e1a\u53d1\u5c55\uff0c\u7ecf\u6d4e\u6c34\u5e73\u76f8\u5bf9\u843d\u540e\u7b49\u591a\u65b9\u9762\u95ee\u9898\uff0c\u91cf\u5316\u52a0\u5206\u662f\u6ca1\u6709\u79d1\u5b66\u4f9d\u636e\u7684\uff0c\u6709\u4eba\u8bf4\uff1a\u201c\u52a0\u5206\u653f\u7b56\u52a0\u7684\u5206\u5982\u4eca\u5f88\u5c11\u4e86\uff0c\u5927\u591a\u6570\u5c11\u6c11\u52a0\u5206\u5c11\u5219\u4e0d\u8fc7\u4e00\u4e24\u5206\u201d\u3002\u8fd9\u5c31\u66f4\u8be5\u53d6\u6d88\u5b83\u4e86\uff01\u6709\u4e0d\u5982\u65e0\u7684\u4e1c\u897f\u5e94\u8be5\u7acb\u9a6c\u5c31\u65e0\u3002\u4e00\u62d6\u518d\u62d6\u4f1a\u88ab\u7edf\u6218\u5927\u65d7\u7eca\u4f4f\u81ea\u5df1\u7684\u811a\u3002\u5728\u8fd9\u4e2a\u57fa\u7840\u4e0a\uff0c\u53cd\u5bf9\u4e00\u5207\u5c11\u6570\u6c11\u65cf\u4f18\u5f85\u653f\u7b56\uff0c\u6211\u4eec\u9f13\u52b1\u5c06\u771f\u6b63\u5c11\u6570\u6c11\u65cf\u9700\u8981\u7684\u7ecf\u6d4e\u8d44\u6e90\uff0c\u79d1\u6280\u53d1\u660e\uff0c\u57fa\u7840\u8bbe\u65bd\uff0c\u6559\u80b2\u7406\u5ff5\u4e88\u4ee5\u6295\u5165\u548c\u6269\u5927\u8fdb\u800c\u53d1\u5c55\uff0c\u800c\u975e\u62e5\u62a4\u5b83\u4eec.</p> </li> <li> <p>\u8bc4\u8bba\u533a</p> </li> </ol> <p>\u628a\u6ee1\u6e05\u5f53\u4e2d\u56fd\u7684\u4eba\uff0c\u81f3\u5c11\u9a6c\u514b\u601d\u4e3b\u4e49\u5c31\u6ca1\u5b66\u597d\uff0c\u8001\u9a6c\u90fd\u8bf4\u4e86\u5f53\u65f6\u4e2d\u56fd\u88ab\u8fd9\u4e9b\u9791\u864f\u5f81\u670d\u4e86\u3002</p> <p>\u201c\u6ee1\u6e05\u738b\u671d\u5b9e\u884c\u8fd9\u79cd\u95ed\u5173\u9501\u56fd\u653f\u7b56\u7684\u66f4\u4e3b\u8981\u539f\u56e0\u662f\u5b83\u5bb3\u6015\u5916\u56fd\u4eba\u4f1a\u652f\u6301\u5f88\u591a\u7684\u4e2d\u56fd\u4eba\u5728\u5341\u4e03\u4e16\u7eaa\u7684\u5927\u7ea6\u524d\u534a\u4e2a\u4e16\u7eaa\u91cc\u5373\u5728\u4e2d\u56fd\u88ab\u9791\u977c\u4eba\u5f81\u670d\u4ee5\u540e\u6240\u6000\u62b1\u7684\u4e0d\u6ee1\u60c5\u7eea\u3002\u7531\u4e8e\u8fd9\u79cd\u539f\u56e0\uff0c\u5916\u56fd\u4eba\u624d\u88ab\u7981\u6b62\u540c\u4e2d\u56fd\u4eba\u6709\u4efb\u4f55\u6765\u5f80\u3002\u201d</p> <p>\u8fd9\u4e9b\u5f80\u5916\u8f93\u51fa\u201c\u79e9\u5e8f\u201d\uff0c\u4f01\u56fe\u6276\u6301\u6447\u6447\u6b32\u5760\u7684\u6ee1\u6e05\u738b\u671d\u7684\u5217\u5f3a\uff0c\u6050\u6015\u662f\u5fd8\u8bb0\u4e86\uff1a\u4ec7\u89c6\u5916\u56fd\u4eba\uff0c\u628a\u4ed6\u4eec\u9010\u51fa\u56fd\u5883\uff0c\u8fd9\u5728\u8fc7\u53bb\u4ec5\u4ec5\u662f\u51fa\u4e8e\u4e2d\u56fd\u5730\u7406\u4e0a\u3001\u4eba\u79cd\u4e0a\u7684\u539f\u56e0\uff0c\u53ea\u662f\u5728\u6ee1\u6d32\u9791\u977c\u4eba\u5f81\u670d\u4e86\u8fd9\u4e2a\u56fd\u5bb6\u4ee5\u540e\u624d\u5f62\u6210\u4e00\u79cd\u653f\u6cbb\u5236\u5ea6\u3002</p> <p>\u8282\u9009\u81ea\u6587\u7ae0\uff1a\u300a\u4e2d\u56fd\u9769\u547d\u548c\u6b27\u6d32\u9769\u547d\u300b\u3002 \u4f5c\u8005\uff1a\u5361\u5c14\u00b7\u9a6c\u514b\u601d\u30021853\u5e745\u670820\u65e5\uff0c\u4f26\u6566\u53d1\u8868\u3002</p>"},{"location":"PA/","title":"table of contents","text":"<ul> <li>PA</li> <li>riscv</li> </ul>"},{"location":"PA/PA/","title":"PA","text":"<p>\u6574\u4e2a\u5b9e\u9a8c\u9010\u6b65\u5f15\u5bfc\u5b8c\u6210\u4e00\u4e2a\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u6784\u5efa,\u5305\u62ec\u5e95\u5c42\u7684 NEMU \u6a21\u62df\u5668,\u8fd0\u884c\u65f6\u73af\u5883 AbstractMachine\uff08AM\uff09,\u5728\u5176\u4e0a\u7684\u7b80\u6613\u64cd\u4f5c\u7cfb\u7edf NanOS-lite,\u4ee5\u53ca\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u5e93 Navy-apps.</p> <p>\u4e00\u5171\u5206\u4e3a 5 \u4e2a\u90e8\u5206,PA0 \u914d\u7f6e\u73af\u5883,PA1 \u5b8c\u5584 NEMU \u7684\u8c03\u8bd5\u5668\u529f\u80fd,PA2 \u6a21\u62df NEMU \u6307\u4ee4\u8fd0\u884c\u4ee5\u53ca\u8865\u5145 AM,PA3 \u5b8c\u5584 NEMU \u7684\u4e2d\u65ad / \u5f02\u5e38\u5904\u7406\u3001\u5b9e\u73b0\u64cd\u4f5c\u7cfb\u7edf\u7684\u7cfb\u7edf\u8c03\u7528\u4ee5\u53ca\u7b80\u6613\u6587\u4ef6\u7cfb\u7edf\u529f\u80fd,PA4 \u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u5b9e\u73b0\u591a\u9053\u7a0b\u5e8f\u7684\u8fd0\u884c\u3001\u865a\u62df\u5185\u5b58\u7ba1\u7406\u4ee5\u53ca\u5916\u90e8\u4e2d\u65ad\u5904\u7406.</p> <p>\u7ec6\u5206\u6bcf\u4e2a\u5b9e\u9a8c\u7684\u5185\u5bb9\u4ee5\u53ca\u6d89\u53ca\u5230\u7684\u6e90\u7801\u90e8\u5206,\u6211\u6574\u7406\u4e86\u5982\u4e0b\u4e00\u4e2a\u8868\u683c\u4f9b\u53c2\u8003\uff1a</p> <p>PS\uff1a\u5176\u4e2d AM \u7531\u4e94\u4e2a\u90e8\u5206\u7ec4\u6210,TRM\uff08\u56fe\u7075\u673a\u6a21\u62df\uff09\u7b80\u5355\u800c\u4e14\u5df2\u7ecf\u5b9e\u73b0\u597d\u4e86,IOE \u4e3a\u8f93\u5165\u8f93\u51fa\u6269\u5c55,CTE \u4e3a\u4e0a\u4e0b\u6587\u7ba1\u7406\u6269\u5c55,VME \u4e3a\u865a\u62df\u5185\u5b58\u7ba1\u7406\u6269\u5c55,\u8fd8\u6709\u4e00\u4e2a MPE\uff08\u591a\u5904\u7406\u5668\u6269\u5c55\uff09\u5728 PA \u4e2d\u4e0d\u4f7f\u7528.klib \u4e3a\u7b80\u5355\u7684\u8fd0\u884c\u65f6\u5e93,\u63d0\u4f9b\u7ed9 AM \u548c\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528.</p> <p>\u603b\u800c\u8a00\u4e4b\u6709\u4e86\u8ba1\u7b97\u673a\u7cfb\u7edf\u8bfe\u4ee5\u53ca RISCV \u624b\u518c\u9605\u8bfb\u7684\u57fa\u7840,\u5927\u90e8\u5206\u5b9e\u9a8c\u8fd8\u662f\u6bd4\u8f83\u8f7b\u677e\u7684,\u6ca1\u6709\u4ec0\u4e48\u96be\u4ee5\u7406\u89e3\u7684\u5730\u65b9.\u8f83\u4e3a\u75db\u82e6\u7684\u5c31\u662f debug \u65f6\u4e00\u4e9b\u5947\u602a\u7684\u95ee\u9898\u4ee5\u53ca\u6700\u540e PA4 \u4e2d\u4e4b\u524d\u6ca1\u6709\u63a5\u89e6\u8fc7\u7684\u865a\u5b58\u7ba1\u7406\u7684\u5185\u5bb9\u4e86.\u540e\u9762\u8bb0\u5f55\u4e00\u4e9b\u8fd8\u80fd\u56de\u5fc6\u8d77\u6765\u7684\u95ee\u9898\uff08\u5176\u5b9e\u662f\u505a\u7684\u8fc7\u7a0b\u4e2d\u61d2\u5f97\u8bb0\u5f55\uff09.</p>"},{"location":"PA/PA/#macro-magic","title":"macro magic","text":"<p>\u70ab\u9177\u7684\u8de8\u5e73\u53f0\u80fd\u529b\u8de8\u67b6\u6784\u80fd\u529b\u5374\u662f\u9760\u7740\u770b\u4e0a\u53bb\u7b28\u62d9\u5176\u5b9e\u70ab\u9177\u7684\u5b8f\u6280\u672f\u5b9e\u73b0\u7684,\u6240\u4ee5\u6211\u4eec\u4e0d\u59a8\u53eb\u4ed6\u9b54\u6cd5\u5b8f.\u8fd9\u91cc\u6709\u4e00\u4e9b\u5b8f\u6280\u672f\u7684\u4f8b\u5b50,\u53ef\u4ee5\u5e2e\u52a9\u4f60\u7406\u89e3\u5b8f\u7684\u5f3a\u5927\u4e4b\u5904. <pre><code>#define ARRLEN(arr) (int)(sizeof(arr) / sizeof(arr[0]))\n</code></pre></p> <p>See stackoverflow\u7684\u5e16\u5b50\u5173\u4e8emacro</p> <p>Compare the stringified macro (name) to the stringified (expanded) value of the macro: \u5c06\u5b57\u7b26\u4e32\u5316\u5b8f\uff08\u540d\u79f0\uff09\u4e0e\u5b8f\u7684\u5b57\u7b26\u4e32\u5316\uff08\u6269\u5c55\uff09\u503c\u8fdb\u884c\u6bd4\u8f83\uff1a <pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\n#define TRACE_STRINGIFY(item) \"\" #item\n#define TRACE(macro, message)                          \\\n    do {                                               \\\n        if (strcmp(\"\" #macro, TRACE_STRINGIFY(macro))) \\\n            std::cout &lt;&lt; message &lt;&lt; \"\\n\";              \\\n    } while (0)\n</code></pre> \u8fd9\u6bb5\u4ee3\u7801\u662fC++\u4e2d\u7684\u5b8f\u5b9a\u4e49,\u7528\u4e8e\u5728\u7f16\u8bd1\u65f6\u671f\u751f\u6210\u4ee3\u7801.\u8ba9\u6211\u4eec\u9010\u884c\u89e3\u6790\uff1a</p> <ol> <li> <p><code>#include &lt;iostream&gt;</code> \u548c <code>#include &lt;cstring&gt;</code> \u662f\u5305\u542b\u6807\u51c6\u5e93\u7684\u5934\u6587\u4ef6,\u5206\u522b\u63d0\u4f9b\u4e86\u8f93\u5165/\u8f93\u51fa\u529f\u80fd\u548c\u5b57\u7b26\u4e32\u5904\u7406\u529f\u80fd.</p> </li> <li> <p><code>#define TRACE_STRINGIFY(item) \"\" #item</code> \u662f\u4e00\u4e2a\u5b8f\u5b9a\u4e49,\u7528\u4e8e\u5c06\u8f93\u5165\u7684\u53c2\u6570\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32.<code>#</code>\u64cd\u4f5c\u7b26\u5728\u5b8f\u5b9a\u4e49\u4e2d\u88ab\u79f0\u4e3a\"\u5b57\u7b26\u4e32\u5316\"\u64cd\u4f5c\u7b26,\u5b83\u4f1a\u5c06\u540e\u9762\u7684\u53c2\u6570\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32.</p> </li> </ol> <p>\u90a3\u4e48\u4e3a\u4ec0\u4e48#item\u524d\u9762\u8981\u52a0\u5f15\u53f7\u5462\u201c\u201d\uff1f</p> <p>\u5728C\u8bed\u8a00\u7684\u5b8f\u5b9a\u4e49\u4e2d,<code>#</code>\u64cd\u4f5c\u7b26\u88ab\u79f0\u4e3a\"\u5b57\u7b26\u4e32\u5316\"\u64cd\u4f5c\u7b26,\u5b83\u4f1a\u5c06\u540e\u9762\u7684\u5b8f\u53c2\u6570\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32.\u4f46\u662f,\u5982\u679c\u76f4\u63a5\u4f7f\u7528<code>#item</code>,\u5e76\u4e14<code>item</code>\u662f\u4e00\u4e2a\u5b8f,\u90a3\u4e48\u9884\u5904\u7406\u5668\u4f1a\u5148\u5c06<code>item</code>\u8f6c\u6362\u4e3a\u5b83\u6240\u4ee3\u8868\u7684\u503c,\u7136\u540e\u518d\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32.</p> <p>\u4f8b\u5982,\u5047\u8bbe\u6211\u4eec\u6709\u4ee5\u4e0b\u7684\u5b8f\u5b9a\u4e49\uff1a</p> <pre><code>#define VALUE 10\n#define TO_STRING(item) #item\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u4f7f\u7528<code>TO_STRING(VALUE)</code>,\u9884\u5904\u7406\u5668\u4f1a\u5148\u5c06<code>VALUE</code>\u66ff\u6362\u4e3a<code>10</code>,\u7136\u540e\u5c06<code>10</code>\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32,\u5f97\u5230<code>\"10\"</code>.</p> <p>\u4f46\u662f,\u5982\u679c\u6211\u4eec\u60f3\u5f97\u5230\u5b57\u7b26\u4e32<code>\"VALUE\"</code>\u800c\u4e0d\u662f<code>\"10\"</code>,\u6211\u4eec\u5c31\u9700\u8981\u963b\u6b62\u9884\u5904\u7406\u5668\u5bf9<code>VALUE</code>\u7684\u5b8f\u6269\u5c55.\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u5728<code>#item</code>\u524d\u9762\u52a0\u4e0a<code>\"\"</code>\u7684\u539f\u56e0.<code>\"\" #item</code>\u4f1a\u5148\u5c06<code>item</code>\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32,\u7136\u540e\u4e0e\u524d\u9762\u7684\u7a7a\u5b57\u7b26\u4e32\u8fde\u63a5,\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u662f\u6211\u4eec\u60f3\u8981\u7684<code>\"VALUE\"</code>.</p> <p>\u6240\u4ee5,<code>#define TRACE_STRINGIFY(item) \"\" #item</code>\u8fd9\u4e2a\u5b8f\u5b9a\u4e49\u7684\u4f5c\u7528\u662f\u5c06\u8f93\u5165\u7684\u53c2\u6570\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32,\u540c\u65f6\u963b\u6b62\u9884\u5904\u7406\u5668\u5bf9\u53c2\u6570\u8fdb\u884c\u5b8f\u6269\u5c55.</p> <ol> <li> <p><code>#define TRACE(macro, message)</code> \u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>TRACE</code>\u7684\u5b8f,\u5b83\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a<code>macro</code>\u548c<code>message</code>.</p> </li> <li> <p><code>do { ... } while (0)</code> \u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u5b8f\u6280\u5de7,\u7528\u4e8e\u786e\u4fdd\u5b8f\u7684\u4f7f\u7528\u65b9\u5f0f\u548c\u51fd\u6570\u8c03\u7528\u4e00\u6837,\u5373\u4f7f\u5728\u9700\u8981\u4f7f\u7528\u5206\u53f7\u7ed3\u675f\u7684\u5730\u65b9\u4e5f\u4e0d\u4f1a\u51fa\u9519.<code>do { ... } while (0)</code> \u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u5b8f\u5b9a\u4e49\u6280\u5de7,\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3\u5b8f\u6269\u5c55\u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898.</p> </li> </ol> <p>\u5728C/C++\u4e2d,\u5b8f\u662f\u5728\u9884\u5904\u7406\u9636\u6bb5\u8fdb\u884c\u6587\u672c\u66ff\u6362\u7684,\u5b83\u5e76\u4e0d\u50cf\u51fd\u6570\u90a3\u6837\u6709\u81ea\u5df1\u7684\u4f5c\u7528\u57df.\u5982\u679c\u4e00\u4e2a\u5b8f\u5b9a\u4e49\u5305\u542b\u591a\u6761\u8bed\u53e5,\u800c\u5728\u4f7f\u7528\u8fd9\u4e2a\u5b8f\u7684\u5730\u65b9\u6ca1\u6709\u6b63\u786e\u5730\u7528\u62ec\u53f7\u5305\u56f4\u5b83,\u5c31\u53ef\u80fd\u5bfc\u81f4\u9884\u671f\u4e4b\u5916\u7684\u884c\u4e3a.</p> <p>\u4f8b\u5982,\u8003\u8651\u4ee5\u4e0b\u5b8f\u5b9a\u4e49\u548c\u4f7f\u7528\uff1a</p> <pre><code>#define MACRO(x) foo(x); bar(x)\n\nif (condition)\n    MACRO(y);\nelse\n    baz();\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u88ab\u9884\u5904\u7406\u5668\u6269\u5c55\u4e3a\uff1a</p> <pre><code>if (condition)\n    foo(y); bar(y);\nelse\n    baz();\n</code></pre> <p>\u8fd9\u5e76\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u7ed3\u679c,\u56e0\u4e3a<code>bar(y);</code>\u603b\u662f\u4f1a\u88ab\u6267\u884c,\u800c\u4e0d\u7ba1<code>condition</code>\u7684\u503c\u662f\u4ec0\u4e48.</p> <p>\u5982\u679c\u6211\u4eec\u4f7f\u7528<code>do { ... } while (0)</code>,\u5c31\u53ef\u4ee5\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\uff1a</p> <pre><code>#define MACRO(x) do { foo(x); bar(x); } while (0)\n\nif (condition)\n    MACRO(y);\nelse\n    baz();\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u88ab\u9884\u5904\u7406\u5668\u6269\u5c55\u4e3a\uff1a</p> <pre><code>if (condition)\n    do { foo(y); bar(y); } while (0);\nelse\n    baz();\n</code></pre> <p>\u8fd9\u6837\u5c31\u53ef\u4ee5\u5f97\u5230\u6211\u4eec\u671f\u671b\u7684\u884c\u4e3a\uff1a\u53ea\u6709\u5f53<code>condition</code>\u4e3a\u771f\u65f6,<code>foo(y)</code>\u548c<code>bar(y)</code>\u624d\u4f1a\u88ab\u6267\u884c.</p> <ol> <li> <p><code>if (strcmp(\"\" #macro, TRACE_STRINGIFY(macro)))</code> \u8fd9\u884c\u4ee3\u7801\u6bd4\u8f83\u590d\u6742.\u9996\u5148,<code>\"\" #macro</code>\u5c06<code>macro</code>\u53c2\u6570\u5b57\u7b26\u4e32\u5316.\u7136\u540e,<code>TRACE_STRINGIFY(macro)</code>\u4e5f\u5c06<code>macro</code>\u53c2\u6570\u5b57\u7b26\u4e32\u5316.<code>strcmp</code>\u51fd\u6570\u6bd4\u8f83\u8fd9\u4e24\u4e2a\u5b57\u7b26\u4e32,\u5982\u679c\u5b83\u4eec\u76f8\u7b49,\u8fd4\u56de0,\u5426\u5219\u8fd4\u56de\u975e0\u503c.\u56e0\u6b64,\u8fd9\u4e2a<code>if</code>\u8bed\u53e5\u7684\u6761\u4ef6\u662f\"\u5982\u679c<code>macro</code>\u53c2\u6570\u5b57\u7b26\u4e32\u5316\u540e\u7684\u7ed3\u679c\u548c\u81ea\u8eab\u4e0d\u76f8\u7b49\".</p> </li> <li> <p><code>std::cout &lt;&lt; message &lt;&lt; \"\\n\";</code> \u5982\u679c\u4e0a\u8ff0<code>if</code>\u6761\u4ef6\u4e3a\u771f,\u90a3\u4e48\u5c31\u8f93\u51fa<code>message</code>\u53c2\u6570,\u5e76\u5728\u5176\u540e\u6dfb\u52a0\u4e00\u4e2a\u6362\u884c\u7b26.</p> </li> </ol> <p>\u8fd9\u4e2a\u5b8f\u7684\u76ee\u7684\u662f\u68c0\u67e5<code>macro</code>\u53c2\u6570\u662f\u5426\u5df2\u7ecf\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u5b8f.\u5982\u679c<code>macro</code>\u5df2\u7ecf\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u5b8f,\u90a3\u4e48<code>TRACE_STRINGIFY(macro)</code>\u5c06\u8fd4\u56de\u8be5\u5b8f\u7684\u503c,\u800c\u4e0d\u662f<code>macro</code>\u672c\u8eab,\u56e0\u6b64<code>strcmp</code>\u7684\u7ed3\u679c\u5c06\u4e0d\u4e3a0,\u4ece\u800c\u89e6\u53d1\u6d88\u606f\u7684\u8f93\u51fa. The \"\" # macro expands to the macro name as a string, whereas TRACE_STRINGIFY(macro) first expands the macro, then stringifies the result. If the two differ, macro has to be a preprocessor macro. \"\" # macro \u5c06\u5b8f\u540d\u6269\u5c55\u4e3a\u5b57\u7b26\u4e32,\u800c TRACE_STRINGIFY(macro) \u9996\u5148\u6269\u5c55\u5b8f,\u7136\u540e\u5c06\u7ed3\u679c\u5b57\u7b26\u4e32\u5316.\u5982\u679c\u4e24\u8005\u4e0d\u540c,\u5219 macro \u5fc5\u987b\u662f\u9884\u5904\u7406\u5668\u5b8f.</p> <p>This approach does fail for macros that are defined to themselves, i.e. #define FOO FOO. Such macros are not detected as preprocessor macros. \u8fd9\u79cd\u65b9\u6cd5\u5bf9\u4e8e\u5b9a\u4e49\u4e3a\u81ea\u8eab\u7684\u5b8f\uff08\u5373 #define FOO FOO \uff09\u786e\u5b9e\u5931\u8d25.\u8fd9\u6837\u7684\u5b8f\u4e0d\u4f1a\u88ab\u68c0\u6d4b\u4e3a\u9884\u5904\u7406\u5668\u5b8f.</p> <p>Most compilers should be able to completely optimize away the comparison of two string literals. GNU GCC (g++) 4.8.2 definitely does even with -O0 (as does gcc for C -- the same approach obviously works in C, too). \u5927\u591a\u6570\u7f16\u8bd1\u5668\u5e94\u8be5\u80fd\u591f\u5b8c\u5168\u4f18\u5316\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u6bd4\u8f83.GNU GCC\uff08g++\uff094.8.2\u751a\u81f3\u5bf9 -O0 \u4e5f\u662f\u5982\u6b64\uff08gcc\u5bf9C\u4e5f\u662f\u5982\u6b64--\u540c\u6837\u7684\u65b9\u6cd5\u663e\u7136\u4e5f\u9002\u7528\u4e8eC\uff09.</p> <p>This approach does work for function-like macros, but only if you retain the parentheses (and proper number of commas, if the macro takes multiple parameters) and it is not defined to itself (e.g. #define BAR(x) BAR(x)). \u8fd9\u79cd\u65b9\u6cd5\u786e\u5b9e\u9002\u7528\u4e8e\u7c7b\u4f3c\u51fd\u6570\u7684\u5b8f,\u4f46\u524d\u63d0\u662f\u60a8\u4fdd\u7559\u62ec\u53f7\uff08\u4ee5\u53ca\u9002\u5f53\u6570\u91cf\u7684\u9017\u53f7,\u5982\u679c\u5b8f\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\uff09\u5e76\u4e14\u5b83\u6ca1\u6709\u5b9a\u4e49\u4e3a\u81ea\u8eab\uff08\u4f8b\u5982 #define BAR(x) BAR(x) \uff09.</p> <p>For example: \u4e3e\u4f8b\u6765\u8bf4\uff1a</p> <p><pre><code>#define TEST1 TEST1\n\n#define TEST3\n#define TEST4 0\n#define TEST5 1\n#define TEST6 \"string\"\n#define TEST7 \"\"\n#define TEST8 NULL\n#define TEST9 TEST3\n#define TEST10 TEST2\n#define TEST11(x)\n\n#define TEST13(x,y,z) (x, y, z)\n\n\nint main(void)\n{\n    TRACE(TEST1, \"TEST1 is defined\");\n    TRACE(TEST2, \"TEST2 is defined\");\n    TRACE(TEST3, \"TEST3 is defined\");\n    TRACE(TEST4, \"TEST4 is defined\");\n    TRACE(TEST5, \"TEST5 is defined\");\n    TRACE(TEST6, \"TEST6 is defined\");\n    TRACE(TEST7, \"TEST7 is defined\");\n    TRACE(TEST8, \"TEST8 is defined\");\n    TRACE(TEST9, \"TEST9 is defined\");\n    TRACE(TEST10, \"TEST10 is defined\");\n    TRACE(TEST11, \"TEST11 is defined\");\n    TRACE(TEST12, \"TEST12 is defined\");\n    TRACE(TEST13, \"TEST13 is defined\");\n    TRACE(TEST14, \"TEST14 is defined\");\n\n    TRACE(TEST1(), \"TEST1() is defined\");\n    TRACE(TEST2(), \"TEST2() is defined\");\n    TRACE(TEST3(), \"TEST3() is defined\");\n    TRACE(TEST4(), \"TEST4() is defined\");\n    TRACE(TEST5(), \"TEST5() is defined\");\n    TRACE(TEST6(), \"TEST6() is defined\");\n    TRACE(TEST7(), \"TEST7() is defined\");\n    TRACE(TEST8(), \"TEST8() is defined\");\n    TRACE(TEST9(), \"TEST9() is defined\");\n    TRACE(TEST10(), \"TEST10() is defined\");\n    TRACE(TEST11(), \"TEST11() is defined\");\n    TRACE(TEST12(), \"TEST12() is defined\");\n    TRACE(TEST13(,,), \"TEST13(,,) is defined\");\n    TRACE(TEST14(,,), \"TEST14(,,) is defined\");\n\n    return 0;\n}\nwhich outputs \u5176\u8f93\u51fa\n\nTEST3 is defined\nTEST4 is defined\nTEST5 is defined\nTEST6 is defined\nTEST7 is defined\nTEST8 is defined\nTEST9 is defined\nTEST10 is defined\nTEST3() is defined\nTEST4() is defined\nTEST5() is defined\nTEST6() is defined\nTEST7() is defined\nTEST8() is defined\nTEST9() is defined\nTEST10() is defined\nTEST11() is defined\nTEST13(,,) is defined\n</code></pre> In other words, the TEST1 symbol is not recognized as defined (because it is defined to itself), nor are TEST11 or TEST13 without parentheses. These are the limitations of this approach. \u6362\u53e5\u8bdd\u8bf4, TEST1 \u7b26\u53f7\u4e0d\u4f1a\u88ab\u8bc6\u522b\u4e3a\u5df2\u5b9a\u4e49\uff08\u56e0\u4e3a\u5b83\u662f\u5bf9\u81ea\u8eab\u5b9a\u4e49\u7684\uff09,\u6ca1\u6709\u62ec\u53f7\u7684 TEST11 \u6216 TEST13 \u4e5f\u4e0d\u4f1a\u88ab\u8bc6\u522b\u4e3a\u5df2\u5b9a\u4e49.\u8fd9\u4e9b\u662f\u8fd9\u79cd\u65b9\u6cd5\u7684\u5c40\u9650\u6027.</p> <p>Using the parenthesized form works for all parameterless macros (except TEST1, ie. those defined to themselves), and all single-parameter macros. If a macro expects multiple parameters, you need to use the correct number of commas, as otherwise (say, if you tried TRACE(TEST13(), \"...\")) you get a compile-time error: \"macro TEST13 requires 3 arguments, only 1 given\" or similar. \u4f7f\u7528\u62ec\u53f7\u5f62\u5f0f\u9002\u7528\u4e8e\u6240\u6709\u65e0\u53c2\u6570\u5b8f\uff08\u9664\u4e86 TEST1 ,\u5373.\u5b83\u4eec\u662f\u81ea\u5df1\u5b9a\u4e49\u7684\uff09,\u4ee5\u53ca\u6240\u6709\u5355\u53c2\u6570\u5b8f.\u5982\u679c\u4e00\u4e2a\u5b8f\u9700\u8981\u591a\u4e2a\u53c2\u6570,\u4f60\u9700\u8981\u4f7f\u7528\u6b63\u786e\u6570\u91cf\u7684\u9017\u53f7,\u5426\u5219\uff08\u6bd4\u5982\u8bf4,\u5982\u679c\u4f60\u5c1d\u8bd5 TRACE(TEST13(), \"...\") \uff09\u4f60\u4f1a\u5f97\u5230\u4e00\u4e2a\u7f16\u8bd1\u65f6\u9519\u8bef\uff1a\u201c\u5b8f TEST13 \u9700\u89813\u4e2a\u53c2\u6570,\u53ea\u67091\u4e2a\u7ed9\u5b9a\u201d\u6216\u7c7b\u4f3c\u7684.</p>"},{"location":"PA/PA/#printf","title":"printf\u7684\u542b\u91d1\u91cf","text":"<p><code>printf</code>\u51fd\u6570\u662fC\u8bed\u8a00\u4e2d\u7528\u4e8e\u683c\u5f0f\u5316\u8f93\u51fa\u7684\u51fd\u6570,\u5b83\u6709\u5f88\u591a\u7279\u6b8a\u7684\u7528\u6cd5.\u4ee5\u4e0b\u662f\u4e00\u4e9b\u4f8b\u5b50\uff1a</p>"},{"location":"PA/PA/#ysyx","title":"ysyx\u7684\u4f8b\u5b50","text":"<p><pre><code>void isa_reg_display() {\n  int reg_num = ARRLEN(regs);\n  for (int i = 0; i &lt; reg_num; i++) {\n    printf(\"%-4s: 0x%08x\\n\", regs[i], cpu.gpr[i]);\n  }\n}\n</code></pre> \u8fd9\u6bb5\u4ee3\u7801\u662f\u7528\u4e8e\u5728C\u8bed\u8a00\u4e2d\u6253\u5370CPU\u5bc4\u5b58\u5668\u7684\u503c.\u5b83\u4f7f\u7528\u4e86<code>printf</code>\u51fd\u6570,\u8fd9\u662f\u4e00\u4e2a\u6807\u51c6\u7684C\u5e93\u51fd\u6570,\u7528\u4e8e\u683c\u5f0f\u5316\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u8bbe\u5907,\u901a\u5e38\u662f\u5c4f\u5e55.</p> <p><code>printf</code>\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u683c\u5f0f\u5b57\u7b26\u4e32,\u5b83\u5b9a\u4e49\u4e86\u8f93\u51fa\u7684\u683c\u5f0f.\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d,\u683c\u5f0f\u5b57\u7b26\u4e32\u662f<code>\"%-4s: 0x%08x\\n\"</code>.</p> <p><code>%-4s</code>\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\u4e32,<code>-</code>\u8868\u793a\u5de6\u5bf9\u9f50,<code>4</code>\u8868\u793a\u8fd9\u4e2a\u5b57\u7b26\u4e32\u7684\u6700\u5c0f\u5bbd\u5ea6\u662f4.\u5982\u679c<code>regs[i]</code>\u7684\u957f\u5ea6\u5c0f\u4e8e4,\u90a3\u4e48\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\u5c06\u88ab\u7a7a\u683c\u586b\u5145\u52304\u4e2a\u5b57\u7b26.</p> <p><code>: 0x%08x</code>\u8868\u793a\u4e00\u4e2a\u4ee5\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u8f93\u51fa\u7684\u6574\u6570.<code>0x</code>\u662f\u4e00\u4e2a\u524d\u7f00,\u8868\u793a\u8fd9\u4e2a\u6570\u662f\u5341\u516d\u8fdb\u5236\u7684.<code>%08x</code>\u8868\u793a\u8fd9\u4e2a\u6574\u6570\u81f3\u5c11\u67098\u4f4d,\u5982\u679c\u4e0d\u8db38\u4f4d,\u90a3\u4e48\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\u5c06\u88ab0\u586b\u5145\u52308\u4f4d.</p> <p><code>\\n</code>\u662f\u4e00\u4e2a\u6362\u884c\u7b26,\u8868\u793a\u5728\u8f93\u51fa\u8fd9\u4e00\u884c\u540e\u6362\u884c.</p> <p><code>printf</code>\u51fd\u6570\u7684\u540e\u7eed\u53c2\u6570\u662f\u8981\u63d2\u5165\u5230\u683c\u5f0f\u5b57\u7b26\u4e32\u4e2d\u7684\u503c.\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d,[<code>regs[i]</code>]\u662f\u8981\u63d2\u5165\u5230<code>%-4s</code>\u7684\u4f4d\u7f6e\u7684\u5b57\u7b26\u4e32,<code>cpu.gpr[i]</code>\u662f\u8981\u63d2\u5165\u5230<code>%08x</code>\u7684\u4f4d\u7f6e\u7684\u6574\u6570.</p> <p>\u603b\u7684\u6765\u8bf4,\u8fd9\u6bb5\u4ee3\u7801\u5c06\u4f1a\u8f93\u51fa\u7c7b\u4f3c\u4e8e<code>eax : 0x0000001f</code>\u8fd9\u6837\u7684\u5b57\u7b26\u4e32,\u5176\u4e2d<code>eax</code>\u662f\u5bc4\u5b58\u5668\u7684\u540d\u5b57,<code>0x0000001f</code>\u662f\u5bc4\u5b58\u5668\u7684\u503c.</p> <ol> <li>\u5b57\u6bb5\u5bbd\u5ea6\u548c\u7cbe\u5ea6\uff1a\u4f60\u53ef\u4ee5\u5728\u683c\u5f0f\u5b57\u7b26\u4e32\u4e2d\u6307\u5b9a\u5b57\u6bb5\u7684\u5bbd\u5ea6\u548c\u7cbe\u5ea6.\u4f8b\u5982,<code>%5d</code>\u8868\u793a\u4e00\u4e2a\u81f3\u5c11\u67095\u4e2a\u5b57\u7b26\u5bbd\u7684\u6574\u6570,<code>%.2f</code>\u8868\u793a\u4e00\u4e2a\u5c0f\u6570\u70b9\u540e\u67092\u4f4d\u7684\u6d6e\u70b9\u6570.</li> </ol> <pre><code>printf(\"%5d\\n\", 123);  // \u8f93\u51fa\uff1a\"  123\"\nprintf(\"%.2f\\n\", 3.14159);  // \u8f93\u51fa\uff1a\"3.14\"\n</code></pre> <ol> <li>\u5de6\u5bf9\u9f50\u548c\u53f3\u5bf9\u9f50\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b,<code>printf</code>\u51fd\u6570\u4f1a\u53f3\u5bf9\u9f50\u8f93\u51fa.\u4f60\u53ef\u4ee5\u4f7f\u7528<code>-</code>\u6807\u5fd7\u6765\u6539\u53d8\u8fd9\u4e2a\u884c\u4e3a.\u4f8b\u5982,<code>%-5d</code>\u8868\u793a\u4e00\u4e2a\u5de6\u5bf9\u9f50\u7684\u81f3\u5c11\u67095\u4e2a\u5b57\u7b26\u5bbd\u7684\u6574\u6570.</li> </ol> <pre><code>printf(\"%-5d\\n\", 123);  // \u8f93\u51fa\uff1a\"123  \"\n</code></pre> <ol> <li>\u586b\u5145\u5b57\u7b26\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b,<code>printf</code>\u51fd\u6570\u4f1a\u4f7f\u7528\u7a7a\u683c\u6765\u586b\u5145\u5b57\u6bb5.\u4f60\u53ef\u4ee5\u4f7f\u7528<code>0</code>\u6807\u5fd7\u6765\u6539\u53d8\u8fd9\u4e2a\u884c\u4e3a.\u4f8b\u5982,<code>%05d</code>\u8868\u793a\u4e00\u4e2a\u75280\u586b\u5145\u7684\u81f3\u5c11\u67095\u4e2a\u5b57\u7b26\u5bbd\u7684\u6574\u6570.</li> </ol> <pre><code>printf(\"%05d\\n\", 123);  // \u8f93\u51fa\uff1a\"00123\"\n</code></pre> <ol> <li>\u5341\u516d\u8fdb\u5236\u548c\u516b\u8fdb\u5236\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528<code>%x</code>\u548c<code>%o</code>\u6765\u8f93\u51fa\u5341\u516d\u8fdb\u5236\u548c\u516b\u8fdb\u5236\u7684\u6574\u6570.\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>#</code>\u6807\u5fd7\u6765\u6dfb\u52a0\u524d\u7f00.</li> </ol> <pre><code>printf(\"%x\\n\", 255);  // \u8f93\u51fa\uff1a\"ff\"\nprintf(\"%#x\\n\", 255);  // \u8f93\u51fa\uff1a\"0xff\"\nprintf(\"%o\\n\", 255);  // \u8f93\u51fa\uff1a\"377\"\nprintf(\"%#o\\n\", 255);  // \u8f93\u51fa\uff1a\"0377\"\n</code></pre> <ol> <li>\u6307\u9488\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528<code>%p</code>\u6765\u8f93\u51fa\u6307\u9488\u7684\u503c.</li> </ol> <pre><code>int x = 0;\nprintf(\"%p\\n\", &amp;x);  // \u8f93\u51fa\u7c7b\u4f3c\u4e8e\uff1a\"0x7fffc72c4b3c\"\n</code></pre> <ol> <li>\u5b57\u7b26\u4e32\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528<code>%s</code>\u6765\u8f93\u51fa\u5b57\u7b26\u4e32.</li> </ol> <p>```chttps://alongcyber.github.io/notetest/PA/PA/ \u8f93\u51fa\uff1a\"Hello, world!\" <pre><code>\u4ee5\u4e0a\u53ea\u662f`printf`\u51fd\u6570\u7684\u4e00\u90e8\u5206\u7279\u6b8a\u7528\u6cd5.`printf`\u51fd\u6570\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u7684\u7279\u6027\u548c\u9009\u9879,\u4f60\u53ef\u4ee5\u67e5\u9605C\u8bed\u8a00\u7684\u6587\u6863\u6765\u4e86\u89e3\u66f4\u591a.\n\n### \u4f18\u96c5\u7684\u9000\u51fa\n\n```c\nint is_exit_status_bad() {\n  int good = (nemu_state.state == NEMU_END &amp;&amp; nemu_state.halt_ret == 0) ||\n    (nemu_state.state == NEMU_QUIT);\n  return !good;\n}\n</code></pre> \u76f4\u63a5\u5728cmd_q\u4e2d\u4fee\u6539\u6210\u9000\u51fa\u524d\u628anemu_state.state\u6539\u6210NEMU_QUIT</p>"},{"location":"PA/PA/#_1","title":"\u4ee3\u7801\u4e2d\u503c\u5f97\u6ce8\u610f\u7684\u5730\u65b9","text":"<p>\u6700\u540e\u6211\u4eec\u804a\u804a\u4ee3\u7801\u4e2d\u4e00\u4e9b\u503c\u5f97\u6ce8\u610f\u7684\u5730\u65b9.</p> <ul> <li>\u4e09\u4e2a\u5bf9\u8c03\u8bd5\u6709\u7528\u7684\u5b8f(\u5728nemu/include/debug.h\u4e2d\u5b9a\u4e49)<ul> <li><code>Log()</code>\u662f<code>printf()</code>\u7684\u5347\u7ea7\u7248, \u4e13\u95e8\u7528\u6765\u8f93\u51fa\u8c03\u8bd5\u4fe1\u606f, \u540c\u65f6\u8fd8\u4f1a\u8f93\u51fa\u4f7f\u7528<code>Log()</code>\u6240\u5728\u7684\u6e90\u6587\u4ef6, \u884c\u53f7\u548c\u51fd\u6570. \u5f53\u8f93\u51fa\u7684\u8c03\u8bd5\u4fe1\u606f\u8fc7\u591a\u7684\u65f6\u5019, \u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5b9a\u4f4d\u5230\u4ee3\u7801\u4e2d\u7684\u76f8\u5173\u4f4d\u7f6e</li> <li><code>Assert()</code>\u662f<code>assert()</code>\u7684\u5347\u7ea7\u7248, \u5f53\u6d4b\u8bd5\u6761\u4ef6\u4e3a\u5047\u65f6, \u5728<code>assertion fail</code>\u4e4b\u524d\u53ef\u4ee5\u8f93\u51fa\u4e00\u4e9b\u4fe1\u606f</li> <li><code>panic()</code>\u7528\u4e8e\u8f93\u51fa\u4fe1\u606f\u5e76\u7ed3\u675f\u7a0b\u5e8f, \u76f8\u5f53\u4e8e\u65e0\u6761\u4ef6\u7684<code>assertion fail</code></li> </ul> </li> </ul> <p>\u4ee3\u7801\u4e2d\u5df2\u7ecf\u7ed9\u51fa\u4e86\u4f7f\u7528\u8fd9\u4e09\u4e2a\u5b8f\u7684\u4f8b\u5b50, \u5982\u679c\u4f60\u4e0d\u77e5\u9053\u5982\u4f55\u4f7f\u7528\u5b83\u4eec, RTFSC.</p> <ul> <li>\u5185\u5b58\u901a\u8fc7\u5728nemu/src/memory/paddr.c\u4e2d\u5b9a\u4e49\u7684\u5927\u6570\u7ec4pmem\u6765\u6a21\u62df. \u5728\u5ba2\u6237\u7a0b\u5e8f\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d, \u603b\u662f\u4f7f\u7528vaddr_read()\u548cvaddr_write() (\u5728nemu/src/memory/vaddr.c\u4e2d\u5b9a\u4e49)\u6765\u8bbf\u95ee\u6a21\u62df\u7684\u5185\u5b58. vaddr, paddr\u5206\u522b\u4ee3\u8868\u865a\u62df\u5730\u5740\u548c\u7269\u7406\u5730\u5740. \u8fd9\u4e9b\u6982\u5ff5\u5728\u5c06\u6765\u624d\u4f1a\u7528\u5230, \u76ee\u524d\u4e0d\u5fc5\u6df1\u7a76, \u4f46\u4ece\u73b0\u5728\u5f00\u59cb\u4fdd\u6301\u63a5\u53e3\u7684\u4e00\u81f4\u6027\u53ef\u4ee5\u5728\u5c06\u6765\u907f\u514d\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6.</li> </ul>"},{"location":"PA/PA/#_2","title":"\u5c31\u662f\u8fd9\u4e48\u7b80\u5355","text":"<p>\u4e8b\u5b9e\u4e0a, TRM(Technical Reference Model)\u7684\u5b9e\u73b0\u5df2\u7ecf\u90fd\u8574\u542b\u5728\u4e0a\u8ff0\u7684\u4ecb\u7ecd\u4e2d\u4e86.</p> <ul> <li>\u5b58\u50a8\u5668\u662f\u4e2a\u5728<code>nemu/src/memory/paddr.c</code>\u4e2d\u5b9a\u4e49\u7684\u5927\u6570\u7ec4</li> <li>PC\u548c\u901a\u7528\u5bc4\u5b58\u5668\u90fd\u5728<code>nemu/src/isa/$ISA/include/isa-def.h</code>\u4e2d\u7684\u7ed3\u6784\u4f53\u4e2d\u5b9a\u4e49</li> <li>\u52a0\u6cd5\u5668\u5728... \u55ef, \u8fd9\u90e8\u5206\u6846\u67b6\u4ee3\u7801\u6709\u70b9\u590d\u6742, \u4e0d\u8fc7\u5b83\u5e76\u4e0d\u5f71\u54cd\u6211\u4eec\u5bf9TRM\u7684\u7406\u89e3, \u6211\u4eec\u8fd8\u662f\u5728PA2\u91cc\u9762\u518d\u4ecb\u7ecd\u5b83\u5427</li> <li>TRM\u7684\u5de5\u4f5c\u65b9\u5f0f\u901a\u8fc7<code>cpu_exec()</code>\u548c<code>exec_once()</code>\u4f53\u73b0 \u5728NEMU\u4e2d, \u6211\u4eec\u53ea\u9700\u8981\u4e00\u4e9b\u5f88\u57fa\u7840\u7684C\u8bed\u8a00\u77e5\u8bc6\u5c31\u53ef\u4ee5\u7406\u89e3\u6700\u7b80\u5355\u7684\u8ba1\u7b97\u673a\u7684\u5de5\u4f5c\u65b9\u5f0f, \u771f\u5e94\u8be5\u611f\u8c22\u5148\u9a71\u554a.</li> </ul>"},{"location":"PA/PA/#_3","title":"\u89e3\u6790\u547d\u4ee4","text":"<p>\u4e3a\u4e86\u8ba9\u7b80\u6613\u8c03\u8bd5\u5668\u6613\u4e8e\u4f7f\u7528, NEMU\u901a\u8fc7readline\u5e93\u4e0e\u7528\u6237\u4ea4\u4e92, \u4f7f\u7528readline()\u51fd\u6570\u4ece\u952e\u76d8\u4e0a\u8bfb\u5165\u547d\u4ee4. \u4e0egets()\u76f8\u6bd4, readline()\u63d0\u4f9b\u4e86\"\u884c\u7f16\u8f91\"\u7684\u529f\u80fd, \u6700\u5e38\u7528\u7684\u529f\u80fd\u5c31\u662f\u901a\u8fc7\u4e0a, \u4e0b\u65b9\u5411\u952e\u7ffb\u9605\u5386\u53f2\u8bb0\u5f55. \u4e8b\u5b9e\u4e0a, shell\u7a0b\u5e8f\u5c31\u662f\u901a\u8fc7readline()\u8bfb\u5165\u547d\u4ee4\u7684. \u5173\u4e8ereadline()\u7684\u529f\u80fd\u548c\u8fd4\u56de\u503c\u7b49\u4fe1\u606f, \u8bf7\u67e5\u9605 <pre><code>man strtok\n</code></pre> \u53e6\u5916, cmd_help()\u51fd\u6570\u4e2d\u4e5f\u7ed9\u51fa\u4e86\u4f7f\u7528strtok()\u7684\u4f8b\u5b50. \u4e8b\u5b9e\u4e0a, \u5b57\u7b26\u4e32\u5904\u7406\u51fd\u6570\u6709\u5f88\u591a, \u952e\u5165\u4ee5\u4e0b\u5185\u5bb9:</p> <p><pre><code>man 3 str&lt;TAB&gt;&lt;TAB&gt;\n</code></pre> \u5176\u4e2d\u4ee3\u8868\u952e\u76d8\u4e0a\u7684TAB\u952e. \u4f60\u4f1a\u770b\u5230\u5f88\u591a\u4ee5str\u5f00\u5934\u7684\u51fd\u6570, \u5176\u4e2d\u6709\u4f60\u5e94\u8be5\u5f88\u719f\u6089\u7684strlen(), strcpy()\u7b49\u51fd\u6570. \u4f60\u6700\u597d\u90fd\u5148\u770b\u770b\u8fd9\u4e9b\u5b57\u7b26\u4e32\u5904\u7406\u51fd\u6570\u7684manual page, \u4e86\u89e3\u4e00\u4e0b\u5b83\u4eec\u7684\u529f\u80fd, \u56e0\u4e3a\u4f60\u5f88\u53ef\u80fd\u4f1a\u7528\u5230\u5176\u4e2d\u7684\u67d0\u4e9b\u51fd\u6570\u6765\u5e2e\u52a9\u4f60\u89e3\u6790\u547d\u4ee4. \u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u7f16\u5199\u4f60\u81ea\u5df1\u7684\u5b57\u7b26\u4e32\u5904\u7406\u51fd\u6570\u6765\u89e3\u6790\u547d\u4ee4. <p>\u53e6\u5916\u4e00\u4e2a\u503c\u5f97\u63a8\u8350\u7684\u5b57\u7b26\u4e32\u5904\u7406\u51fd\u6570\u662fsscanf(), \u5b83\u7684\u529f\u80fd\u548cscanf()\u5f88\u7c7b\u4f3c, \u4e0d\u540c\u7684\u662fsscanf()\u53ef\u4ee5\u4ece\u5b57\u7b26\u4e32\u4e2d\u8bfb\u5165\u683c\u5f0f\u5316\u7684\u5185\u5bb9, \u4f7f\u7528\u5b83\u6709\u65f6\u5019\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5b9e\u73b0\u5b57\u7b26\u4e32\u7684\u89e3\u6790. \u5982\u679c\u4f60\u4ece\u6765\u6ca1\u6709\u4f7f\u7528\u8fc7\u5b83\u4eec, RTFM, \u6216\u8005STFW.</p> <p>GNU\u7684<code>readline</code>\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u4fbf\u7684\u65b9\u5f0f\u6765\u5904\u7406\u7528\u6237\u7684\u8f93\u5165,\u5305\u62ec\u884c\u7f16\u8f91,\u5386\u53f2\u8bb0\u5f55\u548c\u81ea\u52a8\u8865\u5168.\u4ee5\u4e0b\u662f\u4e00\u4e9b\u57fa\u672c\u7684\u4f7f\u7528\u65b9\u6cd5\uff1a</p> <ol> <li> <p>\u521d\u59cb\u5316readline\uff1a\u5728\u4f7f\u7528readline\u4e4b\u524d,\u4f60\u9700\u8981\u5148\u521d\u59cb\u5316\u5b83.\u8fd9\u901a\u5e38\u5728\u7a0b\u5e8f\u5f00\u59cb\u65f6\u5b8c\u6210\uff1a</p> <pre><code>#include &lt;readline/readline.h&gt;\n#include &lt;readline/history.h&gt;\n</code></pre> </li> <li> <p>\u8bfb\u53d6\u8f93\u5165\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528<code>readline</code>\u51fd\u6570\u6765\u8bfb\u53d6\u7528\u6237\u7684\u8f93\u5165.\u8fd9\u4e2a\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u63d0\u793a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570,\u5e76\u8fd4\u56de\u7528\u6237\u8f93\u5165\u7684\u5b57\u7b26\u4e32.\u4f8b\u5982\uff1a</p> <pre><code>char* input = readline(\"Enter your command: \");\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528readline\u7684\u884c\u7f16\u8f91\u529f\u80fd\u6765\u4fee\u6539\u4ed6\u4eec\u7684\u8f93\u5165.\u5f53\u4ed6\u4eec\u6309\u4e0bEnter\u952e\u65f6,<code>readline</code>\u51fd\u6570\u5c06\u8fd4\u56de\u4ed6\u4eec\u8f93\u5165\u7684\u5b57\u7b26\u4e32.</p> </li> <li> <p>\u5904\u7406\u5386\u53f2\u8bb0\u5f55\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528<code>add_history</code>\u51fd\u6570\u6765\u6dfb\u52a0\u4e00\u4e2a\u547d\u4ee4\u5230\u5386\u53f2\u8bb0\u5f55\u4e2d\uff1a</p> <pre><code>add_history(input);\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4e0a\u4e0b\u7bad\u5934\u952e\u6765\u6d4f\u89c8\u5386\u53f2\u8bb0\u5f55.</p> </li> <li> <p>\u81ea\u52a8\u8865\u5168\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528<code>rl_completion_entry_function</code>\u548c<code>rl_attempted_completion_function</code>\u6765\u5b9a\u5236\u81ea\u52a8\u8865\u5168\u7684\u884c\u4e3a.\u4f8b\u5982,\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u51fd\u6570\u6765\u63d0\u4f9b\u53ef\u80fd\u7684\u8865\u5168,\u6216\u8005\u6539\u53d8\u8865\u5168\u7684\u89c4\u5219.</p> </li> <li> <p>\u6e05\u7406\uff1a\u5f53\u4f60\u5b8c\u6210\u4e86readline\u7684\u4f7f\u7528,\u4f60\u5e94\u8be5\u91ca\u653e\u5b83\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\uff1a</p> <pre><code>free(input);\n</code></pre> </li> </ol> <p>\u4ee5\u4e0a\u5c31\u662fGNU readline\u7684\u57fa\u672c\u7528\u6cd5.\u8bf7\u6ce8\u610f,readline\u5e93\u7684\u529f\u80fd\u975e\u5e38\u5f3a\u5927,\u8fd9\u91cc\u53ea\u662f\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u57fa\u672c\u7684\u7528\u6cd5.\u5982\u679c\u4f60\u60f3\u4e86\u89e3\u66f4\u591a,\u4f60\u53ef\u4ee5\u67e5\u9605readline\u7684\u5b98\u65b9\u6587\u6863.</p>"},{"location":"PA/PA/#readline","title":"\u4e3e\u4f8b\u8bf4\u660ereadline","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f7f\u7528GNU readline\u5e93\u7684\u7b80\u5355C\u7a0b\u5e8f\u793a\u4f8b.\u8fd9\u4e2a\u7a0b\u5e8f\u4f1a\u63d0\u793a\u7528\u6237\u8f93\u5165\u547d\u4ee4,\u7136\u540e\u5c06\u547d\u4ee4\u6dfb\u52a0\u5230\u5386\u53f2\u8bb0\u5f55\u4e2d,\u5e76\u6253\u5370\u51fa\u6765.\u7528\u6237\u53ef\u4ee5\u4f7f\u7528readline\u7684\u884c\u7f16\u8f91\u548c\u5386\u53f2\u529f\u80fd.</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;readline/readline.h&gt;\n#include &lt;readline/history.h&gt;\n\nint main() {\n    char* input;\n\n    while(1) {\n        input = readline(\"Enter command: \");\n\n        if (!input) {\n            // EOF, exit loop\n            break;\n        }\n\n        printf(\"You entered: %s\\n\", input);\n\n        if (*input) {\n            add_history(input);\n        }\n\n        free(input);\n    }\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u7a0b\u5e8f\u4e2d,\u6211\u4eec\u4f7f\u7528<code>readline</code>\u51fd\u6570\u8bfb\u53d6\u7528\u6237\u7684\u8f93\u5165.\u6211\u4eec\u4f20\u9012\u4e00\u4e2a\u63d0\u793a\u5b57\u7b26\u4e32\"Enter command: \"\u7ed9<code>readline</code>\u51fd\u6570,\u7136\u540e\u5b83\u4f1a\u8fd4\u56de\u7528\u6237\u8f93\u5165\u7684\u5b57\u7b26\u4e32.(\u800c\u4e14readline\u4f1a\u6253\u5370\u63d0\u793a\u5b57\u7b26\u4e32)</p> <p>\u6211\u4eec\u68c0\u67e5\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u662f\u5426\u4e3aNULL,\u5982\u679c\u662fNULL,\u90a3\u4e48\u6211\u4eec\u5c31\u9000\u51fa\u5faa\u73af.\u5426\u5219,\u6211\u4eec\u5c31\u6253\u5370\u51fa\u7528\u6237\u8f93\u5165\u7684\u5b57\u7b26\u4e32,\u5e76\u4f7f\u7528<code>add_history</code>\u51fd\u6570\u5c06\u5b83\u6dfb\u52a0\u5230\u5386\u53f2\u8bb0\u5f55\u4e2d.</p> <p>\u6700\u540e,\u6211\u4eec\u4f7f\u7528<code>free</code>\u51fd\u6570\u91ca\u653e<code>readline</code>\u51fd\u6570\u8fd4\u56de\u7684\u5b57\u7b26\u4e32.</p> <p>\u8981\u7f16\u8bd1\u8fd9\u4e2a\u7a0b\u5e8f,\u4f60\u9700\u8981\u94fe\u63a5readline\u5e93.\u5728gcc\u4e2d,\u4f60\u53ef\u4ee5\u4f7f\u7528<code>-lreadline</code>\u9009\u9879\u6765\u505a\u5230\u8fd9\u4e00\u70b9\uff1a</p> <p><pre><code>gcc -o my_program my_program.c -lreadline\n</code></pre> nemu\u4e2d\u7684example</p> <pre><code>/* We use the `readline' library to provide more flexibility to read from stdin. */\nstatic char* rl_gets() {\n  static char *line_read = NULL;\n\n  if (line_read) {\n    free(line_read);\n    line_read = NULL;\n  }\n\n  line_read = readline(\"(nemu) \");\n\n  if (line_read &amp;&amp; *line_read) {\n    add_history(line_read);\n  }\n\n  return line_read;\n}\n</code></pre>"},{"location":"PA/PA/#strtok","title":"\u5173\u4e8estrtok","text":"<p><code>strtok</code>\u662f\u4e00\u4e2aC\u8bed\u8a00\u5e93\u51fd\u6570,\u7528\u4e8e\u5728\u5b57\u7b26\u4e32\u4e2d\u67e5\u627e\u5e76\u5206\u5272\u51fa\u4e00\u7cfb\u5217\u7684\u6807\u8bb0\uff08tokens\uff09.\u5b83\u7684\u539f\u578b\u5982\u4e0b\uff1a</p> <pre><code>char *strtok(char *str, const char *delim);\n</code></pre> <p>\u8fd9\u4e2a\u51fd\u6570\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u4e00\u4e2a\u662f\u8981\u5206\u5272\u7684\u5b57\u7b26\u4e32<code>str</code>,\u53e6\u4e00\u4e2a\u662f\u5305\u542b\u5206\u9694\u7b26\u7684\u5b57\u7b26\u4e32<code>delim</code>.\u51fd\u6570\u4f1a\u5728<code>str</code>\u4e2d\u67e5\u627e<code>delim</code>\u4e2d\u7684\u4efb\u4f55\u5b57\u7b26,\u5e76\u5c06\u5176\u4f5c\u4e3a\u6807\u8bb0\u7684\u7ed3\u675f.\u7136\u540e,\u5b83\u4f1a\u5728<code>str</code>\u4e2d\u63d2\u5165\u4e00\u4e2anull\u5b57\u7b26\u6765\u7ed3\u675f\u8fd9\u4e2a\u6807\u8bb0,\u5e76\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u8fd9\u4e2a\u6807\u8bb0\u7684\u6307\u9488.</p> <p>\u5728\u8fde\u7eed\u7684\u8c03\u7528\u4e2d,\u4f60\u53ef\u4ee5\u4f20\u9012NULL\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570,<code>strtok</code>\u4f1a\u7ee7\u7eed\u5728\u4e0a\u6b21\u7684\u5b57\u7b26\u4e32\u4e0a\u8fdb\u884c\u64cd\u4f5c,\u67e5\u627e\u4e0b\u4e00\u4e2a\u6807\u8bb0.</p> <p>\u4f8b\u5982,\u4ee5\u4e0b\u7684\u4ee3\u7801\u4f1a\u5206\u5272\u4e00\u4e2a\u7531\u7a7a\u683c\u5206\u9694\u7684\u5b57\u7b26\u4e32\uff1a</p> <pre><code>char str[] = \"Hello, how are you?\";\nchar *token = strtok(str, \" \");\nwhile (token != NULL) {\n    printf(\"%s\\n\", token);\n    token = strtok(NULL, \" \");\n}\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u8f93\u51fa\uff1a</p> <pre><code>Hello,\nhow\nare\nyou?\n</code></pre> <p>\u8bf7\u6ce8\u610f,<code>strtok</code>\u51fd\u6570\u4f1a\u4fee\u6539\u5b83\u7684\u8f93\u5165\u5b57\u7b26\u4e32,\u6240\u4ee5\u5982\u679c\u4f60\u9700\u8981\u4fdd\u7559\u539f\u59cb\u5b57\u7b26\u4e32,\u4f60\u5e94\u8be5\u5728\u8c03\u7528<code>strtok</code>\u4e4b\u524d\u521b\u5efa\u4e00\u4e2a\u526f\u672c.\u53e6\u5916,<code>strtok</code>\u51fd\u6570\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684,\u5982\u679c\u4f60\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u9700\u8981\u5206\u5272\u5b57\u7b26\u4e32,\u4f60\u5e94\u8be5\u4f7f\u7528<code>strtok_r</code>\u51fd\u6570\uff0e</p>"},{"location":"PA/PA/#vscode","title":"vscode\u4e0d\u80fd\u6b63\u786e\u7684\u63d0\u4ea4\u6211\u7684\u4ed3\u5e93","text":"<p>\u8fd9\u8ba9\u6211\u5f88\u56f0\u60d1,\u51fa\u73b0\u8be5\u62a5\u9519Git: gpg failed to sign the data,\u4f46\u662f\u6211\u4ec5\u4ec5\u914d\u7f6e\u8fc7ssh-key,\u800c\u4e14\u6211\u5728vscode\u8f93\u5165\u6cd5\u4f1a\u628a,\u534a\u89d2\u9017\u53f7\u81ea\u52a8\u6539\u4e3a\u5168\u89d2\u771f\u7684\u607c\u706b.\u660e\u767d\u4e86\u73b0\u5728\u662f\u56e0\u4e3avscode\u6709\u4e2a\u54c8\u6279\u8bbe\u7f6e\u53eb\u505a\u63d0\u4ea4\u4e5f\u5f97commit signed\u771f\u7684\u662f\u54c8\u6279\u4e0b\u7684\u4e00\u6bd4,how-and-why-to-sign-git-commits,wcnmd\u592a\u62bd\u8c61\u4e86,\u8fd9byd\u4e5f\u80fd\u5012\u903c\u7684,\u7528vscode\u529f\u80fd\u5012\u903c\u7528\u6237\u7528\u8fd9\u4e2acommit signed,byd\u6bcf\u6b21\u63d0\u4ea4\u90fd\u5f97\u9a8c\u8bc1\u5bc6\u94a5.\u6709\u70b9\u50cfbyd\u6bcf\u4e00\u4e0b\u90fd\u5f97\u9a8c\u8bc1\u81ea\u613f\u4e86</p>"},{"location":"PA/PA/#_4","title":"\u5355\u6b65\u6267\u884c","text":"<p>\u4ece<code>cmd_c</code>\u5c31\u53ef\u4ee5\u770b\u51fa\u6765<code>cpu_exec()</code>\u7684\u542b\u91d1\u91cf</p> cmd_scpu_exec() <pre><code>static int cmd_s(char*args){\nchar *arg = strtok(NULL, \" \");\nif(arg == NULL){\n    cpu_exec(1);\n}\nelse{\n    int n = atoi(arg);\n    if(n &lt;= 0){\n    printf(\"Invalid argument\\n\");\n    return 0;\n    }\n    cpu_exec(n);\n}\nreturn 0;\n}\n</code></pre> <pre><code>/* Simulate how the CPU works. */\nvoid cpu_exec(uint64_t n) {\ng_print_step = (n &lt; MAX_INST_TO_PRINT);\nswitch (nemu_state.state) {\n    case NEMU_END: case NEMU_ABORT:\n    printf(\"Program execution has ended. To restart the program, exit NEMU and run again.\\n\");\n    return;\n    default: nemu_state.state = NEMU_RUNNING;\n}\n\nuint64_t timer_start = get_time();\n\nexecute(n);\n\nuint64_t timer_end = get_time();\ng_timer += timer_end - timer_start;\n\nswitch (nemu_state.state) {\n    case NEMU_RUNNING: nemu_state.state = NEMU_STOP; break;\n\n    case NEMU_END: case NEMU_ABORT:\n    Log(\"nemu: %s at pc = \" FMT_WORD,\n        (nemu_state.state == NEMU_ABORT ? ANSI_FMT(\"ABORT\", ANSI_FG_RED) :\n        (nemu_state.halt_ret == 0 ? ANSI_FMT(\"HIT GOOD TRAP\", ANSI_FG_GREEN) :\n            ANSI_FMT(\"HIT BAD TRAP\", ANSI_FG_RED))),\n        nemu_state.halt_pc);\n    // fall through\n    case NEMU_QUIT: statistic();\n}\n}\n</code></pre>"},{"location":"PA/PA/#_5","title":"\u5173\u4e8e\u6362\u884c","text":"<p>\u5728C\u8bed\u8a00\u4e2d,\u4f60\u53ef\u4ee5\u4f7f\u7528\u53cd\u659c\u6760\uff08<code>\\</code>\uff09\u5728\u6e90\u4ee3\u7801\u4e2d\u5c06\u4e00\u884c\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u5206\u6210\u4e24\u884c.\u8fd9\u88ab\u79f0\u4e3a\u884c\u8fde\u63a5.\u4f8b\u5982\uff1a</p> <pre><code>printf(\"\u8fd9\u662f\u4e00\u884c\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\\\n\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u975e\u5e38\u957f\u7684\u6587\u672c.\\n\");\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d,\u53cd\u659c\u6760\u544a\u8bc9C\u7f16\u8bd1\u5668\u8fd9\u884c\u4ee3\u7801\u8fd8\u6ca1\u6709\u7ed3\u675f,\u4e0b\u4e00\u884c\u662f\u8fd9\u884c\u7684\u7ee7\u7eed.\u8fd9\u6837,\u4f60\u53ef\u4ee5\u5728\u6e90\u4ee3\u7801\u4e2d\u5c06\u4e00\u884c\u975e\u5e38\u957f\u7684\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u5206\u6210\u591a\u884c,\u800c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6,\u8fd9\u4e9b\u884c\u4f1a\u88ab\u8fde\u63a5\u6210\u4e00\u4e2a\u5355\u4e00\u7684\u5b57\u7b26\u4e32.</p> <p>\u8bf7\u6ce8\u610f,\u53cd\u659c\u6760\u540e\u9762\u4e0d\u80fd\u6709\u4efb\u4f55\u5b57\u7b26,\u5305\u62ec\u7a7a\u683c\u6216\u8005\u6ce8\u91ca.\u53cd\u659c\u6760\u540e\u9762\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u5fc5\u987b\u662f\u6362\u884c\u7b26.</p>"},{"location":"PA/PA/#isa_reg_displayvoid","title":"isa_reg_display(void)","text":"<p>\u8fd9\u6bb5\u4ee3\u7801\u662f\u4e00\u4e2aC\u8bed\u8a00\u5934\u6587\u4ef6,\u5b9a\u4e49\u4e86\u4e00\u4e9b\u4e0eRISC-V\u5904\u7406\u5668\u7684\u5bc4\u5b58\u5668\u76f8\u5173\u7684\u51fd\u6570\u548c\u5b8f.RISC-V\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u6307\u4ee4\u96c6\u67b6\u6784,\u88ab\u5e7f\u6cdb\u7528\u4e8e\u6559\u5b66\u548c\u7814\u7a76.</p> <p>\u7136\u540e,\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9884\u5904\u7406\u5668\u5b8f<code>__RISCV_REG_H__</code>,\u7528\u4e8e\u9632\u6b62\u8fd9\u4e2a\u5934\u6587\u4ef6\u88ab\u591a\u6b21\u5305\u542b.\u5982\u679c\u8fd9\u4e2a\u5b8f\u5df2\u7ecf\u88ab\u5b9a\u4e49,\u90a3\u4e48\u9884\u5904\u7406\u5668\u4f1a\u8df3\u8fc7\u8fd9\u4e2a\u6587\u4ef6\u7684\u5269\u4f59\u90e8\u5206.\u5426\u5219,\u5b83\u4f1a\u5b9a\u4e49\u8fd9\u4e2a\u5b8f,\u5e76\u7ee7\u7eed\u5904\u7406\u6587\u4ef6.</p> <p>\u63a5\u4e0b\u6765,\u4ee3\u7801\u5305\u542b\u4e86\u4e00\u4e2a\u540d\u4e3a<code>common.h</code>\u7684\u5934\u6587\u4ef6.\u8fd9\u4e2a\u5934\u6587\u4ef6\u53ef\u80fd\u5305\u542b\u4e86\u4e00\u4e9b\u5e38\u7528\u7684\u7c7b\u578b\u5b9a\u4e49\u548c\u51fd\u6570\u58f0\u660e.</p> <p>\u7136\u540e,\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>check_reg_idx</code>\u7684\u5185\u8054\u51fd\u6570,\u7528\u4e8e\u68c0\u67e5\u5bc4\u5b58\u5668\u7d22\u5f15\u662f\u5426\u6709\u6548.\u8fd9\u4e2a\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u6574\u6570\u53c2\u6570<code>idx</code>,\u5e76\u68c0\u67e5\u5b83\u662f\u5426\u57280\u548c<code>MUXDEF(CONFIG_RVE, 16, 32)</code>\u4e4b\u95f4.\u5982\u679c<code>CONFIG_RT_CHECK</code>\u88ab\u5b9a\u4e49,\u90a3\u4e48\u8fd9\u4e2a\u68c0\u67e5\u4f1a\u88ab\u6267\u884c,\u5426\u5219\u5b83\u4f1a\u88ab\u5ffd\u7565.\u51fd\u6570\u8fd4\u56de\u4f20\u5165\u7684\u7d22\u5f15.</p> <p>\u63a5\u7740,\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>gpr</code>\u7684\u5b8f,\u7528\u4e8e\u8bbf\u95eeCPU\u7684\u901a\u7528\u5bc4\u5b58\u5668.\u8fd9\u4e2a\u5b8f\u63a5\u53d7\u4e00\u4e2a\u7d22\u5f15\u53c2\u6570,\u901a\u8fc7<code>check_reg_idx</code>\u51fd\u6570\u68c0\u67e5\u8fd9\u4e2a\u7d22\u5f15\u662f\u5426\u6709\u6548,\u7136\u540e\u8fd4\u56de\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668.</p> <p>\u6700\u540e,\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>reg_name</code>\u7684\u5185\u8054\u51fd\u6570,\u7528\u4e8e\u83b7\u53d6\u5bc4\u5b58\u5668\u7684\u540d\u79f0.\u8fd9\u4e2a\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u6574\u6570\u53c2\u6570<code>idx</code>,\u901a\u8fc7<code>check_reg_idx</code>\u51fd\u6570\u68c0\u67e5\u8fd9\u4e2a\u7d22\u5f15\u662f\u5426\u6709\u6548,\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u5bc4\u5b58\u5668\u540d\u79f0\u7684\u6307\u9488.</p> <p>\u6587\u4ef6\u7684\u672b\u5c3e\u662f\u9884\u5904\u7406\u5668\u5b8f<code>__RISCV_REG_H__</code>\u7684\u7ed3\u675f\u90e8\u5206,\u6807\u8bb0\u8fd9\u4e2a\u5934\u6587\u4ef6\u7684\u7ed3\u675f.</p>"},{"location":"PA/PA/#check_reg_idxint-idx","title":"\u5173\u4e8echeck_reg_idx(int idx)","text":"<p>\u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>check_reg_idx</code>\u7684\u5185\u8054\u51fd\u6570,\u8fd9\u4e2a\u51fd\u6570\u7528\u4e8e\u68c0\u67e5\u5bc4\u5b58\u5668\u7d22\u5f15\u662f\u5426\u6709\u6548.</p> <p>\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u6574\u6570\u53c2\u6570<code>idx</code>,\u8fd9\u4e2a\u53c2\u6570\u4ee3\u8868\u8981\u68c0\u67e5\u7684\u5bc4\u5b58\u5668\u7d22\u5f15.</p> <p>\u5728\u51fd\u6570\u4f53\u4e2d,\u9996\u5148\u4f7f\u7528\u4e86\u4e00\u4e2a\u540d\u4e3a<code>IFDEF</code>\u7684\u5b8f.\u8fd9\u4e2a\u5b8f\u7684\u884c\u4e3a\u53d6\u51b3\u4e8e<code>CONFIG_RT_CHECK</code>\u662f\u5426\u88ab\u5b9a\u4e49.\u5982\u679c<code>CONFIG_RT_CHECK</code>\u88ab\u5b9a\u4e49,\u90a3\u4e48<code>assert</code>\u8bed\u53e5\u4f1a\u88ab\u6267\u884c.\u8fd9\u4e2a<code>assert</code>\u8bed\u53e5\u4f1a\u68c0\u67e5<code>idx</code>\u662f\u5426\u57280\u548c<code>MUXDEF(CONFIG_RVE, 16, 32)</code>\u4e4b\u95f4.\u5982\u679c<code>idx</code>\u4e0d\u5728\u8fd9\u4e2a\u8303\u56f4\u5185,\u90a3\u4e48<code>assert</code>\u4f1a\u5931\u8d25,\u7a0b\u5e8f\u4f1a\u6253\u5370\u4e00\u4e2a\u9519\u8bef\u6d88\u606f\u5e76\u7ec8\u6b62.\u5982\u679c<code>CONFIG_RT_CHECK</code>\u6ca1\u6709\u88ab\u5b9a\u4e49,\u90a3\u4e48<code>assert</code>\u8bed\u53e5\u4f1a\u88ab\u5ffd\u7565.</p> <p><code>MUXDEF</code>\u662f\u53e6\u4e00\u4e2a\u5b8f,\u5b83\u6839\u636e<code>CONFIG_RVE</code>\u7684\u503c\u9009\u62e9\u4e24\u4e2a\u9009\u9879\u4e4b\u4e00.\u5982\u679c<code>CONFIG_RVE</code>\u88ab\u5b9a\u4e49,\u90a3\u4e48<code>MUXDEF</code>\u8fd4\u56de16,\u5426\u5219\u8fd4\u56de32.\u8fd9\u610f\u5473\u7740\u5982\u679cRISC-V\u5904\u7406\u5668\u542f\u7528\u4e86RV32E\u6269\u5c55\uff08\u8fd9\u662f\u4e00\u4e2a\u53ea\u670916\u4e2a\u6574\u6570\u5bc4\u5b58\u5668\u7684\u6269\u5c55\uff09,\u90a3\u4e48\u5bc4\u5b58\u5668\u7d22\u5f15\u7684\u4e0a\u9650\u662f16,\u5426\u5219\u4e0a\u9650\u662f32.</p> <p>\u6700\u540e,\u51fd\u6570\u8fd4\u56de\u4f20\u5165\u7684\u7d22\u5f15.\u8fd9\u6837,\u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u8868\u8fbe\u5f0f\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u6765\u68c0\u67e5\u5bc4\u5b58\u5668\u7d22\u5f15,\u5e76\u5728\u540c\u4e00\u65f6\u95f4\u83b7\u53d6\u8fd9\u4e2a\u7d22\u5f15.\u4f8b\u5982,<code>gpr[check_reg_idx(idx)]</code>\u4f1a\u68c0\u67e5<code>idx</code>\u662f\u5426\u6709\u6548,\u5982\u679c\u6709\u6548,\u5c31\u8fd4\u56de\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668.</p>"},{"location":"PA/PA/#gprint-idx","title":"\u5173\u4e8egpr(int idx)","text":"<p><pre><code>typedef struct {\n  word_t gpr[MUXDEF(CONFIG_RVE, 16, 32)];\n  vaddr_t pc;\n} MUXDEF(CONFIG_RV64, riscv64_CPU_state, riscv32_CPU_state);\n</code></pre> \u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>gpr</code>\u7684\u5b8f,\u7528\u4e8e\u8bbf\u95eeCPU\u7684\u901a\u7528\u5bc4\u5b58\u5668.</p> <p>\u60f3\u8981\u5f7b\u5e95\u4e86\u89e3\u5e95\u5c42,\u975e\u5f97\u641e\u660e\u767d\u8fd9\u4e9b\u5b8f\u6280\u5de7</p>"},{"location":"PA/PA/#concat_tempxy","title":"concat_temp(x,y)","text":"<p><pre><code>#define concat_temp(x, y) x ## y\n</code></pre> \u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>concat_temp</code>\u7684\u9884\u5904\u7406\u5668\u5b8f,\u8fd9\u4e2a\u5b8f\u7528\u4e8e\u8fde\u63a5\u4e24\u4e2a\u9884\u5904\u7406\u5668\u6807\u8bb0.</p> <p>\u5728C\u8bed\u8a00\u4e2d,\u9884\u5904\u7406\u5668\u5b8f\u53ef\u4ee5\u63a5\u53d7\u53c2\u6570,\u5e76\u5728\u5b8f\u5c55\u5f00\u65f6\u66ff\u6362\u8fd9\u4e9b\u53c2\u6570.\u5728\u8fd9\u4e2a\u5b8f\u7684\u5b9a\u4e49\u4e2d,<code>x</code>\u548c<code>y</code>\u662f\u53c2\u6570,<code>##</code>\u662f\u8fde\u63a5\u8fd0\u7b97\u7b26.</p> <p>\u8fde\u63a5\u8fd0\u7b97\u7b26<code>##</code>\u4f1a\u5c06\u5b83\u5de6\u8fb9\u548c\u53f3\u8fb9\u7684\u6807\u8bb0\u8fde\u63a5\u6210\u4e00\u4e2a\u65b0\u7684\u6807\u8bb0.\u4f8b\u5982,\u5982\u679c\u4f60\u5199<code>concat_temp(a, b)</code>,\u90a3\u4e48\u9884\u5904\u7406\u5668\u4f1a\u5c06\u8fd9\u4e2a\u5b8f\u5c55\u5f00\u4e3a<code>ab</code>.</p> <p>\u8fd9\u4e2a\u5b8f\u53ef\u4ee5\u7528\u4e8e\u751f\u6210\u65b0\u7684\u6807\u8bc6\u7b26,\u4f8b\u5982\u53d8\u91cf\u540d\u6216\u51fd\u6570\u540d.\u4f8b\u5982,\u5982\u679c\u4f60\u6709\u4e00\u4e9b\u53d8\u91cf<code>var1</code>\u3001<code>var2</code>\u3001<code>var3</code>\u7b49,\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u5b8f\u548c\u4e00\u4e2a\u5faa\u73af\u6765\u8bbf\u95ee\u8fd9\u4e9b\u53d8\u91cf,\u800c\u4e0d\u9700\u8981\u4e3a\u6bcf\u4e2a\u53d8\u91cf\u5199\u5355\u72ec\u7684\u4ee3\u7801.</p> <p>\u8bf7\u6ce8\u610f,\u9884\u5904\u7406\u5668\u5b8f\u5728\u7f16\u8bd1\u65f6\u8fdb\u884c\u5c55\u5f00,\u6240\u4ee5\u5b83\u4eec\u4e0d\u80fd\u7528\u4e8e\u52a8\u6001\u751f\u6210\u6807\u8bc6\u7b26.\u6240\u6709\u7684\u6807\u8bc6\u7b26\u90fd\u5fc5\u987b\u5728\u7f16\u8bd1\u65f6\u786e\u5b9a.</p>"},{"location":"PA/PA/#define-muxdefmacro-x-y-mux_macro_property__p_def_-macro-x-y","title":"#define MUXDEF(macro, X, Y)  MUX_MACRO_PROPERTY(__P_DEF_, macro, X, Y)","text":"<p><code>MUXDEF</code>\u7684\u542b\u91d1\u91cf\u5c31\u662f\u6839\u636emacro\u7684\u5b9a\u4e49\u4e0e\u5426\u6765\u9009\u62e9X\u6216Y</p> <p><pre><code>#define CHOOSE2nd(a, b, ...) b\n#define MUX_WITH_COMMA(contain_comma, a, b) CHOOSE2nd(contain_comma a, b)\n#define MUX_MACRO_PROPERTY(p, macro, a, b) MUX_WITH_COMMA(concat(p, macro), a, b)\n</code></pre> \u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>CHOOSE2nd</code>\u7684\u9884\u5904\u7406\u5668\u5b8f,\u8fd9\u4e2a\u5b8f\u63a5\u53d7\u81f3\u5c11\u4e24\u4e2a\u53c2\u6570,\u5e76\u8fd4\u56de\u7b2c\u4e8c\u4e2a\u53c2\u6570.</p> <p>\u5728C\u8bed\u8a00\u4e2d,\u9884\u5904\u7406\u5668\u5b8f\u53ef\u4ee5\u63a5\u53d7\u53c2\u6570,\u5e76\u5728\u5b8f\u5c55\u5f00\u65f6\u66ff\u6362\u8fd9\u4e9b\u53c2\u6570.\u5728\u8fd9\u4e2a\u5b8f\u7684\u5b9a\u4e49\u4e2d,<code>a</code>\u3001<code>b</code>\u548c<code>__VA_ARGS__</code>\u662f\u53c2\u6570.</p> <p><code>a</code>\u548c<code>b</code>\u5206\u522b\u4ee3\u8868\u7b2c\u4e00\u4e2a\u548c\u7b2c\u4e8c\u4e2a\u53c2\u6570,<code>__VA_ARGS__</code>\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u8bb0,\u4ee3\u8868\u6240\u6709\u5176\u4ed6\u7684\u53c2\u6570.\u8fd9\u4e2a\u6807\u8bb0\u53ea\u80fd\u5728\u63a5\u53d7\u53ef\u53d8\u6570\u91cf\u53c2\u6570\u7684\u5b8f\u4e2d\u4f7f\u7528.</p> <p>\u5728\u8fd9\u4e2a\u5b8f\u7684\u5b9a\u4e49\u4e2d,\u53ea\u6709<code>b</code>\u88ab\u4f7f\u7528,\u6240\u4ee5\u8fd9\u4e2a\u5b8f\u4f1a\u5ffd\u7565\u7b2c\u4e00\u4e2a\u53c2\u6570\u548c\u6240\u6709\u5176\u4ed6\u7684\u53c2\u6570,\u53ea\u8fd4\u56de\u7b2c\u4e8c\u4e2a\u53c2\u6570.</p> <p>\u4f8b\u5982,\u5982\u679c\u4f60\u5199<code>CHOOSE2nd(1, 2, 3, 4)</code>,\u90a3\u4e48\u9884\u5904\u7406\u5668\u4f1a\u5c06\u8fd9\u4e2a\u5b8f\u5c55\u5f00\u4e3a<code>2</code>.</p> <p>\u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e09\u4e2a\u9884\u5904\u7406\u5668\u5b8f,\u5b83\u4eec\u4e00\u8d77\u5b9e\u73b0\u4e86\u4e00\u4e2a\u590d\u6742\u7684\u5b8f\u9009\u62e9\u673a\u5236.</p> <p>\u9996\u5148,<code>CHOOSE2nd(a, b, ...)</code>\u5b8f\u63a5\u53d7\u81f3\u5c11\u4e24\u4e2a\u53c2\u6570,\u5e76\u8fd4\u56de\u7b2c\u4e8c\u4e2a\u53c2\u6570.\u8fd9\u4e2a\u5b8f\u5728\u540e\u9762\u7684\u5b8f\u4e2d\u88ab\u7528\u4f5c\u4e00\u4e2a\u8f85\u52a9\u5de5\u5177,\u7528\u4e8e\u9009\u62e9\u4e24\u4e2a\u9009\u9879\u4e4b\u4e00.</p> <p>\u7136\u540e,<code>MUX_WITH_COMMA(contain_comma, a, b)</code>\u5b8f\u4f7f\u7528<code>CHOOSE2nd</code>\u5b8f\u6765\u6839\u636e<code>contain_comma</code>\u53c2\u6570\u662f\u5426\u5305\u542b\u9017\u53f7\u6765\u9009\u62e9<code>a</code>\u6216<code>b</code>.\u5982\u679c<code>contain_comma</code>\u5305\u542b\u9017\u53f7,\u90a3\u4e48\u5b8f\u4f1a\u5c55\u5f00\u4e3a<code>a</code>,\u5426\u5219\u5b8f\u4f1a\u5c55\u5f00\u4e3a<code>b</code>.\u8fd9\u4e2a\u5b8f\u5229\u7528\u4e86C\u9884\u5904\u7406\u5668\u7684\u4e00\u4e2a\u7279\u6027,\u5373\u5728\u5b8f\u53c2\u6570\u4e2d,\u5982\u679c\u4e00\u4e2a\u53c2\u6570\u5305\u542b\u9017\u53f7,\u4f46\u662f\u6ca1\u6709\u88ab\u62ec\u53f7\u5305\u56f4,\u90a3\u4e48\u8fd9\u4e2a\u53c2\u6570\u4f1a\u88ab\u5206\u5272\u6210\u591a\u4e2a\u53c2\u6570.</p> <p>\u6700\u540e,<code>MUX_MACRO_PROPERTY(p, macro, a, b)</code>\u5b8f\u4f7f\u7528<code>MUX_WITH_COMMA</code>\u5b8f\u6765\u6839\u636e<code>p</code>\u548c<code>macro</code>\u8fde\u63a5\u540e\u7684\u7ed3\u679c\u662f\u5426\u5305\u542b\u9017\u53f7\u6765\u9009\u62e9<code>a</code>\u6216<code>b</code>.\u8fd9\u4e2a\u5b8f\u53ef\u4ee5\u7528\u4e8e\u68c0\u67e5\u4e00\u4e2a\u5b8f\u662f\u5426\u5b9a\u4e49\u4e86\u67d0\u4e2a\u5c5e\u6027.\u4f8b\u5982,\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u540d\u4e3a<code>FEATURE</code>\u7684\u5b8f,\u4f60\u53ef\u4ee5\u4f7f\u7528<code>MUX_MACRO_PROPERTY(FEATURE_, CONFIG_FEATURE, a, b)</code>\u6765\u68c0\u67e5<code>CONFIG_FEATURE</code>\u662f\u5426\u88ab\u5b9a\u4e49.\u5982\u679c<code>CONFIG_FEATURE</code>\u88ab\u5b9a\u4e49,\u90a3\u4e48\u5b8f\u4f1a\u5c55\u5f00\u4e3a<code>a</code>,\u5426\u5219\u5b8f\u4f1a\u5c55\u5f00\u4e3a<code>b</code>.</p> <p><code>comma</code>\u662f\u9017\u53f7\u7684\u610f\u601d(\u54c8\u57fa\u7c73\u662f\u4ec0\u4e48\u610f\u601d\u5462?) <code>Concat</code> \u662f \"concatenate\" \u7684\u7f29\u5199\u5f62\u5f0f,\u6307\u7684\u662f\u5c06\u4e24\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\u4e32\u6216\u5e8f\u5217\u8fde\u63a5\u5728\u4e00\u8d77\u7684\u64cd\u4f5c.\u5728\u7f16\u7a0b\u8bed\u8a00\u548c\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d,\"concatenate\" \u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u672f\u8bed,\u7528\u4e8e\u63cf\u8ff0\u5c06\u4e24\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\u4e32\u3001\u6570\u7ec4\u3001\u5217\u8868\u6216\u5176\u4ed6\u5e8f\u5217\u6309\u987a\u5e8f\u8fde\u63a5\u6210\u4e00\u4e2a\u66f4\u5927\u7684\u5e8f\u5217\u7684\u64cd\u4f5c.</p> <p>\u5728\u8bb8\u591a\u7f16\u7a0b\u8bed\u8a00\u4e2d,\u90fd\u6709\u4e13\u95e8\u7684\u51fd\u6570\u6216\u64cd\u4f5c\u7b26\u7528\u4e8e\u6267\u884c\u8fde\u63a5\u64cd\u4f5c.\u4f8b\u5982,\u5728 Python \u4e2d,\u53ef\u4ee5\u4f7f\u7528\u52a0\u53f7 <code>+</code> \u8fd0\u7b97\u7b26\u6765\u8fde\u63a5\u5b57\u7b26\u4e32\u6216\u5217\u8868.\u5728\u5176\u4ed6\u8bed\u8a00\u4e2d,\u4e5f\u53ef\u80fd\u4f1a\u6709\u7c7b\u4f3c\u7684\u64cd\u4f5c\u7b26\u6216\u51fd\u6570,\u7528\u4e8e\u8fde\u63a5\u4e0d\u540c\u7684\u6570\u636e\u7ed3\u6784.</p> <p>\u56e0\u6b64,\"concat\" \u53ef\u4ee5\u88ab\u7406\u89e3\u4e3a\u6267\u884c\u8fde\u63a5\u64cd\u4f5c\u7684\u52a8\u4f5c\u6216\u529f\u80fd,\u901a\u5e38\u7528\u4e8e\u63cf\u8ff0\u5728\u7f16\u7a0b\u4e2d\u6267\u884c\u8fd9\u79cd\u64cd\u4f5c\u7684\u8fc7\u7a0b.</p> <p>\u5f53\u7136\u53ef\u4ee5.\u5728C\u8bed\u8a00\u4e2d,\u4f60\u53ef\u4ee5\u4f7f\u7528\u9884\u5904\u7406\u5668\u6307\u4ee4<code>#define</code>\u6765\u5b9a\u4e49\u5b8f,\u7136\u540e\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u5b8f.\u4ee5\u4e0b\u662f\u5982\u4f55\u4f7f\u7528\u4f60\u63d0\u4f9b\u7684\u5b8f\u7684\u4e00\u4e2a\u4f8b\u5b50\uff1a</p> <p>\u9996\u5148,\u4f60\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a<code>concat</code>\u5b8f,\u56e0\u4e3a<code>MUX_MACRO_PROPERTY</code>\u5b8f\u4e2d\u7528\u5230\u4e86\u5b83.<code>concat</code>\u5b8f\u7528\u4e8e\u8fde\u63a5\u4e24\u4e2a\u9884\u5904\u7406\u5668\u6807\u8bb0\uff1a</p>"},{"location":"PA/PA/#_6","title":"\u4e00\u4e9b\u54c8\u6279\u4f8b\u5b50","text":"<pre><code>#define concat(a, b) a ## b\n</code></pre> <p>\u7136\u540e,\u4f60\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e9b\u7279\u6027\u5b8f,\u4f8b\u5982\uff1a</p> <pre><code>#define FEATURE_A\n#define FEATURE_B 1,\n</code></pre> <p>\u6700\u540e,\u4f60\u53ef\u4ee5\u4f7f\u7528<code>MUX_MACRO_PROPERTY</code>\u5b8f\u6765\u68c0\u67e5\u4e00\u4e2a\u7279\u6027\u662f\u5426\u88ab\u5b9a\u4e49\uff1a</p> <pre><code>MUX_MACRO_PROPERTY(FEATURE_, A, \"A is defined\", \"A is not defined\")\nMUX_MACRO_PROPERTY(FEATURE_, B, \"B is defined\", \"B is not defined\")\nMUX_MACRO_PROPERTY(FEATURE_, C, \"C is defined\", \"C is not defined\")\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d,<code>FEATURE_A</code>\u88ab\u5b9a\u4e49,\u4f46\u662f\u6ca1\u6709\u503c,<code>FEATURE_B</code>\u88ab\u5b9a\u4e49,\u5e76\u4e14\u6709\u4e00\u4e2a\u503c\uff081\u548c\u4e00\u4e2a\u9017\u53f7\uff09,<code>FEATURE_C</code>\u6ca1\u6709\u88ab\u5b9a\u4e49.</p> <p><code>MUX_MACRO_PROPERTY</code>\u5b8f\u4f1a\u5c06<code>FEATURE_</code>\u548c<code>A</code>\u8fde\u63a5,\u5f97\u5230<code>FEATURE_A</code>,\u7136\u540e\u68c0\u67e5\u8fd9\u4e2a\u5b8f\u662f\u5426\u5305\u542b\u9017\u53f7.\u56e0\u4e3a<code>FEATURE_A</code>\u6ca1\u6709\u503c,\u6240\u4ee5\u5b83\u4e0d\u5305\u542b\u9017\u53f7,\u6240\u4ee5<code>MUX_MACRO_PROPERTY</code>\u5b8f\u4f1a\u8fd4\u56de\"A is not defined\".</p> <p>\u5bf9\u4e8e<code>FEATURE_B</code>,<code>MUX_MACRO_PROPERTY</code>\u5b8f\u4f1a\u5c06<code>FEATURE_</code>\u548c<code>B</code>\u8fde\u63a5,\u5f97\u5230<code>FEATURE_B</code>,\u7136\u540e\u68c0\u67e5\u8fd9\u4e2a\u5b8f\u662f\u5426\u5305\u542b\u9017\u53f7.\u56e0\u4e3a<code>FEATURE_B</code>\u7684\u503c\u662f1\u548c\u4e00\u4e2a\u9017\u53f7,\u6240\u4ee5\u5b83\u5305\u542b\u9017\u53f7,\u6240\u4ee5<code>MUX_MACRO_PROPERTY</code>\u5b8f\u4f1a\u8fd4\u56de\"B is defined\".</p> <p>\u5bf9\u4e8e<code>FEATURE_C</code>,<code>MUX_MACRO_PROPERTY</code>\u5b8f\u4f1a\u5c06<code>FEATURE_</code>\u548c<code>C</code>\u8fde\u63a5,\u5f97\u5230<code>FEATURE_C</code>,\u7136\u540e\u68c0\u67e5\u8fd9\u4e2a\u5b8f\u662f\u5426\u5305\u542b\u9017\u53f7.\u56e0\u4e3a<code>FEATURE_C</code>\u6ca1\u6709\u88ab\u5b9a\u4e49,\u6240\u4ee5\u5b83\u4e0d\u5305\u542b\u9017\u53f7,\u6240\u4ee5<code>MUX_MACRO_PROPERTY</code>\u5b8f\u4f1a\u8fd4\u56de\"C is not defined\".</p>"},{"location":"PA/PA/#_7","title":"\u4f5c\u7528","text":"<p><pre><code>// macro testing\n// See https://stackoverflow.com/questions/26099745/test-if-preprocessor-symbol-is-defined-inside-macro\n#define CHOOSE2nd(a, b, ...) b\n#define MUX_WITH_COMMA(contain_comma, a, b) CHOOSE2nd(contain_comma a, b)\n#define MUX_MACRO_PROPERTY(p, macro, a, b) MUX_WITH_COMMA(concat(p, macro), a, b)\n// define placeholders for some property\n#define __P_DEF_0  X,\n#define __P_DEF_1  X,\n#define __P_ONE_1  X,\n#define __P_ZERO_0 X,\n// define some selection functions based on the properties of BOOLEAN macro\n#define MUXDEF(macro, X, Y)  MUX_MACRO_PROPERTY(__P_DEF_, macro, X, Y)\n\ntypedef struct {\n  word_t gpr[MUXDEF(CONFIG_RVE, 16, 32)];\n  vaddr_t pc;\n} MUXDEF(CONFIG_RV64, riscv64_CPU_state, riscv32_CPU_state);\n</code></pre> \u53ef\u4ee5\u6839\u636eCONFIG_RV64\u6765\u547d\u540d\u7ed3\u6784\u4f53,\u8fd9\u4e2a\u5b8f\u53ef\u4ee5\u6839\u636eCONFIG_RVE\u6765\u9009\u62e916\u6216\u800532,\u8fd9\u4e2a\u5b8f\u53ef\u4ee5\u6839\u636eCONFIG_RVE\u6765\u9009\u62e916\u6216\u800532,\u8fd9\u4e2a\u5b8f\u53ef\u4ee5\u6839\u636eCONFIG_RV64\u6765\u9009\u62e9riscv64_CPU_state\u6216\u8005riscv32_CPU_state.\u4f46\u662f\u6211\u53d1\u73b0__P_DEF_0\u548c__P_DEF_1\u90fd\u662fX,\u8fd9\u6837\u600e\u4e48\u533a\u5206?</p> <p>\u52a9\u6559\u7684\u89e3\u7b54\u548c\u6211\u7684\u601d\u8003,\u8fd9\u4e2a\u4e3b\u8981\u662f\u8ddf\u53cc\u4e95\u53f7\u62fc\u63a5\u7528\u6cd5\u4ee5\u53ca\u3010CHOOSE2nd(contain_comma a, b)\u3011\uff08\u4e00\u5b9a\u6ce8\u610fcontain_comma\u548ca\u4e4b\u95f4\u662f\u6ca1\u6709\u9017\u53f7\u7684\uff09\u6709\u5173 1\u3001\u5982\u679cCONFIG_RV64\u6ca1\u6709\u88ab\u5b9a\u4e49,\u5219\u6709\u3010MUX_MACRO_PROPERTY(__P_DEF_, CONFIG_RV64, riscv64_CPU_state, riscv32_CPU_state)\u3011,\u5176\u4e2d\u7684\u3010__P_DEF_\u3011\u548c\u3010CONFIG_RV64\u3011\u90fd\u662f\u7a7a,\u53cc\u4e95\u53f7\u62fc\u63a5\u4e5f\u662f\u7a7a,\u4e8e\u662f\u6709\u3010CHOOSE2nd(riscv64_CPU_state, riscv32_CPU_state)\u3011,\u6b64\u65f6\u53d6\u7684\u662friscv32_CPU_state2\u3001\u540c\u7406\u5982\u679cCONFIG_RV64\u88ab\u5b9a\u4e49,\u5219\u6709\u3010MUX_MACRO_PROPERTY(__P_DEF_, CONFIG_RV64, riscv64_CPU_state, riscv32_CPU_state)\u3011,\u5b57\u7b26\u4e32\u62fc\u63a5\u540e\u5f62\u6210\u3010CHOOSE2nd(__P_DEF_1, riscv64_CPU_state, riscv32_CPU_state)\u3011,\u6b64\u65f6\u53d6\u7684\u662friscv64_CPU_state \u603b\u4e4b,__P_DEF_0\u548c__P_DEF_1\u7684\u503c\u6709\u4f5c\u7528,\u4f46\u662f\u4e0d\u662f\u76f4\u63a5\u4f5c\u7528\u5728\u8fd9\u4e2a\u5730\u65b9,\u800c\u662f\u901a\u8fc7\u5b57\u7b26\u4e32\u62fc\u63a5\u540e\u7684\u7ed3\u679c\u6765\u4f53\u73b0\u4f5c\u7528\u7684.</p> <p>\u8fd8\u8981\u8003\u8651\u5230\u5f53\u9009\u62e9riscv32\u65f6<code>generate/auto.h</code>\u4e2d\u7684<code>CONFIG_RV64</code>\u662f\u6ca1\u6709\u5b9a\u4e49\u7684,\u5982\u540c\u52a9\u6559\u7684\u89e3\u7b54,__P_DEF\u548cCONFIG_RV64\u90fd\u662f\u7a7a,\u6240\u4ee5\u6700\u7ec8\u9009\u62e9\u7684\u662friscv32_CPU_state,\u800c\u5f53<code>CONFIG_RV64</code>\u88ab\u5b9a\u4e49\u65f6,\u6700\u7ec8\u9009\u62e9\u7684\u662friscv64_CPU_state.</p> <p>\u8981\u6ce8\u610f\u7684\u5730\u65b9\u5c31\u662f\u5f53\u5b8f\u6ca1\u6709\u88ab\u5b9a\u4e49\u65f6,\u9ed8\u8ba4\u662f\u7a7a</p>"},{"location":"PA/PA/#_8","title":"\u76f4\u63a5\u542f\u52a8\u51fa\u73b0\u91cd\u590d\u6253\u5370\u547d\u4ee4\u7684\u95ee\u9898","text":"<p><pre><code>gdb -s /home/along/ysyx-workbench/nemu/build/riscv32-nemu-interpreter --args /home/along/ysyx-workbench/nemu/build/riscv32-nemu-interpreter --log=/home/along/ysyx-workbench/nemu/build/nemu-log.txt  \ngdb -s /home/along/ysyx-workbench/nemu/build/riscv32-nemu-interpreter --args /home/along/ysyx-workbench/nemu/build/riscv32-nemu-interpreter \n</code></pre> \u76f4\u63a5\u542f\u52a8\u5e94\u8be5\u662flog\u5bfc\u81f4\u7684,\u4f1a\u5c06\u672c\u6765\u8f93\u51fa\u5230log\u7684\u8f93\u51fa\u5230stdin,\u6240\u4ee5\u4f1a\u91cd\u590d\u6253\u5370</p>"},{"location":"PA/PA/#_9","title":"\u5185\u5b58\u626b\u63cf","text":"<p>\u5185\u5b58\u662f\u4ec0\u4e48? \u8fd9\u6bb5\u4ee3\u7801\u662fNEMU\uff08\u4e00\u4e2a\u7b80\u5355\u7684\u8ba1\u7b97\u673a\u6a21\u62df\u5668\uff09\u4e2d\u7684\u4e00\u90e8\u5206,\u7528\u4e8e\u5904\u7406\u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u8bfb\u5199\u64cd\u4f5c.</p> <p>\u9996\u5148,\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>pmem</code>\u7684\u9759\u6001\u6570\u7ec4,\u7528\u4e8e\u6a21\u62df\u7269\u7406\u5185\u5b58.\u5982\u679c\u5b9a\u4e49\u4e86<code>CONFIG_PMEM_MALLOC</code>,\u5219<code>pmem</code>\u4f1a\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u6307\u9488,\u5e76\u5728<code>init_mem</code>\u51fd\u6570\u4e2d\u901a\u8fc7<code>malloc</code>\u5206\u914d\u5185\u5b58.\u5426\u5219,<code>pmem</code>\u4f1a\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u5927\u5c0f\u4e3a<code>CONFIG_MSIZE</code>\u7684\u6570\u7ec4.</p> <p><code>guest_to_host</code>\u548c<code>host_to_guest</code>\u8fd9\u4e24\u4e2a\u51fd\u6570\u7528\u4e8e\u5c06\u5ba2\u6237\u673a\u5730\u5740\uff08\u5373\u865a\u62df\u673a\u4e2d\u7684\u5730\u5740\uff09\u8f6c\u6362\u4e3a\u4e3b\u673a\u5730\u5740\uff08\u5373\u6a21\u62df\u5668\u4e2d\u7684\u5730\u5740\uff09,\u53cd\u4e4b\u4ea6\u7136.\u8fd9\u4e24\u4e2a\u51fd\u6570\u901a\u8fc7\u52a0\u51cf<code>CONFIG_MBASE</code>\uff08\u5373\u7269\u7406\u5185\u5b58\u7684\u57fa\u5730\u5740\uff09\u6765\u8fdb\u884c\u8f6c\u6362.</p> <p><code>pmem_read</code>\u548c<code>pmem_write</code>\u8fd9\u4e24\u4e2a\u51fd\u6570\u7528\u4e8e\u8bfb\u5199\u7269\u7406\u5185\u5b58.\u5b83\u4eec\u9996\u5148\u5c06\u7269\u7406\u5730\u5740\u8f6c\u6362\u4e3a\u4e3b\u673a\u5730\u5740,\u7136\u540e\u8c03\u7528<code>host_read</code>\u6216<code>host_write</code>\u6765\u8fdb\u884c\u5b9e\u9645\u7684\u8bfb\u5199\u64cd\u4f5c.</p> <p><code>out_of_bound</code>\u51fd\u6570\u7528\u4e8e\u5904\u7406\u5730\u5740\u8d8a\u754c\u7684\u60c5\u51b5.\u5982\u679c\u8bd5\u56fe\u8bbf\u95ee\u7684\u5730\u5740\u4e0d\u5728\u7269\u7406\u5185\u5b58\u7684\u8303\u56f4\u5185,\u8fd9\u4e2a\u51fd\u6570\u4f1a\u88ab\u8c03\u7528,\u5e76\u6253\u5370\u51fa\u9519\u8bef\u4fe1\u606f.</p> <p><code>init_mem</code>\u51fd\u6570\u7528\u4e8e\u521d\u59cb\u5316\u7269\u7406\u5185\u5b58.\u5982\u679c\u5b9a\u4e49\u4e86<code>CONFIG_PMEM_MALLOC</code>,\u5b83\u4f1a\u5206\u914d\u5185\u5b58\u7ed9<code>pmem</code>.\u5982\u679c\u5b9a\u4e49\u4e86<code>CONFIG_MEM_RANDOM</code>,\u5b83\u4f1a\u7528\u968f\u673a\u6570\u586b\u5145\u7269\u7406\u5185\u5b58.</p> <p><code>paddr_read</code>\u548c<code>paddr_write</code>\u8fd9\u4e24\u4e2a\u51fd\u6570\u662f\u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u8bfb\u5199\u63a5\u53e3.\u5b83\u4eec\u9996\u5148\u68c0\u67e5\u8981\u8bbf\u95ee\u7684\u5730\u5740\u662f\u5426\u5728\u7269\u7406\u5185\u5b58\u7684\u8303\u56f4\u5185.\u5982\u679c\u662f,\u5b83\u4eec\u4f1a\u8c03\u7528<code>pmem_read</code>\u6216<code>pmem_write</code>\u6765\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c.\u5982\u679c\u4e0d\u662f,\u5b83\u4eec\u4f1a\u68c0\u67e5\u662f\u5426\u5b9a\u4e49\u4e86<code>CONFIG_DEVICE</code>.\u5982\u679c\u5b9a\u4e49\u4e86<code>CONFIG_DEVICE</code>,\u5b83\u4eec\u4f1a\u8c03\u7528<code>mmio_read</code>\u6216<code>mmio_write</code>\u6765\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c.\u5982\u679c\u5730\u5740\u65e2\u4e0d\u5728\u7269\u7406\u5185\u5b58\u7684\u8303\u56f4\u5185,\u4e5f\u6ca1\u6709\u5b9a\u4e49<code>CONFIG_DEVICE</code>,\u5b83\u4eec\u4f1a\u8c03\u7528<code>out_of_bound</code>\u6765\u5904\u7406\u5730\u5740\u8d8a\u754c\u7684\u60c5\u51b5.</p>"},{"location":"PA/PA/#pmem_read","title":"pmem_read","text":"<p>\u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>host_read</code>\u7684\u5185\u8054\u51fd\u6570,\u5b83\u7528\u4e8e\u4ece\u4e3b\u673a\u5185\u5b58\u4e2d\u8bfb\u53d6\u6570\u636e.\u8fd9\u4e2a\u51fd\u6570\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a<code>addr</code>\u548c<code>len</code>.<code>addr</code>\u662f\u4e00\u4e2a\u6307\u5411\u8981\u8bfb\u53d6\u7684\u5185\u5b58\u5730\u5740\u7684\u6307\u9488,<code>len</code>\u662f\u8981\u8bfb\u53d6\u7684\u6570\u636e\u7684\u957f\u5ea6\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09.</p> <p>\u51fd\u6570\u4f53\u662f\u4e00\u4e2a<code>switch</code>\u8bed\u53e5,\u5b83\u6839\u636e<code>len</code>\u7684\u503c\u6765\u51b3\u5b9a\u5982\u4f55\u8bfb\u53d6\u6570\u636e.\u5982\u679c<code>len</code>\u662f1,\u90a3\u4e48\u5c31\u8bfb\u53d6\u4e00\u4e2a\u5b57\u8282\uff088\u4f4d\uff09\u7684\u6570\u636e,\u5e76\u5c06\u5176\u4f5c\u4e3a<code>uint8_t</code>\u7c7b\u578b\u8fd4\u56de.\u5982\u679c<code>len</code>\u662f2,\u90a3\u4e48\u5c31\u8bfb\u53d6\u4e24\u4e2a\u5b57\u8282\uff0816\u4f4d\uff09\u7684\u6570\u636e,\u5e76\u5c06\u5176\u4f5c\u4e3a<code>uint16_t</code>\u7c7b\u578b\u8fd4\u56de.\u5982\u679c<code>len</code>\u662f4,\u90a3\u4e48\u5c31\u8bfb\u53d6\u56db\u4e2a\u5b57\u8282\uff0832\u4f4d\uff09\u7684\u6570\u636e,\u5e76\u5c06\u5176\u4f5c\u4e3a<code>uint32_t</code>\u7c7b\u578b\u8fd4\u56de.</p> <p>\u5982\u679c\u5b9a\u4e49\u4e86<code>CONFIG_ISA64</code>\u5b8f\uff08\u8fd9\u901a\u5e38\u610f\u5473\u7740\u6211\u4eec\u6b63\u5728\u4f7f\u752864\u4f4d\u7684\u6307\u4ee4\u96c6\u67b6\u6784\uff09,\u5e76\u4e14<code>len</code>\u662f8,\u90a3\u4e48\u5c31\u8bfb\u53d6\u516b\u4e2a\u5b57\u8282\uff0864\u4f4d\uff09\u7684\u6570\u636e,\u5e76\u5c06\u5176\u4f5c\u4e3a<code>uint64_t</code>\u7c7b\u578b\u8fd4\u56de.</p> <p>\u5982\u679c<code>len</code>\u7684\u503c\u4e0d\u662f1\u30012\u30014\u62168\uff08\u5728\u4f7f\u752864\u4f4d\u6307\u4ee4\u96c6\u67b6\u6784\u65f6\uff09,\u90a3\u4e48\u5c31\u4f1a\u6267\u884c<code>default</code>\u5206\u652f.\u5982\u679c\u5b9a\u4e49\u4e86<code>CONFIG_RT_CHECK</code>\u5b8f\uff08\u8fd9\u901a\u5e38\u610f\u5473\u7740\u6211\u4eec\u6b63\u5728\u8fdb\u884c\u8fd0\u884c\u65f6\u68c0\u67e5\uff09,\u90a3\u4e48\u5c31\u4f1a\u6267\u884c<code>assert(0)</code>,\u8fd9\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u5728\u6b64\u5904\u65ad\u8a00\u5931\u8d25\u5e76\u7ec8\u6b62.\u5982\u679c\u6ca1\u6709\u5b9a\u4e49<code>CONFIG_RT_CHECK</code>\u5b8f,\u90a3\u4e48\u5c31\u4f1a\u8fd4\u56de0.</p> <p>\u603b\u7684\u6765\u8bf4,<code>host_read</code>\u51fd\u6570\u662f\u4e00\u4e2a\u901a\u7528\u7684\u5185\u5b58\u8bfb\u53d6\u51fd\u6570,\u5b83\u53ef\u4ee5\u8bfb\u53d6\u4e0d\u540c\u957f\u5ea6\u7684\u6570\u636e,\u5e76\u5c06\u5176\u4f5c\u4e3a\u9002\u5f53\u7684\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\u8fd4\u56de. \u8c03\u7528\u5173\u7cfb\u94fe\u6761 vaddr_read-&gt;paddr_read-&gt;pmem_read-&gt;host_read \u6211\u60f3\u7528\u597d\u5b8f=&gt;\u6839\u636e\u4e8b\u5148\u5b9a\u4e49\u597d\u7684\u5b8f\u6765\u51b3\u5b9avaddr_read(expr,len)\u4e2d\u7684len</p>"},{"location":"PA/PA/#hostguest","title":"host\u548cguest","text":"<p>\u5728\u865a\u62df\u5316\u6280\u672f\u4e2d,\"host\"\u548c\"guest\"\u662f\u5e38\u7528\u7684\u672f\u8bed.</p> <p>\"Host\"\u901a\u5e38\u6307\u7684\u662f\u8fd0\u884c\u865a\u62df\u5316\u8f6f\u4ef6\u7684\u7269\u7406\u673a\u5668\u6216\u64cd\u4f5c\u7cfb\u7edf.\u4f8b\u5982,\u5982\u679c\u4f60\u5728Windows\u7cfb\u7edf\u4e0a\u8fd0\u884c\u4e00\u4e2a\u865a\u62df\u673a\u8f6f\u4ef6\uff08\u5982VMware\u6216VirtualBox\uff09,\u90a3\u4e48Windows\u5c31\u662fhost.</p> <p>\"Guest\"\u5219\u6307\u7684\u662f\u8fd0\u884c\u5728\u865a\u62df\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf.\u7ee7\u7eed\u4e0a\u9762\u7684\u4f8b\u5b50,\u5982\u679c\u4f60\u5728VMware\u6216VirtualBox\u4e2d\u5b89\u88c5\u4e86\u4e00\u4e2aLinux\u7cfb\u7edf,\u90a3\u4e48\u8fd9\u4e2aLinux\u7cfb\u7edf\u5c31\u662fguest.</p> <p>\u5728\u4f60\u63d0\u5230\u7684NEMU\u6a21\u62df\u5668\u4e2d,\"host\"\u6307\u7684\u662f\u8fd0\u884cNEMU\u7684\u64cd\u4f5c\u7cfb\u7edf,\"guest\"\u6307\u7684\u662f\u88abNEMU\u6a21\u62df\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf.\"guest_to_host\"\u548c\"host_to_guest\"\u8fd9\u4e24\u4e2a\u51fd\u6570\u7528\u4e8e\u5728host\u548cguest\u4e4b\u95f4\u8f6c\u6362\u5730\u5740,\u56e0\u4e3a\u865a\u62df\u673a\u4e2d\u7684\u5730\u5740\uff08guest\u5730\u5740\uff09\u548c\u7269\u7406\u673a\u5668\u4e2d\u7684\u5730\u5740\uff08host\u5730\u5740\uff09\u662f\u4e0d\u540c\u7684.\"Guest\"\u548c\"Host\"\u7684\u672c\u610f\u6765\u81ea\u82f1\u8bed\u4e2d\u7684\u65e5\u5e38\u7528\u6cd5.</p> <p>\"Host\"\u5728\u82f1\u8bed\u4e2d\u7684\u539f\u610f\u662f\u201c\u4e3b\u4eba\u201d\u6216\u201c\u4e3b\u6301\u4eba\u201d,\u5728\u7279\u5b9a\u7684\u73af\u5883\u6216\u4e8b\u4ef6\u4e2d,\u4e3b\u4eba\u901a\u5e38\u662f\u63d0\u4f9b\u7a7a\u95f4\u3001\u8bbe\u65bd\u6216\u8d44\u6e90\u7684\u4e00\u65b9.</p> <p>\"Guest\"\u5728\u82f1\u8bed\u4e2d\u7684\u539f\u610f\u662f\u201c\u5ba2\u4eba\u201d\u6216\u201c\u8bbf\u5ba2\u201d,\u5728\u7279\u5b9a\u7684\u73af\u5883\u6216\u4e8b\u4ef6\u4e2d,\u5ba2\u4eba\u901a\u5e38\u662f\u88ab\u9080\u8bf7\u6765\u4f7f\u7528\u6216\u4eab\u53d7\u4e3b\u4eba\u63d0\u4f9b\u7684\u7a7a\u95f4\u3001\u8bbe\u65bd\u6216\u8d44\u6e90\u7684\u4e00\u65b9.</p> <p>\u5728\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d,\u8fd9\u4e24\u4e2a\u8bcd\u88ab\u501f\u7528\u6765\u63cf\u8ff0\u865a\u62df\u5316\u73af\u5883\u4e2d\u7684\u4e24\u4e2a\u89d2\u8272.\"Host\"\u662f\u8fd0\u884c\u865a\u62df\u5316\u8f6f\u4ef6\u7684\u7269\u7406\u673a\u5668\u6216\u64cd\u4f5c\u7cfb\u7edf,\u63d0\u4f9b\u786c\u4ef6\u8d44\u6e90\u548c\u8fd0\u884c\u73af\u5883,\u5c31\u50cf\u4e00\u4e2a\u201c\u4e3b\u4eba\u201d.\"Guest\"\u662f\u8fd0\u884c\u5728\u865a\u62df\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u6216\u5e94\u7528\u7a0b\u5e8f,\u4f7f\u7528\u7531\"Host\"\u63d0\u4f9b\u7684\u8d44\u6e90\u548c\u73af\u5883,\u5c31\u50cf\u4e00\u4e2a\u201c\u5ba2\u4eba\u201d.</p> <p>=== *haddr\u548cpaddr\u5207\u6362</p> <p><pre><code>static uint8_t pmem[CONFIG_MSIZE]PG_ALIGN = {};\n\n*haddr=pmem+paddr-CONFIG_MIZE\n</code></pre> x86\u7684\u7269\u7406\u5185\u5b58\u662f\u4ece0\u5f00\u59cb\u7f16\u5740\u7684, \u4f46\u5bf9\u4e8e\u4e00\u4e9bISA\u6765\u8bf4\u5374\u4e0d\u662f\u8fd9\u6837, \u4f8b\u5982mips32\u548criscv32\u7684\u7269\u7406\u5730\u5740\u5747\u4ece 0x80000000\u5f00\u59cb. \u56e0\u6b64\u5bf9\u4e8emips32\u548criscv32, \u5176 CONFIG_MBASE\u5c06\u4f1a\u88ab\u5b9a\u4e49\u6210 0x80000000. \u5c06\u6765CPU\u8bbf\u95ee\u5185\u5b58\u65f6, \u6211\u4eec\u4f1a\u5c06CPU\u5c06\u8981\u8bbf\u95ee\u7684\u5185\u5b58\u5730\u5740\u6620\u5c04\u5230 pmem\u4e2d\u7684\u76f8\u5e94\u504f\u79fb\u4f4d\u7f6e, \u8fd9\u662f\u901a\u8fc7 nemu/src/memory/paddr.c\u4e2d\u7684 guest_to_host()\u51fd\u6570\u5b9e\u73b0\u7684. \u4f8b\u5982\u5982\u679cmips32\u7684CPU\u6253\u7b97\u8bbf\u95ee\u5185\u5b58\u5730\u5740 0x80000000, \u6211\u4eec\u4f1a\u8ba9\u5b83\u6700\u7ec8\u8bbf\u95ee pmem[0], \u4ece\u800c\u53ef\u4ee5\u6b63\u786e\u8bbf\u95ee\u5ba2\u6237\u7a0b\u5e8f--log=/home/along/ysyx-workbench/nemu/build/nemu-log.txt  \u5374\u4e0d\u662f\u8fd9\u6837, \u4f8b\u5982mips32\u548criscv32\u7684\u7269\u7406\u5730\u5740\u5747\u4ece0x80000000\u5f00\u59cb. \u56e0\u6b64\u5bf9\u4e8emips32\u548criscv32, \u5176CONFIG_MBASE\u5c06\u4f1a\u88ab\u5b9a\u4e49\u62100x8000000</p> <p>\u5185\u5b58\u901a\u8fc7\u8fd9\u4e2apmem\u5927\u6570\u7ec4\u6765\u8868\u793a</p> <pre><code>pmem:\n\nCONFIG_MBASE      RESET_VECTOR\n      |                 |\n      v                 v\n      -----------------------------------------------\n      |                 |                  |\n      |                 |    guest prog    |\n      |                 |                  |\n      -----------------------------------------------\n                        ^\n                        |\n                       pc\n</code></pre>"},{"location":"PA/PA/#copy-paste","title":"copy-paste","text":"<p>\u6bcf\u6b21\u5199\u5230\u8fd9\u79cd\u4ee3\u7801\u7684\u56fa\u7136\u6709\u70b9\u96be\u868c,\u4f46\u662f\u8fd8\u662f\u5357\u868c.\u6bd4\u5982\u7ed9cmd_x\u5199\u9519\u8bef\u5904\u7406\u4ee3\u7801\u65f6\u5019,\u6211\u60f3\u76f4\u63a5\u7ed9\u6bcf\u4e2a\u8fd9\u6837\u7684\u51fd\u6570\u5728\u9047\u5230\u65e0\u53c2\u6570\u7684\u65f6\u5019\u90fd\u6574\u4e2a\u53c2\u6570\u63d0\u9192, \u5176\u5b9e\u53ea\u8981\u8f93\u51fa\u8fd9\u4e9b\u51fd\u6570\u5728cmd_table\u91cc\u7684usage\u4ecb\u7ecd\u5c31\u884c\u4e86,\u4f46\u662f\u61d2\u60f0\u8ba9\u6211\u76f4\u63a5\u63a5\u53d7copilot\u7ed9\u6211\u7684copy-paste</p>"},{"location":"PA/PA/#_10","title":"\u8868\u8fbe\u5f0f\u5b9e\u73b0","text":"<p>\u5728TRM\u4e2d, \u5bc4\u5b58\u5668(\u5305\u62ecPC)\u548c\u5185\u5b58\u4e2d\u7684\u503c\u552f\u4e00\u5730\u786e\u5b9a\u4e86\u8ba1\u7b97\u673a\u7684\u4e00\u4e2a\u72b6\u6001. \u56e0\u6b64\u4ece\u9053\u7406\u4e0a\u6765\u8bb2, \u6253\u5370\u5bc4\u5b58\u5668\u548c\u626b\u63cf\u5185\u5b58\u8fd9\u4e24\u4e2a\u529f\u80fd\u4e00\u5b9a\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u8c03\u8bd5\u51fa\u6240\u6709\u7684\u95ee\u9898. \u4f46\u4e3a\u4e86\u65b9\u4fbf\u4f7f\u7528, \u6211\u4eec\u8fd8\u5e0c\u671b\u7b80\u6613\u8c03\u8bd5\u5668\u80fd\u5e2e\u6211\u4eec\u8ba1\u7b97\u4e00\u4e9b\u5e26\u6709\u5bc4\u5b58\u5668\u548c\u5185\u5b58\u7684\u8868\u8fbe\u5f0f. \u6240\u4ee5\u4f60\u9700\u8981\u5728\u7b80\u6613\u8c03\u8bd5\u5668\u4e2d\u6dfb\u52a0\u8868\u8fbe\u5f0f\u6c42\u503c\u7684\u529f\u80fd. \u4e3a\u4e86\u7b80\u5355\u8d77\u89c1, \u6211\u4eec\u5148\u6765\u8003\u8651\u6570\u5b66\u8868\u8fbe\u5f0f\u7684\u6c42\u503c\u5b9e\u73b0. \u6570\u5b66\u8868\u8fbe\u5f0f\u6c42\u503c \u7ed9\u4f60\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u5b57\u7b26\u4e32</p> <p><code>5 + 4 * 3 / 2 - 1</code> \u4f60\u5982\u4f55\u6c42\u51fa\u5b83\u7684\u503c? \u8868\u8fbe\u5f0f\u6c42\u503c\u662f\u4e00\u4e2a\u5f88\u7ecf\u5178\u7684\u95ee\u9898, \u4ee5\u81f3\u4e8e\u6709\u5f88\u591a\u65b9\u6cd5\u6765\u89e3\u51b3\u5b83. \u6211\u4eec\u5728\u6240\u9700\u77e5\u8bc6\u548c\u96be\u5ea6\u4e24\u65b9\u9762\u505a\u4e86\u6743\u8861, \u5728\u8fd9\u91cc\u4f7f\u7528\u5982\u4e0b\u65b9\u6cd5\u6765\u89e3\u51b3\u8868\u8fbe\u5f0f\u6c42\u503c\u7684\u95ee\u9898:</p> <p>\u9996\u5148\u8bc6\u522b\u51fa\u8868\u8fbe\u5f0f\u4e2d\u7684\u5355\u5143 \u6839\u636e\u8868\u8fbe\u5f0f\u7684\u5f52\u7eb3\u5b9a\u4e49\u8fdb\u884c\u9012\u5f52\u6c42\u503c \u8bcd\u6cd5\u5206\u6790 \"\u8bcd\u6cd5\u5206\u6790\"\u8fd9\u4e2a\u8bcd\u770b\u4e0a\u53bb\u5f88\u9ad8\u7aef, \u8bf4\u767d\u4e86\u5c31\u662f\u505a\u4e0a\u9762\u7684\u7b2c1\u4ef6\u4e8b\u60c5, \"\u8bc6\u522b\u51fa\u8868\u8fbe\u5f0f\u4e2d\u7684\u5355\u5143\". \u8fd9\u91cc\u7684\"\u5355\u5143\"\u662f\u6307\u6709\u72ec\u7acb\u542b\u4e49\u7684\u5b50\u4e32, \u5b83\u4eec\u6b63\u5f0f\u7684\u79f0\u547c\u53eb<code>token</code>. \u5177\u4f53\u5730\u8bf4, \u6211\u4eec\u9700\u8981\u5728\u4e0a\u8ff0\u8868\u8fbe\u5f0f\u4e2d\u8bc6\u522b\u51fa<code>5</code>, <code>+</code>, <code>4</code>, <code>*</code>, <code>3</code>, <code>/</code>, <code>2</code>, <code>-</code>, <code>1</code>\u8fd9\u4e9b<code>token</code>. \u4f60\u53ef\u80fd\u4f1a\u89c9\u5f97\u8fd9\u662f\u4e00\u4ef6\u5f88\u7b80\u5355\u7684\u4e8b\u60c5, \u4f46\u8003\u8651\u4ee5\u4e0b\u7684\u8868\u8fbe\u5f0f:</p> <pre><code>\"0x80100000+   ($a0 +5)*4 - *(  $t1 + 8) + number\"\n</code></pre> <p>\u5b83\u5305\u542b\u66f4\u591a\u7684\u529f\u80fd, \u4f8b\u5982\u5341\u516d\u8fdb\u5236\u6574\u6570(0x80100000), \u5c0f\u62ec\u53f7, \u8bbf\u95ee\u5bc4\u5b58\u5668($a0), \u6307\u9488\u89e3\u5f15\u7528(\u7b2c\u4e8c\u4e2a*), \u8bbf\u95ee\u53d8\u91cf(number). \u4e8b\u5b9e\u4e0a, \u8fd9\u79cd\u590d\u6742\u7684\u8868\u8fbe\u5f0f\u5728\u8c03\u8bd5\u8fc7\u7a0b\u4e2d\u7ecf\u5e38\u7528\u5230, \u800c\u4e14\u4f60\u9700\u8981\u5728\u7a7a\u683c\u6570\u76ee\u4e0d\u56fa\u5b9a(0\u4e2a\u6216\u591a\u4e2a)\u7684\u60c5\u51b5\u4e0b\u4ecd\u7136\u80fd\u6b63\u786e\u8bc6\u522b\u51fa\u5176\u4e2d\u7684token. \u5f53\u7136\u4f60\u4ecd\u7136\u53ef\u4ee5\u624b\u52a8\u8fdb\u884c\u5904\u7406(\u5982\u679c\u4f60\u559c\u6b22\u6311\u6218\u6027\u7684\u5de5\u4f5c\u7684\u8bdd), \u4e00\u79cd\u66f4\u65b9\u4fbf\u5feb\u6377\u7684\u505a\u6cd5\u662f\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f. \u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5339\u914d\u51fa\u4e00\u4e9b\u590d\u6742\u7684pattern, \u662f\u7a0b\u5e8f\u5458\u5fc5\u987b\u638c\u63e1\u7684\u5185\u5bb9. \u5982\u679c\u4f60\u4ece\u6765\u6ca1\u6709\u63a5\u89e6\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f, \u8bf7\u67e5\u9605\u76f8\u5173\u8d44\u6599. \u5728\u5b9e\u9a8c\u4e2d, \u4f60\u53ea\u9700\u8981\u4e86\u89e3\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4e00\u4e9b\u57fa\u672c\u77e5\u8bc6\u5c31\u53ef\u4ee5\u4e86(\u4f8b\u5982\u5143\u5b57\u7b26).</p>"},{"location":"PA/PA/#_11","title":"\u4e0a\u6b21\u5bf9\u8868\u8fbe\u5f0f\u7684\u5b9e\u73b0\u5f88\u8822","text":"<p>\u6211\u60f3\u6709\u4e2a\u597d\u4e00\u70b9\u7684\u5b9e\u73b0?\u4e8c\u53c9\u6811?\u6216\u8005\u8fd8\u662f\u4ec0\u4e48\u5176\u4ed6\u7684\u4e1c\u897f?\u4f46\u662f\u5148\u522b\u6025,\u5148\u770b\u770b\u8fd9\u4e2a\u5b9e\u73b0.\u5982\u679c\u4f60\u559c\u6b22\u6311\u6218\u6027\u7684\u5de5\u4f5c,\u4e00\u79cd\u66f4\u65b9\u4fbf\u5feb\u6377\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f</p>"},{"location":"PA/PA/#_12","title":"\u5982\u4f55\u8c03\u8bd5","text":"<p>\u4e0d\u8981\u4f7f\u7528\"\u76ee\u5149\u8c03\u8bd5\u6cd5\", \u8981\u601d\u8003\u5982\u4f55\u7528\u6b63\u786e\u7684\u5de5\u5177\u548c\u65b9\u6cd5\u5e2e\u52a9\u8c03\u8bd5 \u7a0b\u5e8f\u8bbe\u8ba1\u8bfe\u4e0a\u76ef\u7740\u51e0\u5341\u884c\u7684\u7a0b\u5e8f, \u4f60\u6216\u8bb8\u8fd8\u80fd\u5728\u5927\u8111\u4e2d\u50cfNEMU\u90a3\u6837\u6a21\u62df\u7a0b\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b; \u4f46\u7a0b\u5e8f\u89c4\u6a21\u5927\u4e86\u4e4b\u540e, \u5f88\u5feb\u4f60\u5c31\u4f1a\u653e\u5f03\u7684: \u4f60\u7684\u5927\u8111\u4e0d\u53ef\u80fd\u6a21\u62df\u5f97\u4e86\u4e00\u4e2a\u5de8\u5927\u7684\u72b6\u6001\u673a \u6211\u4eec\u5b66\u4e60\u8ba1\u7b97\u673a\u662f\u4e3a\u4e86\u5b66\u4e60\u8ba1\u7b97\u673a\u7684\u5de5\u4f5c\u539f\u7406, \u800c\u4e0d\u662f\u5b66\u4e60\u5982\u4f55\u50cf\u8ba1\u7b97\u673a\u90a3\u6837\u673a\u68b0\u5730\u5de5\u4f5c \u4f7f\u7528<code>assert()</code>\u8bbe\u7f6e\u68c0\u67e5\u70b9, \u62e6\u622a\u975e\u9884\u671f\u60c5\u51b5 \u4f8b\u5982<code>assert(p != NULL)</code>\u5c31\u53ef\u4ee5\u62e6\u622a\u7531\u7a7a\u6307\u9488\u89e3\u5f15\u7528\u5f15\u8d77\u7684\u6bb5\u9519\u8bef \u7ed3\u5408\u5bf9\u7a0b\u5e8f\u6267\u884c\u884c\u4e3a\u7684\u7406\u89e3, \u4f7f\u7528<code>printf()</code>\u67e5\u770b\u7a0b\u5e8f\u6267\u884c\u7684\u60c5\u51b5(\u6ce8\u610f\u5b57\u7b26\u4e32\u8981\u6362\u884c) <code>printf()</code>\u8f93\u51fa\u4efb\u610f\u4fe1\u606f\u53ef\u4ee5\u68c0\u67e5\u4ee3\u7801\u53ef\u8fbe\u6027: \u8f93\u51fa\u4e86\u76f8\u5e94\u4fe1\u606f, \u5f53\u4e14\u4ec5\u5f53\u76f8\u5e94\u7684\u4ee3\u7801\u5757\u88ab\u6267\u884c <code>printf()</code>\u8f93\u51fa\u53d8\u91cf\u7684\u503c, \u53ef\u4ee5\u68c0\u67e5\u5176\u53d8\u5316\u8fc7\u7a0b\u4e0e\u539f\u56e0 \u4f7f\u7528GDB\u89c2\u5bdf\u7a0b\u5e8f\u7684\u4efb\u610f\u72b6\u6001\u548c\u884c\u4e3a \u6253\u5370\u53d8\u91cf, \u65ad\u70b9, \u76d1\u89c6\u70b9, \u51fd\u6570\u8c03\u7528\u6808... \u5982\u679c\u4f60\u7a81\u7136\u89c9\u5f97\u4e0a\u8ff0\u65b9\u6cd5\u5f88\u6709\u9053\u7406, \u8bf4\u660e\u4f60\u5728\u7a0b\u5e8f\u8bbe\u8ba1\u8bfe\u4e0a\u6ca1\u6709\u53d7\u5230\u8be5\u6709\u7684\u8bad\u7ec3.</p> <p>\u4e09\u4e2a\u5bf9\u8c03\u8bd5\u6709\u7528\u7684\u5b8f(\u5728 <code>nemu/include/debug.h\u4e2d\u5b9a\u4e49</code>) <code>Log()</code>\u662f <code>printf()</code>\u7684\u5347\u7ea7\u7248, \u4e13\u95e8\u7528\u6765\u8f93\u51fa\u8c03\u8bd5\u4fe1\u606f, \u540c\u65f6\u8fd8\u4f1a\u8f93\u51fa\u4f7f\u7528 <code>Log()</code>\u6240\u5728\u7684\u6e90\u6587\u4ef6, \u884c\u53f7\u548c\u51fd\u6570. \u5f53\u8f93\u51fa\u7684\u8c03\u8bd5\u4fe1\u606f\u8fc7\u591a\u7684\u65f6\u5019, \u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5b9a\u4f4d\u5230\u4ee3\u7801\u4e2d\u7684\u76f8\u5173\u4f4d\u7f6e\uff08\u975e\u5e38\u597d\u7528\uff01\uff01\uff01\uff01\u975e\u5e38\u63a8\u8350\uff09 <code>Assert()</code>\u662f <code>assert()</code>\u7684\u5347\u7ea7\u7248, \u5f53\u6d4b\u8bd5\u6761\u4ef6\u4e3a\u5047\u65f6, \u5728<code>assertion fail</code>\u4e4b\u524d\u53ef\u4ee5\u8f93\u51fa\u4e00\u4e9b\u4fe1\u606f panic()\u7528\u4e8e\u8f93\u51fa\u4fe1\u606f\u5e76\u7ed3\u675f\u7a0b\u5e8f, \u76f8\u5f53\u4e8e\u65e0\u6761\u4ef6\u7684<code>assertion fail</code></p> <p><pre><code>#define Log(format, ...) \\\n    _Log(ANSI_FMT(\"[%s:%d %s] \" format, ANSI_FG_BLUE) \"\\n\", \\\n        __FILE__, __LINE__, __func__, ## __VA_ARGS__)\n\n#define Assert(cond, format, ...) \\\n  do { \\\n    if (!(cond)) { \\\n      MUXDEF(CONFIG_TARGET_AM, printf(ANSI_FMT(format, ANSI_FG_RED) \"\\n\", ## __VA_ARGS__), \\\n        (fflush(stdout), fprintf(stderr, ANSI_FMT(format, ANSI_FG_RED) \"\\n\", ##  __VA_ARGS__))); \\\n      IFNDEF(CONFIG_TARGET_AM, extern FILE* log_fp; fflush(log_fp)); \\\n      extern void assert_fail_msg(); \\\n      assert_fail_msg(); \\\n      assert(cond); \\\n    } \\\n  } while (0)\n</code></pre> \u8fd9\u6bb5\u4ee3\u7801\u662f\u4e00\u4e2a\u5728C\u8bed\u8a00\u4e2d\u5b9a\u4e49\u7684\u5b8f,\u540d\u4e3a<code>Log</code>.\u5b8f\u5728C\u8bed\u8a00\u4e2d\u662f\u4e00\u79cd\u9884\u5904\u7406\u5668\u6307\u4ee4,\u5b83\u4eec\u5728\u7f16\u8bd1\u4ee3\u7801\u4e4b\u524d\u7531\u9884\u5904\u7406\u5668\u5904\u7406.\u5b8f\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u91cd\u590d\u4f7f\u7528\u7684\u4ee3\u7801\u7247\u6bb5.</p> <p><code>Log</code>\u5b8f\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u4e00\u4e2a\u683c\u5f0f\u5b57\u7b26\u4e32\uff08<code>format</code>\uff09\u548c\u4e00\u4e2a\u53ef\u53d8\u53c2\u6570\u5217\u8868\uff08<code>__VA_ARGS__</code>\uff09.\u8fd9\u4e2a\u5b8f\u7684\u4e3b\u8981\u529f\u80fd\u662f\u751f\u6210\u4e00\u6761\u65e5\u5fd7\u6d88\u606f,\u5e76\u5c06\u5176\u6253\u5370\u51fa\u6765.</p> <p><code>_Log</code>\u51fd\u6570\u662f\u8fd9\u4e2a\u5b8f\u7684\u6838\u5fc3,\u5b83\u8d1f\u8d23\u751f\u6210\u548c\u6253\u5370\u65e5\u5fd7\u6d88\u606f.<code>_Log</code>\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u683c\u5f0f\u5b57\u7b26\u4e32,\u5b83\u4f7f\u7528<code>ANSI_FMT</code>\u5b8f\u548c<code>ANSI_FG_BLUE</code>\u5b8f\u6765\u8bbe\u7f6e\u6d88\u606f\u7684\u989c\u8272\u4e3a\u84dd\u8272.\u683c\u5f0f\u5b57\u7b26\u4e32\u4e2d\u7684<code>[%s:%d %s]</code>\u7528\u4e8e\u63d2\u5165\u6587\u4ef6\u540d\u3001\u884c\u53f7\u548c\u51fd\u6570\u540d,\u8fd9\u4e9b\u4fe1\u606f\u7531<code>__FILE__</code>\u3001<code>__LINE__</code>\u548c<code>__func__</code>\u9884\u5904\u7406\u5668\u5b8f\u63d0\u4f9b.<code>format</code>\u53c2\u6570\u662f\u7528\u6237\u63d0\u4f9b\u7684\u6d88\u606f\u683c\u5f0f,\u5b83\u88ab\u76f4\u63a5\u63d2\u5165\u5230\u683c\u5f0f\u5b57\u7b26\u4e32\u4e2d.</p> <p><code>## __VA_ARGS__</code>\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u9884\u5904\u7406\u5668\u64cd\u4f5c\u7b26,\u5b83\u7528\u4e8e\u5904\u7406\u53ef\u53d8\u53c2\u6570\u5217\u8868.\u5728\u8fd9\u4e2a\u5b8f\u4e2d,\u5b83\u5c06\u7528\u6237\u63d0\u4f9b\u7684\u6240\u6709\u53c2\u6570\u63d2\u5165\u5230<code>_Log</code>\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\u4e2d.</p> <p>\u603b\u7684\u6765\u8bf4,\u8fd9\u4e2a<code>Log</code>\u5b8f\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u4fbf\u7684\u65b9\u5f0f\u6765\u751f\u6210\u548c\u6253\u5370\u5e26\u6709\u6587\u4ef6\u540d\u3001\u884c\u53f7\u548c\u51fd\u6570\u540d\u7684\u65e5\u5fd7\u6d88\u606f.</p>"},{"location":"PA/PA/#_13","title":"\u5982\u4f55\u7f16\u8f91","text":"<p>\u5728VS Code\u4e2d,\u4f60\u53ef\u4ee5\u4f7f\u7528\"\u591a\u5149\u6807\u7f16\u8f91\"\u529f\u80fd\u6765\u540c\u65f6\u7f16\u8f91\u591a\u4e2a\u76f8\u540c\u7684\u8bcd.\u4ee5\u4e0b\u662f\u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u7684\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u9996\u5148,\u9009\u62e9\u4f60\u60f3\u8981\u7f16\u8f91\u7684\u8bcd.</p> </li> <li> <p>\u7136\u540e,\u6309<code>Ctrl+D</code>\uff08\u5728macOS\u4e0a\u662f<code>Cmd+D</code>\uff09.\u8fd9\u5c06\u5728\u4e0b\u4e00\u4e2a\u76f8\u540c\u7684\u8bcd\u5904\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u5149\u6807.</p> </li> <li> <p>\u91cd\u590d\u6309<code>Ctrl+D</code>\uff08\u6216<code>Cmd+D</code>\uff09,\u76f4\u5230\u4f60\u4e3a\u6240\u6709\u60f3\u8981\u7f16\u8f91\u7684\u8bcd\u6dfb\u52a0\u4e86\u5149\u6807.</p> </li> <li> <p>\u73b0\u5728,\u4f60\u53ef\u4ee5\u540c\u65f6\u7f16\u8f91\u6240\u6709\u7684\u8bcd.\u5f53\u4f60\u8f93\u5165\u6216\u5220\u9664\u5b57\u7b26\u65f6,\u6240\u6709\u7684\u5149\u6807\u90fd\u4f1a\u6267\u884c\u76f8\u540c\u7684\u64cd\u4f5c.</p> </li> </ol> <p>\u8bf7\u6ce8\u610f,\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>Ctrl+Shift+L</code>\uff08\u5728macOS\u4e0a\u662f<code>Cmd+Shift+L</code>\uff09\u4e00\u6b21\u6027\u4e3a\u6240\u6709\u76f8\u540c\u7684\u8bcd\u6dfb\u52a0\u5149\u6807.</p>"},{"location":"PA/PA/#static-inline","title":"static \u548c inline","text":"<ul> <li>\u4ec0\u4e48\u662ftranslation unit</li> </ul> <p>\"Translation unit\" \u662f\u6307\u7f16\u8bd1\u5668\u5904\u7406\u7684\u6700\u5c0f\u5355\u5143,\u901a\u5e38\u662f\u4e00\u4e2a\u6e90\u6587\u4ef6\uff08\u5982 <code>.c</code> \u6587\u4ef6\uff09\u4ee5\u53ca\u5b83\u6240\u5305\u542b\u7684\u6240\u6709\u5305\u542b\u6587\u4ef6\uff08\u5934\u6587\u4ef6\uff09\u7684\u5185\u5bb9.\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d,\u7f16\u8bd1\u5668\u5c06\u6bcf\u4e2a\u6e90\u6587\u4ef6\u53ca\u5176\u5305\u542b\u7684\u5934\u6587\u4ef6\u5408\u5e76\u6210\u4e00\u4e2a\u79f0\u4e3a translation unit \u7684\u5355\u5143\u8fdb\u884c\u5904\u7406.</p> <p>\u6bcf\u4e2a translation unit \u5728\u7f16\u8bd1\u65f6\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\uff08object file\uff09,\u6700\u7ec8\u5728\u94fe\u63a5\u9636\u6bb5\u5c06\u8fd9\u4e9b\u76ee\u6807\u6587\u4ef6\u5408\u5e76\u6210\u53ef\u6267\u884c\u6587\u4ef6.</p> <p>\u4e00\u4e2a translation unit \u53ef\u4ee5\u5305\u542b\u5982\u4e0b\u5185\u5bb9\uff1a</p> <ol> <li> <p>\u5168\u5c40\u53d8\u91cf\u548c\u51fd\u6570\u7684\u58f0\u660e\u548c\u5b9a\u4e49\uff1a\u5305\u62ec\u9759\u6001\u5168\u5c40\u53d8\u91cf\u548c\u51fd\u6570.</p> </li> <li> <p>\u51fd\u6570\u7684\u5b9a\u4e49\uff1a\u51fd\u6570\u7684\u5b9e\u73b0.</p> </li> <li> <p>\u5b8f\u5b9a\u4e49\uff1a\u5728\u6e90\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u9884\u5904\u7406\u5668\u5b8f.</p> </li> <li> <p>\u7c7b\u578b\u5b9a\u4e49\uff1a\u5305\u62ec\u7ed3\u6784\u4f53\u3001\u8054\u5408\u4f53\u548c\u679a\u4e3e\u7b49\u7c7b\u578b\u7684\u5b9a\u4e49.</p> </li> </ol> <p>\u5728\u7f16\u8bd1\u65f6,\u7f16\u8bd1\u5668\u5c06\u4f1a\u5bf9\u6bcf\u4e2a translation unit \u8fdb\u884c\u72ec\u7acb\u7f16\u8bd1,\u5e76\u751f\u6210\u5bf9\u5e94\u7684\u76ee\u6807\u6587\u4ef6.\u7136\u540e,\u94fe\u63a5\u5668\u5c06\u8fd9\u4e9b\u76ee\u6807\u6587\u4ef6\u5408\u5e76\u6210\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u6216\u8005\u5e93\u6587\u4ef6.</p> <p>\u5728 C \u548c C++ \u4e2d,\u6bcf\u4e2a\u6e90\u6587\u4ef6\u901a\u5e38\u5bf9\u5e94\u4e00\u4e2a translation unit.\u56e0\u6b64,\u4e86\u89e3 translation unit \u7684\u6982\u5ff5\u5bf9\u4e8e\u7406\u89e3\u7f16\u8bd1\u548c\u94fe\u63a5\u8fc7\u7a0b\u975e\u5e38\u91cd\u8981. + \u4e24\u4e2atranslaton unit\u540c\u65f6\u5f15\u7528,\u5c31\u5bfc\u81f4multiple definition</p> <p>\u662f\u7684,\u5f53\u4e24\u4e2a\u6216\u591a\u4e2a\u72ec\u7acb\u7684 translation units\uff08\u901a\u5e38\u662f\u4e0d\u540c\u7684\u6e90\u6587\u4ef6\uff09\u4e2d\u90fd\u5b9a\u4e49\u4e86\u76f8\u540c\u7684\u5168\u5c40\u53d8\u91cf\u3001\u51fd\u6570\u6216\u5176\u4ed6\u5177\u6709\u5916\u90e8\u94fe\u63a5\u5c5e\u6027\u7684\u5b9e\u4f53\u65f6,\u5c31\u4f1a\u51fa\u73b0\u591a\u91cd\u5b9a\u4e49\uff08multiple definition\uff09\u9519\u8bef.</p> <p>\u8fd9\u79cd\u9519\u8bef\u901a\u5e38\u5728\u94fe\u63a5\u9636\u6bb5\u88ab\u68c0\u6d4b\u5230,\u56e0\u4e3a\u94fe\u63a5\u5668\u8d1f\u8d23\u5c06\u5404\u4e2a translation units \u7684\u76ee\u6807\u6587\u4ef6\u5408\u5e76\u6210\u6700\u7ec8\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6216\u8005\u5e93\u6587\u4ef6.\u5f53\u94fe\u63a5\u5668\u5728\u5408\u5e76\u65f6\u53d1\u73b0\u591a\u4e2a translation units \u4e2d\u5b58\u5728\u76f8\u540c\u540d\u79f0\u7684\u5168\u5c40\u53d8\u91cf\u6216\u51fd\u6570\u65f6,\u5c31\u4f1a\u62a5\u544a\u591a\u91cd\u5b9a\u4e49\u9519\u8bef.</p> <p>\u89e3\u51b3\u8fd9\u79cd\u9519\u8bef\u7684\u65b9\u6cd5\u901a\u5e38\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li> <p>\u4f7f\u7528 <code>static</code> \u4fee\u9970\u7b26\uff1a\u5982\u679c\u67d0\u4e2a\u5168\u5c40\u53d8\u91cf\u6216\u51fd\u6570\u53ea\u5728\u5f53\u524d\u6587\u4ef6\u5185\u90e8\u4f7f\u7528,\u53ef\u4ee5\u4f7f\u7528 <code>static</code> \u4fee\u9970\u7b26\u5c06\u5176\u58f0\u660e\u4e3a\u5177\u6709\u5185\u90e8\u94fe\u63a5\u5c5e\u6027,\u4ece\u800c\u907f\u514d\u4e0e\u5176\u4ed6\u6587\u4ef6\u7684\u5b9e\u4f53\u51b2\u7a81.</p> </li> <li> <p>\u4f7f\u7528 <code>extern</code> \u5173\u952e\u5b57\u8fdb\u884c\u58f0\u660e\uff1a\u5982\u679c\u67d0\u4e2a\u5168\u5c40\u53d8\u91cf\u6216\u51fd\u6570\u9700\u8981\u5728\u591a\u4e2a\u6587\u4ef6\u4e4b\u95f4\u5171\u4eab,\u53ef\u4ee5\u5728\u5176\u4e2d\u4e00\u4e2a\u6587\u4ef6\u4e2d\u8fdb\u884c\u5b9a\u4e49,\u800c\u5728\u5176\u4ed6\u6587\u4ef6\u4e2d\u4f7f\u7528 <code>extern</code> \u5173\u952e\u5b57\u8fdb\u884c\u58f0\u660e,\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u591a\u91cd\u5b9a\u4e49\u9519\u8bef.</p> </li> <li> <p>\u4f7f\u7528\u5934\u6587\u4ef6\uff1a\u5c06\u51fd\u6570\u58f0\u660e\u3001\u5168\u5c40\u53d8\u91cf\u58f0\u660e\u4ee5\u53ca\u5176\u4ed6\u5916\u90e8\u5b9e\u4f53\u7684\u58f0\u660e\u653e\u5728\u5934\u6587\u4ef6\u4e2d,\u5728\u9700\u8981\u4f7f\u7528\u8fd9\u4e9b\u5b9e\u4f53\u7684\u6587\u4ef6\u4e2d\u5305\u542b\u76f8\u5e94\u7684\u5934\u6587\u4ef6,\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u6bcf\u4e2a\u6587\u4ef6\u90fd\u4f7f\u7528\u540c\u4e00\u4efd\u5b9a\u4e49,\u907f\u514d\u591a\u91cd\u5b9a\u4e49\u9519\u8bef.</p> </li> <li> <p>\u4f7f\u7528\u547d\u540d\u7a7a\u95f4\uff08C++\uff09\uff1a\u5728 C++ \u4e2d,\u53ef\u4ee5\u4f7f\u7528\u547d\u540d\u7a7a\u95f4\u6765\u907f\u514d\u5168\u5c40\u4f5c\u7528\u57df\u4e2d\u7684\u540d\u79f0\u51b2\u7a81,\u8fd9\u6837\u5373\u4f7f\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u4e2d\u6709\u76f8\u540c\u540d\u79f0\u7684\u5b9e\u4f53,\u5b83\u4eec\u4e5f\u4e0d\u4f1a\u53d1\u751f\u51b2\u7a81.</p> </li> </ol> <p>\u901a\u8fc7\u4ee5\u4e0a\u65b9\u6cd5,\u53ef\u4ee5\u6709\u6548\u5730\u907f\u514d\u591a\u91cd\u5b9a\u4e49\u9519\u8bef,\u5e76\u786e\u4fdd\u7a0b\u5e8f\u80fd\u591f\u6b63\u786e\u5730\u94fe\u63a5\u548c\u6267\u884c.</p> <ul> <li>\u4ec0\u4e48\u662fextern linkage\u4ec0\u4e48\u662finternal linkage</li> </ul> <p>\u5728 C \u548c C++ \u4e2d,\u5168\u5c40\u53d8\u91cf\u3001\u51fd\u6570\u548c\u5176\u4ed6\u5b9e\u4f53\u53ef\u4ee5\u5177\u6709\u4e0d\u540c\u7684\u94fe\u63a5\u5c5e\u6027,\u8fd9\u4e9b\u94fe\u63a5\u5c5e\u6027\u51b3\u5b9a\u4e86\u8fd9\u4e9b\u5b9e\u4f53\u7684\u53ef\u89c1\u6027\u548c\u5171\u4eab\u6027.\u4e3b\u8981\u6709\u4e24\u79cd\u94fe\u63a5\u5c5e\u6027\uff1a</p> <ol> <li>\u5916\u90e8\u94fe\u63a5\uff08External Linkage\uff09\uff1a\u5177\u6709\u5916\u90e8\u94fe\u63a5\u7684\u5b9e\u4f53\u5728\u6574\u4e2a\u7a0b\u5e8f\u4e2d\u53ef\u89c1,\u53ef\u4ee5\u88ab\u5176\u4ed6 translation units\uff08\u72ec\u7acb\u7684\u7f16\u8bd1\u5355\u5143,\u901a\u5e38\u662f\u4e0d\u540c\u7684\u6e90\u6587\u4ef6\uff09\u8bbf\u95ee\u548c\u4f7f\u7528.\u8fd9\u610f\u5473\u7740,\u5982\u679c\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u5177\u6709\u5916\u90e8\u94fe\u63a5\u7684\u5b9e\u4f53,\u5176\u4ed6\u6587\u4ef6\u4e5f\u53ef\u4ee5\u901a\u8fc7\u58f0\u660e\u6765\u5f15\u7528\u5b83,\u7136\u540e\u5728\u94fe\u63a5\u65f6\u5c06\u5176\u5408\u5e76.\u901a\u5e38,\u5168\u5c40\u53d8\u91cf\u548c\u51fd\u6570\u9ed8\u8ba4\u5177\u6709\u5916\u90e8\u94fe\u63a5.</li> </ol> <pre><code>// \u6587\u4ef61.c\nint global_variable = 10; // \u5177\u6709\u5916\u90e8\u94fe\u63a5\u7684\u5168\u5c40\u53d8\u91cf\n\n// \u6587\u4ef62.c\nextern int global_variable; // \u5f15\u7528\u6587\u4ef61.c\u4e2d\u7684\u5168\u5c40\u53d8\u91cf\n</code></pre> <ol> <li>\u5185\u90e8\u94fe\u63a5\uff08Internal Linkage\uff09\uff1a\u5177\u6709\u5185\u90e8\u94fe\u63a5\u7684\u5b9e\u4f53\u53ea\u5728\u5f53\u524d translation unit \u5185\u53ef\u89c1,\u5176\u4ed6 translation units \u65e0\u6cd5\u8bbf\u95ee.\u8fd9\u610f\u5473\u7740,\u5177\u6709\u5185\u90e8\u94fe\u63a5\u7684\u5b9e\u4f53\u53ea\u80fd\u5728\u5b9a\u4e49\u5b83\u4eec\u7684\u6587\u4ef6\u5185\u90e8\u4f7f\u7528,\u5176\u4ed6\u6587\u4ef6\u65e0\u6cd5\u76f4\u63a5\u5f15\u7528\u5b83\u4eec.\u901a\u5e38,\u4f7f\u7528 <code>static</code> \u4fee\u9970\u7b26\u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf\u548c\u51fd\u6570\u5177\u6709\u5185\u90e8\u94fe\u63a5.</li> </ol> <pre><code>// \u6587\u4ef61.c\nstatic int internal_variable = 20; // \u5177\u6709\u5185\u90e8\u94fe\u63a5\u7684\u9759\u6001\u5168\u5c40\u53d8\u91cf\nstatic void internal_function() {} // \u5177\u6709\u5185\u90e8\u94fe\u63a5\u7684\u9759\u6001\u51fd\u6570\n</code></pre> <pre><code>// \u6587\u4ef62.c\nextern int internal_variable; // \u9519\u8bef\uff1a\u65e0\u6cd5\u5f15\u7528\u5177\u6709\u5185\u90e8\u94fe\u63a5\u7684\u53d8\u91cf\n</code></pre> <p>\u603b\u4e4b,\u5916\u90e8\u94fe\u63a5\u7684\u5b9e\u4f53\u53ef\u4ee5\u5728\u591a\u4e2a\u6587\u4ef6\u4e4b\u95f4\u5171\u4eab,\u800c\u5185\u90e8\u94fe\u63a5\u7684\u5b9e\u4f53\u53ea\u80fd\u5728\u5f53\u524d\u6587\u4ef6\u5185\u90e8\u4f7f\u7528.\u8fd9\u79cd\u533a\u522b\u4f7f\u5f97\u6211\u4eec\u80fd\u591f\u66f4\u597d\u5730\u63a7\u5236\u7a0b\u5e8f\u4e2d\u5b9e\u4f53\u7684\u53ef\u89c1\u6027\u548c\u5171\u4eab\u6027.</p>"},{"location":"PA/PA/#_14","title":"\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u5728\u5934\u6587\u4ef6\u4e2d\u5b9e\u73b0\u51fd\u6570?","text":"<p><code>a.h</code>\u4e2d\u5b9e\u73b0\u4e00\u4e2a<code>foo</code>\u51fd\u6570,<code>b.c</code>\u548c<code>c.c</code>\u90fd\u5305\u542b\u4e86<code>a.h</code>,\u8fd9\u6837\u4f1a\u5bfc\u81f4<code>foo</code>\u51fd\u6570\u5728<code>b.c</code>\u548c<code>c.c</code>\u4e2d\u90fd\u88ab\u5b9a\u4e49\u4e86\u4e00\u6b21,\u8fd9\u6837\u4f1a\u5bfc\u81f4\u94fe\u63a5\u9519\u8bef.\u6240\u4ee5\u5728\u5934\u6587\u4ef6\u4e2d\u53ea\u80fd\u58f0\u660e\u51fd\u6570,\u4e0d\u80fd\u5b9e\u73b0\u51fd\u6570.include\u5c31\u662f\u5c06\u6587\u4ef6\u7684\u5185\u5bb9\u590d\u5236\u5230\u5f53\u524d\u6587\u4ef6\u4e2d,\u6240\u4ee5\u5982\u679c\u5728\u5934\u6587\u4ef6\u4e2d\u5b9e\u73b0\u51fd\u6570,\u90a3\u4e48\u8fd9\u4e2a\u51fd\u6570\u7684\u5b9a\u4e49\u5c31\u4f1a\u88ab\u590d\u5236\u5230\u6bcf\u4e2a\u5305\u542b\u8fd9\u4e2a\u5934\u6587\u4ef6\u7684\u6587\u4ef6\u4e2d,\u4ece\u800c\u5bfc\u81f4\u591a\u91cd\u5b9a\u4e49\u9519\u8bef.\u5982\u679c\u628afoo\u7684\u5b9e\u73b0\u5b9a\u4e49\u4e3astatic,\u90a3\u4e48\u5c31\u4e0d\u4f1a\u6709\u8fd9\u4e2a\u95ee\u9898,\u56e0\u4e3astatic\u4fee\u9970\u7684\u51fd\u6570\u53ea\u80fd\u5728\u5f53\u524d\u6587\u4ef6\u4e2d\u4f7f\u7528.</p>"},{"location":"PA/PA/#-werror-wall","title":"-Werror -Wall","text":"<p>-Werror\u9009\u9879\u4f1a\u5c06\u6240\u6709\u7684\u8b66\u544a\u90fd\u89c6\u4e3a\u9519\u8bef,\u8fd9\u610f\u5473\u7740\u5982\u679c\u4ee3\u7801\u4e2d\u6709\u4efb\u4f55\u8b66\u544a,\u7f16\u8bd1\u5668\u90fd\u4f1a\u62a5\u9519\u5e76\u505c\u6b62\u7f16\u8bd1.\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u53ef\u4ee5\u786e\u4fdd\u4ee3\u7801\u7684\u8d28\u91cf,\u56e0\u4e3a\u4efb\u4f55\u8b66\u544a\u90fd\u4f1a\u88ab\u89c6\u4e3a\u9519\u8bef,\u5f00\u53d1\u4eba\u5458\u5c31\u4f1a\u66f4\u52a0\u6ce8\u610f\u907f\u514d\u4ea7\u751f\u8b66\u544a.</p> <p>-Wall\u9009\u9879\u4f1a\u5f00\u542f\u6240\u6709\u7684\u8b66\u544a,\u8fd9\u610f\u5473\u7740\u7f16\u8bd1\u5668\u4f1a\u68c0\u67e5\u4ee3\u7801\u4e2d\u7684\u4efb\u4f55\u6f5c\u5728\u95ee\u9898\u5e76\u7ed9\u51fa\u8b66\u544a.\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u53ef\u4ee5\u5e2e\u52a9\u5f00\u53d1\u4eba\u5458\u53d1\u73b0\u4ee3\u7801\u4e2d\u7684\u6f5c\u5728\u95ee\u9898,\u5e76\u53ca\u65f6\u8fdb\u884c\u4fee\u590d.</p> <p>\u56e0\u6b64,\u4f7f\u7528-Werror -Wall\u9009\u9879\u53ef\u4ee5\u786e\u4fdd\u4ee3\u7801\u7684\u8d28\u91cf,\u5e76\u5e2e\u52a9\u5f00\u53d1\u4eba\u5458\u53d1\u73b0\u6f5c\u5728\u7684\u95ee\u9898,\u4ece\u800c\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u9760\u6027\u548c\u7a33\u5b9a\u6027.</p> <p>\u5982\u679c\u4f60\u5728\u5934\u6587\u4ef6\u4e2d\u5b9e\u73b0\u51fd\u6570,\u5e76\u4e14\u7ed9\u8fd9\u4e2a\u51fd\u6570\u6dfb\u52a0\u4e86<code>static</code>\u4fee\u9970\u7b26,\u90a3\u4e48\u8fd9\u4e2a\u51fd\u6570\u5c31\u53d8\u6210\u4e86\u9759\u6001\u51fd\u6570.\u9759\u6001\u51fd\u6570\u5728C\u8bed\u8a00\u4e2d\u6709\u7279\u6b8a\u7684\u542b\u4e49,\u5b83\u8868\u793a\u8fd9\u4e2a\u51fd\u6570\u53ea\u5728\u5b9a\u4e49\u5b83\u7684\u6587\u4ef6\u4e2d\u53ef\u89c1.</p> <p>\u8fd9\u6837\u505a\u53ef\u4ee5\u89e3\u51b3\u5728\u5934\u6587\u4ef6\u4e2d\u5b9e\u73b0\u51fd\u6570\u53ef\u80fd\u51fa\u73b0\u7684\u94fe\u63a5\u9519\u8bef\u95ee\u9898,\u56e0\u4e3a\u6bcf\u4e2a\u5305\u542b\u8fd9\u4e2a\u5934\u6587\u4ef6\u7684\u6e90\u6587\u4ef6\u90fd\u4f1a\u5f97\u5230\u8fd9\u4e2a\u51fd\u6570\u7684\u4e00\u4e2a\u79c1\u6709\u62f7\u8d1d,\u8fd9\u4e9b\u62f7\u8d1d\u5728\u94fe\u63a5\u9636\u6bb5\u4e0d\u4f1a\u4e92\u76f8\u51b2\u7a81.</p> <p>\u7136\u800c,\u8fd9\u4ecd\u7136\u4e0d\u80fd\u89e3\u51b3\u7f16\u8bd1\u65f6\u95f4\u548c\u4ee3\u7801\u91cd\u590d\u7684\u95ee\u9898.\u6bcf\u4e2a\u5305\u542b\u8fd9\u4e2a\u5934\u6587\u4ef6\u7684\u6e90\u6587\u4ef6\u5728\u7f16\u8bd1\u65f6\u90fd\u4f1a\u7f16\u8bd1\u8fd9\u4e2a\u51fd\u6570,\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7f16\u8bd1\u65f6\u95f4\u589e\u52a0.\u540c\u65f6,\u6bcf\u4e2a\u6e90\u6587\u4ef6\u90fd\u4f1a\u6709\u8fd9\u4e2a\u51fd\u6570\u7684\u4e00\u4efd\u62f7\u8d1d,\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5927\u5c0f\u589e\u52a0.</p> <p>\u6b64\u5916,\u8fd9\u79cd\u505a\u6cd5\u4e5f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u964d\u4f4e.\u901a\u5e38,\u6211\u4eec\u671f\u671b\u5728\u5934\u6587\u4ef6\u4e2d\u770b\u5230\u7684\u662f\u63a5\u53e3\u58f0\u660e,\u800c\u5728\u6e90\u6587\u4ef6\u4e2d\u770b\u5230\u7684\u662f\u63a5\u53e3\u7684\u5b9e\u73b0.\u5982\u679c\u5728\u5934\u6587\u4ef6\u4e2d\u770b\u5230\u4e86\u51fd\u6570\u7684\u5b9e\u73b0,\u8fd9\u53ef\u80fd\u4f1a\u8ba9\u4eba\u611f\u5230\u56f0\u60d1.</p> <p>\u56e0\u6b64,\u867d\u7136\u5728\u5934\u6587\u4ef6\u4e2d\u5b9e\u73b0\u9759\u6001\u51fd\u6570\u662f\u53ef\u4ee5\u7684,\u4f46\u901a\u5e38\u6211\u4eec\u8fd8\u662f\u63a8\u8350\u5728\u5934\u6587\u4ef6\u4e2d\u58f0\u660e\u51fd\u6570,\u5728\u6e90\u6587\u4ef6\u4e2d\u5b9e\u73b0\u51fd\u6570.</p> <p>\u5b9a\u4e49\u6210static inline\u7684\u51fd\u6570,\u53ef\u4ee5\u5728\u5934\u6587\u4ef6\u4e2d\u5b9a\u4e49,\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u591a\u91cd\u5b9a\u4e49\u9519\u8bef.\u8fd9\u79cd\u51fd\u6570\u4f1a\u88ab\u7f16\u8bd1\u5668\u5185\u8054,\u4f1a\u589e\u52a0\u7f16\u8bd1\u65f6\u95f4.\u8fd9\u79cd\u51fd\u6570\u9002\u5408\u4e8e\u77ed\u5c0f\u7684\u51fd\u6570,\u4f8b\u5982\u4e00\u4e9b\u7b80\u5355\u7684getter\u548csetter\u51fd\u6570.</p> <p>\u4ec0\u4e48\u53eb\u505a\u88ab\u7f16\u8bd1\u5668\u5185\u8054? \u5185\u8054\u51fd\u6570\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u51fd\u6570,\u5b83\u7684\u5b9a\u4e49\u548c\u58f0\u660e\u90fd\u5728\u4e00\u8d77,\u901a\u5e38\u5728\u5934\u6587\u4ef6\u4e2d.\u5185\u8054\u51fd\u6570\u7684\u7279\u70b9\u662f\u5728\u8c03\u7528\u5b83\u7684\u5730\u65b9\u76f4\u63a5\u5c55\u5f00,\u800c\u4e0d\u662f\u50cf\u666e\u901a\u51fd\u6570\u4e00\u6837\u751f\u6210\u4e00\u4e2a\u51fd\u6570\u8c03\u7528.\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u51fd\u6570\u8c03\u7528\u7684\u5f00\u9500,\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6267\u884c\u6548\u7387.</p>"},{"location":"PA/PA/#regex","title":"\u5173\u4e8eregex","text":"<p>REGEX(3)                                      Linux Programmer's Manual                                      REGEX(3)</p> <p>NAME        regcomp, regexec, regerror, regfree - POSIX regex functions + regcomp()  regcomp()  is  used  to  compile  a  regular  expression into a form that is suitable for subsequent regexec()        searches.</p> <pre><code>   regcomp() is supplied with preg, a pointer to a pattern buffer storage area; regex, a pointer to the null-ter\u2010\n   minated string and cflags, flags used to determine the type of compilation.\n\n   All  regular  expression  searching  must be done via a compiled pattern buffer, thus regexec() must always be\n   supplied with the address of a regcomp() initialized pattern buffer.\n</code></pre> <ul> <li>regexec()</li> </ul> <p>```bash        The regexec() function is used to match a null-terminated string against the precompiled pattern buffer preg.        The string is pointed to by string and the length of the string is len.  The eflags argument is used to deter\u2010        mine the type of matching that will be performed.   The regmatch_t structure which is the type of pmatch is defined in . <pre><code>       typedef struct {\n           regoff_t rm_so;\n           regoff_t rm_eo;\n       } regmatch_t;\n\n   Each  rm_so  element that is not -1 indicates the start offset of the next largest substring match within the string.  The relative rm_eo element indicates the end offset of the match, which is the offset of the first character after the matching text.\n</code></pre> <p>```</p>"},{"location":"PA/PA/#strtol","title":"strtol()","text":"<p>strtol()\u662fC\u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u6807\u51c6\u5e93\u51fd\u6570,\u7528\u4e8e\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u957f\u6574\u578b\u6570.\u5b83\u7684\u51fd\u6570\u539f\u578b\u5982\u4e0b\uff1a</p> <p><pre><code>long int strtol(const char *nptr, char **endptr, int base);\n</code></pre> strtol()\u51fd\u6570\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff1a<code>nptr</code>\u662f\u4e00\u4e2a\u6307\u5411\u5f85\u8f6c\u6362\u7684\u5b57\u7b26\u4e32\u7684\u6307\u9488,<code>endptr</code>\u662f\u4e00\u4e2a\u6307\u5411\u6307\u9488\u7684\u6307\u9488,<code>base</code>\u662f\u4e00\u4e2a\u6574\u6570,\u8868\u793a\u8f6c\u6362\u65f6\u6240\u4f7f\u7528\u7684\u8fdb\u5236.</p> <p>strtol()\u51fd\u6570\u4f1a\u5c06<code>nptr</code>\u6307\u5411\u7684\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u4e00\u4e2a\u957f\u6574\u578b\u6570,\u5e76\u8fd4\u56de\u8fd9\u4e2a\u6570.\u5982\u679c<code>endptr</code>\u4e0d\u662fNULL,\u90a3\u4e48strtol()\u4f1a\u5c06<code>nptr</code>\u4e2d\u7b2c\u4e00\u4e2a\u65e0\u6cd5\u8f6c\u6362\u7684\u5b57\u7b26\u7684\u6307\u9488\u8d4b\u503c\u7ed9<code>endptr</code>.\u5982\u679c<code>endptr</code>\u662fNULL,\u90a3\u4e48strtol()\u4f1a\u5ffd\u7565\u65e0\u6cd5\u8f6c\u6362\u7684\u5b57\u7b26.</p> <p><code>base</code>\u53c2\u6570\u8868\u793a\u8f6c\u6362\u65f6\u6240\u4f7f\u7528\u7684\u8fdb\u5236.\u5982\u679c<code>base</code>\u4e3a0,\u90a3\u4e48strtol()\u4f1a\u6839\u636e\u5b57\u7b26\u4e32\u7684\u683c\u5f0f\u81ea\u52a8\u5224\u65ad\u8fdb\u5236.\u5982\u679c<code>base</code>\u4e0d\u4e3a0,\u90a3\u4e48strtol()\u4f1a\u5c06\u5b57\u7b26\u4e32\u6309\u7167\u6307\u5b9a\u7684\u8fdb\u5236\u8fdb\u884c\u8f6c\u6362.</p> <p>strtol()\u51fd\u6570\u901a\u5e38\u7528\u4e8e\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6574\u6570,\u4f8b\u5982\uff1a</p> <p><pre><code>char str[] = \"12345\";\nchar *endptr;\nlong int num = strtol(str, &amp;endptr, 10);\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d,<code>strtol()</code>\u51fd\u6570\u5c06\u5b57\u7b26\u4e32<code>\"12345\"</code>\u8f6c\u6362\u4e3a\u4e00\u4e2a\u957f\u6574\u578b\u6570,\u5e76\u5c06\u7ed3\u679c\u5b58\u5165<code>num</code>\u4e2d.\u5982\u679c<code>endptr</code>\u4e0d\u662fNULL,\u90a3\u4e48<code>strtol()</code>\u4f1a\u5c06<code>str</code>\u4e2d\u7b2c\u4e00\u4e2a\u65e0\u6cd5\u8f6c\u6362\u7684\u5b57\u7b26\u7684\u6307\u9488\u8d4b\u503c\u7ed9<code>endptr</code>.</p> <p>\u603b\u7684\u6765\u8bf4,<code>strtol()</code>\u51fd\u6570\u662f\u4e00\u4e2a\u7528\u4e8e\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u957f\u6574\u578b\u6570\u7684\u6807\u51c6\u5e93\u51fd\u6570,\u5b83\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u8fdb\u5236\u8fdb\u884c\u8f6c\u6362,\u5e76\u4e14\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u4fbf\u7684\u65b9\u6cd5\u6765\u5904\u7406\u8f6c\u6362\u5931\u8d25\u7684\u60c5\u51b5.</p>"},{"location":"PA/PA/#strcmp","title":"strcmp()","text":"<p>strcmp()\u662fC\u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u6807\u51c6\u5e93\u51fd\u6570,\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32.\u5b83\u7684\u51fd\u6570\u539f\u578b\u5982\u4e0b\uff1a</p> <p><pre><code>int strcmp(const char *str1, const char *str2);\n</code></pre> strcmp()\u51fd\u6570\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a<code>str1</code>\u548c<code>str2</code>\u5206\u522b\u662f\u5f85\u6bd4\u8f83\u7684\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u6307\u9488.</p> <p>strcmp()\u51fd\u6570\u4f1a\u6bd4\u8f83<code>str1</code>\u548c<code>str2</code>\u6307\u5411\u7684\u5b57\u7b26\u4e32,\u5e76\u8fd4\u56de\u4e00\u4e2a\u6574\u6570.\u5982\u679c<code>str1</code>\u548c<code>str2</code>\u76f8\u7b49,\u90a3\u4e48strcmp()\u4f1a\u8fd4\u56de0.\u5982\u679c<code>str1</code>\u5c0f\u4e8e<code>str2</code>,\u90a3\u4e48strcmp()\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5c0f\u4e8e0\u7684\u6574\u6570.\u5982\u679c<code>str1</code>\u5927\u4e8e<code>str2</code>,\u90a3\u4e48strcmp()\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5927\u4e8e0\u7684\u6574\u6570.</p> <p>strcmp()\u51fd\u6570\u901a\u5e38\u7528\u4e8e\u6bd4\u8f83\u5b57\u7b26\u4e32,\u4f8b\u5982\uff1a</p> <p><pre><code>char str1[] = \"abc\";\nchar str2[] = \"def\";\nint result = strcmp(str1, str2);\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d,<code>strcmp()</code>\u51fd\u6570\u5c06\u5b57\u7b26\u4e32<code>\"abc\"</code>\u548c<code>\"def\"</code>\u8fdb\u884c\u6bd4\u8f83,\u5e76\u5c06\u7ed3\u679c\u5b58\u5165<code>result</code>\u4e2d.\u5982\u679c<code>result</code>\u7684\u503c\u4e3a0,\u90a3\u4e48<code>str1</code>\u548c<code>str2</code>\u76f8\u7b49.\u5982\u679c<code>result</code>\u7684\u503c\u5c0f\u4e8e0,\u90a3\u4e48<code>str1</code>\u5c0f\u4e8e<code>str2</code>.\u5982\u679c<code>result</code>\u7684\u503c\u5927\u4e8e0,\u90a3\u4e48<code>str1</code>\u5927\u4e8e<code>str2</code>.</p> <p>\u603b\u7684\u6765\u8bf4,<code>strcmp()</code>\u51fd\u6570\u662f\u4e00\u4e2a\u7528\u4e8e\u6bd4\u8f83\u5b57\u7b26\u4e32\u7684\u6807\u51c6\u5e93\u51fd\u6570,\u5b83\u53ef\u4ee5\u65b9\u4fbf\u5730\u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32,\u5e76\u6839\u636e\u6bd4\u8f83\u7ed3\u679c\u8fd4\u56de\u4e00\u4e2a\u6574\u6570.</p>"},{"location":"PA/PA/#const-char-str","title":"\u4e3a\u4ec0\u4e48\u8981\u7528const char *str","text":"<p>const char *str\u662f\u4e00\u4e2a\u6307\u5411\u5b57\u7b26\u7684\u6307\u9488,\u5b83\u6307\u5411\u7684\u5b57\u7b26\u662f\u5e38\u91cf,\u4e0d\u80fd\u88ab\u4fee\u6539.\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u53ef\u4ee5\u786e\u4fdd\u51fd\u6570\u4e0d\u4f1a\u610f\u5916\u5730\u4fee\u6539\u4f20\u5165\u7684\u5b57\u7b26\u4e32,\u4ece\u800c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u9760\u6027\u548c\u53ef\u7ef4\u62a4\u6027.</p>"},{"location":"PA/PA/#strncmp","title":"strncmp()","text":"<p>strncmp()\u662fC\u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u6807\u51c6\u5e93\u51fd\u6570,\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u524dn\u4e2a\u5b57\u7b26.\u5b83\u7684\u51fd\u6570\u539f\u578b\u5982\u4e0b\uff1a</p> <p><pre><code>int strncmp(const char *str1, const char *str2, size_t n);\n</code></pre> strncmp()\u51fd\u6570\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff1a<code>str1</code>\u548c<code>str2</code>\u5206\u522b\u662f\u5f85\u6bd4\u8f83\u7684\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u6307\u9488,<code>n</code>\u662f\u4e00\u4e2a\u65e0\u7b26\u53f7\u6574\u6570,\u8868\u793a\u8981\u6bd4\u8f83\u7684\u5b57\u7b26\u6570.</p> <p>strncmp()\u51fd\u6570\u4f1a\u6bd4\u8f83<code>str1</code>\u548c<code>str2</code>\u6307\u5411\u7684\u5b57\u7b26\u4e32\u7684\u524dn\u4e2a\u5b57\u7b26,\u5e76\u8fd4\u56de\u4e00\u4e2a\u6574\u6570.\u5982\u679c<code>str1</code>\u548c<code>str2</code>\u7684\u524dn\u4e2a\u5b57\u7b26\u76f8\u7b49,\u90a3\u4e48strncmp()\u4f1a\u8fd4\u56de0.\u5982\u679c<code>str1</code>\u7684\u524dn\u4e2a\u5b57\u7b26\u5c0f\u4e8e<code>str2</code>\u7684\u524dn\u4e2a\u5b57\u7b26,\u90a3\u4e48strncmp()\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5c0f\u4e8e0\u7684\u6574\u6570.\u5982\u679c<code>str1</code>\u7684\u524dn\u4e2a\u5b57\u7b26\u5927\u4e8e<code>str2</code>\u7684\u524dn\u4e2a\u5b57\u7b26,\u90a3\u4e48strncmp()\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5927\u4e8e0\u7684\u6574\u6570.</p> <p>strncmp()\u51fd\u6570\u901a\u5e38\u7528\u4e8e\u6bd4\u8f83\u5b57\u7b26\u4e32\u7684\u524dn\u4e2a\u5b57\u7b26,\u4f8b\u5982\uff1a</p> <p><pre><code>char str1[] = \"abc\";\nchar str2[] = \"def\";\nint result = strncmp(str1, str2, 2);\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d,<code>strncmp()</code>\u51fd\u6570\u5c06\u5b57\u7b26\u4e32<code>\"abc\"</code>\u548c<code>\"def\"</code>\u7684\u524d2\u4e2a\u5b57\u7b26\u8fdb\u884c\u6bd4\u8f83,\u5e76\u5c06\u7ed3\u679c\u5b58\u5165<code>result</code>\u4e2d.\u5982\u679c<code>result</code>\u7684\u503c\u4e3a0,\u90a3\u4e48<code>str1</code>\u548c<code>str2</code>\u7684\u524d2\u4e2a\u5b57\u7b26\u76f8\u7b49.\u5982\u679c<code>result</code>\u7684\u503c\u5c0f\u4e8e0,\u90a3\u4e48<code>str1</code>\u7684\u524d2\u4e2a\u5b57\u7b26\u5c0f\u4e8e<code>str2</code>\u7684\u524d2\u4e2a\u5b57\u7b26.\u5982\u679c<code>result</code>\u7684\u503c\u5927\u4e8e0,\u90a3\u4e48<code>str1</code>\u7684\u524d2\u4e2a\u5b57\u7b26\u5927\u4e8e<code>str2</code>\u7684\u524d2\u4e2a\u5b57\u7b26.</p> <p>\u603b\u7684\u6765\u8bf4,<code>strncmp()</code>\u51fd\u6570\u662f\u4e00\u4e2a\u7528\u4e8e\u6bd4\u8f83\u5b57\u7b26\u4e32\u7684\u524dn\u4e2a\u5b57\u7b26\u7684\u6807\u51c6\u5e93\u51fd\u6570,\u5b83\u53ef\u4ee5\u65b9\u4fbf\u5730\u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u524dn\u4e2a\u5b57\u7b26,\u5e76\u6839\u636e\u6bd4\u8f83\u7ed3\u679c\u8fd4\u56de\u4e00\u4e2a</p>"},{"location":"PA/PA/#_15","title":"\u8868\u8fbe\u5f0f\u6269\u5c55","text":"<p>\u8868\u8fbe\u5f0f\u6269\u5c55\u7684\u542b\u91d1\u91cf =&gt; \u672c\u6765\u662f\u4ec5\u652f\u6301\u5e38\u6570\u8fd0\u7b97,\u4f46\u662f\u8fd9\u5e76\u4e0d\u80fd\u7528\u5728\u540e\u9762\u7684\u8c03\u8bd5\u5de5\u7a0b =&gt; \u8981\u652f\u6301,\u5bf9Hex\u7684\u8bc6\u522b,\u5bf9-1,+1,\u5bf9\u6307\u9488\u89e3\u5f15\u7528,\u5bf9\u5bc4\u5b58\u5668\u7684\u8bc6\u522b. <code>+-*/</code>(\u4e8c\u5143\u8fd0\u7b97),<code>+-</code>(\u5355\u5143\u8fd0\u7b97),</p>"},{"location":"PA/PA/#_16","title":"\u5bf9\u91cd\u590d\u4ee3\u7801\u7684\u518d\u6b21\u62bd\u8c61","text":"<p><pre><code>word_t eval(int p,int q, bool *sucess){\n  if(p&gt;q){\n    // bad expression\n    *sucess = false;\n    return 0;\n  }\n  else if(p==q){\n    /* Single token.\n     * For now this token should be a number.\n     * Return the value of the number.\n     */\n    if(tokens[p].type != TK_NUM){\n      *sucess = false;\n      return 0;\n    }\n    return atoi(tokens[p].str);\n  }\n  else if(check_parentgeses(p,q)==true){\n    // remove the outermost brackets\n    return eval(p+1,q-1,sucess);\n  }else{\n    int op,val1,val2;\n    op = prioty(p,q);\n    if(op==-1){\n      *sucess = false;\n      return 0;\n    }\n    // val1 = eval(p,op-1,sucess);\n    // if(*sucess==false)return 0;\n    // val2 = eval(op+1,q,sucess);\n    // if(*sucess==false)return 0;\n    switch (tokens[op].type)\n    {\n    case '+':{\n      val1 = eval(p,op-1,sucess);\n      if(*sucess==false)return 0;\n      val2 = eval(op+1,q,sucess);\n      if(*sucess==false)return 0;\n      return val1+val2;\n    }\n    case '-':{\n      val1 = eval(p,op-1,sucess);\n      if(*sucess==false)return 0;\n      val2 = eval(op+1,q,sucess);\n      if(*sucess==false)return 0;\n      return val1-val2;\n    }\n    case '*':{\n      val1 = eval(p,op-1,sucess);\n      if(*sucess==false)return 0;\n      val2 = eval(op+1,q,sucess);\n      if(*sucess==false)return 0;\n      return val1*val2;}\n    case '/': {\n      val1 = eval(p,op-1,sucess);\n      if(*sucess==false)return 0;\n      val2 = eval(op+1,q,sucess);\n      if(*sucess==false)return 0;\n      if(val2==0){\n        *sucess = false;\n        return 0;\n      }\n      return val1 / val2;\n    }\n    case TK_NEG:{ \n      // printf(\"has been here\");\n      val2 = eval(op+1,q,sucess);\n      return -val2;\n    }\n    default: assert(0);\n    }\n  }\n  return 0;\n}\n</code></pre> \u6211\u91c7\u53d6\u7684\u89e3\u51b3\u65b9\u6cd5 <pre><code>    // Makes it easier for the program \n    //to run on machines with different word widths.\n    int len = MUXDEF(CONFIG_RV64, 8, 4);\n    int width = MUXDEF(CONFIG_RV64, 18, 10);\n    printf(ANSI_FMT(\"%#0*x: \", ANSI_FG_CYAN),width,expr);\n    for (j = 0; i &lt; n &amp;&amp; j &lt; len; i++, j++) {\n      word_t w = vaddr_read(expr, len);\n      expr += len;\n      printf(\"%#0*x \",width,w);\n    }\n    puts(\"\"); \n</code></pre> \u4e00\u5f00\u59cb\u6211\u4e0d\u7406\u89e3\u4e3a\u4ec0\u4e48\u8981\u5199\u4e00\u4e2a\u53cc\u5c42\u5faa\u73af <pre><code>(nemu) x 10 0x80000000\n0x80000000: 0x00000297 0x00028823 0x0102c503 0x00100073 \n0x80000010: 0xdeadbeef 0x65656565 0x65656565 0x65656565 \n0x80000020: 0x65656565 0x65656565 \n</code></pre> \u8981\u4fdd\u8bc1\u8fd9\u6837\u7684\u8f93\u51fa,\u5c31\u9700\u8981\u4e00\u4e2a\u53cc\u5c42\u5faa\u73af,\u7b2c\u4e00\u4e2a\u5faa\u73af\u662f\u4e3a\u4e86\u4fdd\u8bc1\u8f93\u51fa\u7684\u884c\u6570,\u7b2c\u4e8c\u4e2a\u5faa\u73af\u662f\u4e3a\u4e86\u4fdd\u8bc1\u8f93\u51fa\u7684\u5217\u6570,\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u8f93\u51fa\u7684\u683c\u5f0f\u662f\u6b63\u786e\u7684.</p>"},{"location":"PA/PA/#risc324riscv648","title":"\u5173\u4e8erisc32=&gt;4,riscv64=&gt;8","text":"<p>\u5904\u7406\u53f3\u7ed3\u5408\u7684\u6307\u9488\u89e3\u5f15\u7528(de+reference),\u9700\u8981\u6ce8\u610f\u7684\u662f <pre><code>static word_t calunary(word_t val,int op,bool *sucess){\n  switch (op)\n  {\n  case TK_DEREF:\n    return vaddr_read(val,4);\n  case TK_NEG:\n    return -val;\n  default:\n    *sucess = false;\n    return 0;\n  }\n}\n</code></pre></p>"},{"location":"PA/PA/#watch_point","title":"watch_point","text":"<p>\u8bf7\u544a\u8bc9\u6211gdb\u4e2d\u662f\u5982\u4f55\u4f7f\u7528\u76d1\u89c6\u70b9\u529f\u80fd\u7684 \u5728 GDB \u4e2d,\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u6765\u4f7f\u7528\u76d1\u89c6\u70b9\uff08watchpoint\uff09\u529f\u80fd\uff1a</p> <ol> <li>\u8bbe\u7f6e\u76d1\u89c6\u70b9\uff1a\u4f7f\u7528 <code>watch</code> \u547d\u4ee4\u6765\u8bbe\u7f6e\u4e00\u4e2a\u76d1\u89c6\u70b9.\u8fd9\u4e2a\u547d\u4ee4\u7684\u683c\u5f0f\u662f <code>watch expr</code>,\u5176\u4e2d <code>expr</code> \u662f\u4f60\u60f3\u8981\u76d1\u89c6\u7684\u8868\u8fbe\u5f0f.\u5f53\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\u53d1\u751f\u6539\u53d8\u65f6,\u7a0b\u5e8f\u7684\u6267\u884c\u5c31\u4f1a\u6682\u505c.\u4f8b\u5982,\u5982\u679c\u4f60\u60f3\u8981\u5728\u53d8\u91cf <code>x</code> \u7684\u503c\u53d1\u751f\u6539\u53d8\u65f6\u6682\u505c\u7a0b\u5e8f\u7684\u6267\u884c,\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</li> </ol> <pre><code>watch x\n</code></pre> <ol> <li> <p>\u67e5\u770b\u76d1\u89c6\u70b9\uff1a\u4f7f\u7528 <code>info watchpoints</code> \u547d\u4ee4\u6765\u67e5\u770b\u5f53\u524d\u8bbe\u7f6e\u7684\u6240\u6709\u76d1\u89c6\u70b9.\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u663e\u793a\u4e00\u4e2a\u5217\u8868,\u5217\u51fa\u6240\u6709\u5f53\u524d\u8bbe\u7f6e\u7684\u76d1\u89c6\u70b9.\u5bf9\u4e8e\u6bcf\u4e2a\u76d1\u89c6\u70b9,\u5b83\u4f1a\u663e\u793a\u76d1\u89c6\u70b9\u7684\u7f16\u53f7,\u76d1\u89c6\u7684\u8868\u8fbe\u5f0f,\u4ee5\u53ca\u8868\u8fbe\u5f0f\u7684\u5f53\u524d\u503c.</p> </li> <li> <p>\u5220\u9664\u76d1\u89c6\u70b9\uff1a\u4f7f\u7528 <code>delete</code> \u547d\u4ee4\u6765\u5220\u9664\u4e00\u4e2a\u76d1\u89c6\u70b9.\u4f60\u9700\u8981\u5728 <code>delete</code> \u547d\u4ee4\u540e\u9762\u52a0\u4e0a\u4f60\u60f3\u8981\u5220\u9664\u7684\u76d1\u89c6\u70b9\u7684\u7f16\u53f7.\u4f8b\u5982,\u5982\u679c\u4f60\u60f3\u8981\u5220\u9664\u7f16\u53f7\u4e3a 1 \u7684\u76d1\u89c6\u70b9,\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> </li> </ol> <pre><code>delete 1\n</code></pre> <p>\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>delete</code> \u547d\u4ee4\u800c\u4e0d\u5e26\u4efb\u4f55\u53c2\u6570\u6765\u5220\u9664\u6240\u6709\u7684\u65ad\u70b9\u548c\u76d1\u89c6\u70b9.</p> <p>\u8fd9\u5c31\u662f\u5728 GDB \u4e2d\u4f7f\u7528\u76d1\u89c6\u70b9\u529f\u80fd\u7684\u57fa\u672c\u6b65\u9aa4.\u8bf7\u6ce8\u610f,\u76d1\u89c6\u70b9\u662f\u4e00\u79cd\u5f3a\u5927\u7684\u5de5\u5177,\u4f46\u662f\u5b83\u4eec\u53ef\u80fd\u4f1a\u663e\u8457\u5730\u964d\u4f4e\u4f60\u7684\u7a0b\u5e8f\u7684\u8fd0\u884c\u901f\u5ea6,\u7279\u522b\u662f\u5f53\u4f60\u76d1\u89c6\u7684\u8868\u8fbe\u5f0f\u6d89\u53ca\u5230\u590d\u6742\u7684\u8ba1\u7b97\u6216\u8005\u5927\u91cf\u7684\u5185\u5b58\u8bbf\u95ee\u65f6.</p>"},{"location":"PA/PA/#pa2","title":"PA2","text":"<p>yemu\u6a21\u62df\u5668 <pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\n#define NREG 4\n#define NMEM 16\n\n// \u5b9a\u4e49\u6307\u4ee4\u683c\u5f0f\ntypedef union {\n  struct { uint8_t rs : 2, rt : 2, op : 4; } rtype;\n  struct { uint8_t addr : 4      , op : 4; } mtype;\n  uint8_t inst;\n} inst_t;\n//\n#define DECODE_R(inst) uint8_t rt = (inst).rtype.rt, rs = (inst).rtype.rs\n#define DECODE_M(inst) uint8_t addr = (inst).mtype.addr\n\nuint8_t pc = 0;       // PC, C\u8bed\u8a00\u4e2d\u6ca1\u67094\u4f4d\u7684\u6570\u636e\u7c7b\u578b, \u6211\u4eec\u91c7\u75288\u4f4d\u7c7b\u578b\u6765\u8868\u793a\nuint8_t R[NREG] = {}; // \u5bc4\u5b58\u5668\nuint8_t M[NMEM] = {   // \u5185\u5b58, \u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u8ba1\u7b97z = x + y\u7684\u7a0b\u5e8f\n  0b11100110,  // load  6#     | R[0] &lt;- M[y]\n  0b00000100,  // mov   r1, r0 | R[1] &lt;- R[0]\n  0b11100101,  // load  5#     | R[0] &lt;- M[x]\n  0b00010001,  // add   r0, r1 | R[0] &lt;- R[0] + R[1]\n  0b11110111,  // store 7#     | M[z] &lt;- R[0]\n  0b00010000,  // x = 16\n  0b00100001,  // y = 33\n  0b00000000,  // z = 0\n};\n\nint halt = 0; // \u7ed3\u675f\u6807\u5fd7\n\n// \u6267\u884c\u4e00\u6761\u6307\u4ee4\nvoid exec_once() {\n  inst_t this;\n  this.inst = M[pc]; // \u53d6\u6307\n  switch (this.rtype.op) {\n  //  \u64cd\u4f5c\u7801\u8bd1\u7801       \u64cd\u4f5c\u6570\u8bd1\u7801           \u6267\u884c\n    case 0b0000: { DECODE_R(this); R[rt]   = R[rs];   break; }\n    case 0b0001: { DECODE_R(this); R[rt]  += R[rs];   break; }\n    case 0b1110: { DECODE_M(this); R[0]    = M[addr]; break; }\n    case 0b1111: { DECODE_M(this); M[addr] = R[0];    break; }\n    default:\n      printf(\"Invalid instruction with opcode = %x, halting...\\n\", this.rtype.op);\n      halt = 1;\n      break;\n  }\n  pc ++; // \u66f4\u65b0PC\n}\n\nint main() {\n  while (1) {\n    exec_once();\n    if (halt) break;\n  }\n  printf(\"The result of 16 + 33 is %d\\n\", M[7]);\n  return 0;\n}\n</code></pre> \u88abPA2.1\u96be\u54ed\u4e86,\u770b\u4e0d\u660e\u767d\u8fd9\u4e2a\u5de8\u91cf\u7684\u5b8f(what can i say?),\u665a\u4e0a\u56de\u53bb\u628a\u8981\u4ea4\u5230\u90ae\u7bb1\u7684\u4e1c\u897f\u90fd\u586b\u5b8c.</p>"},{"location":"PA/PA/#gcc","title":"GCC\u63d0\u4f9b\u7684\u6807\u7b7e\u5730\u5740","text":"<p>\u4f7f\u7528\u4e86GCC\u63d0\u4f9b\u7684\u6807\u7b7e\u5730\u5740\u6269\u5c55\u529f\u80fd</p>"},{"location":"PA/PA/#gcc_1","title":"\u544a\u8bc9GCC\u603b\u662f\u5c1d\u8bd5\u5185\u8054","text":"<p><code>__attribute__((always_inline))</code> \u662fGCC\u7f16\u8bd1\u5668\u7684\u4e00\u4e2a\u7279\u6027,\u7528\u4e8e\u544a\u8bc9\u7f16\u8bd1\u5668\u603b\u662f\u5c1d\u8bd5\u5c06\u67d0\u4e2a\u51fd\u6570\u5185\u8054.\u8fd9\u662f\u4e00\u4e2a\u51fd\u6570\u5c5e\u6027,\u901a\u5e38\u5728\u51fd\u6570\u58f0\u660e\u4e4b\u524d\u4f7f\u7528.</p> <p>\u5185\u8054\u51fd\u6570\u662f\u4e00\u79cd\u4f18\u5316\u6280\u672f,\u5b83\u901a\u8fc7\u5c06\u51fd\u6570\u8c03\u7528\u66ff\u6362\u4e3a\u51fd\u6570\u4f53\u7684\u5185\u5bb9\u6765\u51cf\u5c11\u51fd\u6570\u8c03\u7528\u7684\u5f00\u9500.\u7136\u800c,\u5185\u8054\u51fd\u6570\u5e76\u4e0d\u603b\u662f\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6027\u80fd,\u56e0\u4e3a\u5b83\u53ef\u80fd\u4f1a\u589e\u52a0\u7a0b\u5e8f\u7684\u5927\u5c0f,\u5e76\u53ef\u80fd\u5f71\u54cd\u6307\u4ee4\u7f13\u5b58\u7684\u6548\u7387.\u56e0\u6b64,\u7f16\u8bd1\u5668\u901a\u5e38\u4f1a\u6839\u636e\u51fd\u6570\u7684\u5927\u5c0f\u548c\u590d\u6742\u6027\u6765\u51b3\u5b9a\u662f\u5426\u5c06\u5176\u5185\u8054.</p> <p>\u7136\u800c,<code>__attribute__((always_inline))</code>\u5c5e\u6027\u544a\u8bc9\u7f16\u8bd1\u5668\u65e0\u8bba\u51fd\u6570\u7684\u5927\u5c0f\u548c\u590d\u6742\u6027\u5982\u4f55,\u90fd\u5e94\u8be5\u5c1d\u8bd5\u5c06\u5176\u5185\u8054.\u8fd9\u5bf9\u4e8e\u4e00\u4e9b\u5173\u952e\u7684\u3001\u6027\u80fd\u654f\u611f\u7684\u51fd\u6570\u53ef\u80fd\u662f\u6709\u7528\u7684,\u4f46\u5e94\u8be5\u8c28\u614e\u4f7f\u7528,\u4ee5\u907f\u514d\u589e\u52a0\u7a0b\u5e8f\u7684\u5927\u5c0f\u548c\u964d\u4f4e\u6307\u4ee4\u7f13\u5b58\u7684\u6548\u7387.</p> <p>\u8bf7\u6ce8\u610f,\u8fd9\u4e2a\u5c5e\u6027\u662fGCC\u7279\u6709\u7684,\u4e0d\u662f\u6807\u51c6C++\u7684\u4e00\u90e8\u5206.\u5982\u679c\u4f60\u7684\u4ee3\u7801\u9700\u8981\u5728\u5176\u4ed6\u7f16\u8bd1\u5668\u4e0a\u7f16\u8bd1,\u4f60\u53ef\u80fd\u9700\u8981\u627e\u5230\u4e00\u4e2a\u7b49\u6548\u7684\u5c5e\u6027\u6216\u8005\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\u6765\u63a7\u5236\u51fd\u6570\u7684\u5185\u8054\u884c\u4e3a. </p>"},{"location":"PA/PA/#_17","title":"\u67e5\u770b\u590d\u6742\u5de5\u7a0b\u4e2d\u67d0\u4e2a\u7279\u5b9a\u6587\u4ef6\u7684\u7f16\u8bd1\u8fc7\u7a0b","text":"<p>\u5728C\u8bed\u8a00\u4e2d,\u5b8f\u662f\u4e00\u79cd\u9884\u5904\u7406\u5668\u6307\u4ee4,\u7528\u4e8e\u5728\u7f16\u8bd1\u65f6\u5c06\u4ee3\u7801\u7247\u6bb5\u66ff\u6362\u4e3a\u6307\u5b9a\u7684\u6587\u672c.\u5b8f\u5c55\u5f00\u662f\u6307\u5c06\u5b8f\u8c03\u7528\u66ff\u6362\u4e3a\u5b8f\u5b9a\u4e49\u7684\u6587\u672c\u7684\u8fc7\u7a0b.</p> <p>\u5982\u679c\u4f60\u60f3\u67e5\u770bC\u6587\u4ef6\u4e2d\u590d\u6742\u5b8f\u7684\u5c55\u5f00\u7ed3\u679c,\u53ef\u4ee5\u4f7f\u7528GCC\u7684\u9884\u5904\u7406\u5668\u9009\u9879<code>-E</code>.\u8fd9\u4e2a\u9009\u9879\u4f1a\u8ba9GCC\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u53ea\u8fdb\u884c\u9884\u5904\u7406,\u7136\u540e\u5c06\u9884\u5904\u7406\u7684\u7ed3\u679c\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa.</p> <p>\u4f8b\u5982,\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u540d\u4e3a<code>main.c</code>\u7684\u6587\u4ef6,\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u67e5\u770b\u5b8f\u7684\u5c55\u5f00\u7ed3\u679c\uff1a</p> <pre><code>gcc -E main.c\n</code></pre> <p>\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5c06<code>main.c</code>\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u5b8f\u90fd\u5c55\u5f00,\u5e76\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u63a7\u5236\u53f0.\u5982\u679c\u4f60\u60f3\u5c06\u7ed3\u679c\u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d,\u4f60\u53ef\u4ee5\u4f7f\u7528\u91cd\u5b9a\u5411\uff1a</p> <pre><code>gcc -E main.c &gt; preprocessed.c\n</code></pre> <p>\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5c06\u5b8f\u5c55\u5f00\u7684\u7ed3\u679c\u4fdd\u5b58\u5230<code>preprocessed.c</code>\u6587\u4ef6\u4e2d.</p> <p>\u5bf9\u4e8e\u590d\u6742\u7684\u5de5\u7a0b\u6587\u4ef6,\u4f60\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528GCC\u7684\u9884\u5904\u7406\u5668\u9009\u9879<code>-E</code>\u6765\u67e5\u770b\u5b8f\u7684\u5c55\u5f00\u7ed3\u679c.\u4f46\u662f,\u4f60\u53ef\u80fd\u9700\u8981\u6307\u5b9a\u4e00\u4e9b\u989d\u5916\u7684\u7f16\u8bd1\u9009\u9879,\u6bd4\u5982\u5934\u6587\u4ef6\u7684\u8def\u5f84\u3001\u9884\u5b9a\u4e49\u7684\u5b8f\u7b49.</p> <p>\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fmake\u5de5\u5177\u6765\u6784\u5efa\u4f60\u7684\u9879\u76ee,\u4f60\u53ef\u4ee5\u4fee\u6539Makefile,\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u76ee\u6807\u6765\u751f\u6210\u9884\u5904\u7406\u7684\u6587\u4ef6.\u4f8b\u5982\uff1a</p> <pre><code>.PHONY: preprocess\npreprocess:\n    gcc -E $(CFLAGS) main.c -o preprocessed.c\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d,<code>$(CFLAGS)</code>\u662f\u4e00\u4e2a\u53d8\u91cf,\u5b83\u5305\u542b\u4e86\u4f60\u7684\u9879\u76ee\u9700\u8981\u7684\u6240\u6709\u7f16\u8bd1\u9009\u9879.<code>main.c</code>\u662f\u4f60\u60f3\u8981\u9884\u5904\u7406\u7684\u6587\u4ef6,<code>preprocessed.c</code>\u662f\u751f\u6210\u7684\u9884\u5904\u7406\u6587\u4ef6.</p> <p>\u7136\u540e,\u4f60\u53ef\u4ee5\u4f7f\u7528<code>make preprocess</code>\u547d\u4ee4\u6765\u751f\u6210\u9884\u5904\u7406\u6587\u4ef6.</p> <p>\u5982\u679c\u4f60\u7684\u9879\u76ee\u4f7f\u7528\u7684\u662f\u5176\u4ed6\u6784\u5efa\u5de5\u5177\uff08\u5982CMake\u3001Bazel\u7b49\uff09,\u4f60\u53ef\u80fd\u9700\u8981\u67e5\u9605\u76f8\u5e94\u7684\u6587\u6863\u6765\u4e86\u89e3\u5982\u4f55\u751f\u6210\u9884\u5904\u7406\u6587\u4ef6. \u6839\u636e\u4f60\u60f3\u8981\u5c55\u5f00\u7684\u6587\u4ef6\u7684\u590d\u6742\u6027,\u4f60\u53ef\u80fd\u9700\u8981\u8c03\u6574\u7f16\u8bd1\u9009\u9879\u548c\u9884\u5904\u7406\u5668\u9009\u9879.</p>"},{"location":"PA/PA/#make-nb","title":"make -nB","text":"<p><code>make -n</code>\u6216\u8005<code>make --just-print</code>\u9009\u9879\u662f\u7528\u6765\u663e\u793amake\u547d\u4ee4\u5c06\u8981\u6267\u884c\u7684\u64cd\u4f5c,\u4f46\u662f\u5e76\u4e0d\u771f\u6b63\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c.\u8fd9\u4e2a\u9009\u9879\u901a\u5e38\u7528\u4e8e\u67e5\u770bmake\u547d\u4ee4\u7684\u6267\u884c\u8fc7\u7a0b,\u4ee5\u4fbf\u68c0\u67e5makefile\u6587\u4ef6\u662f\u5426\u6b63\u786e\u914d\u7f6e.</p> <p>\u901a\u8fc7<code>make -nB | vim -</code>\u6765\u5b9a\u4f4d\u67d0\u4e2a\u7279\u5b9a\u6587\u4ef6\u7684\u7f16\u8bd1\u8fc7\u7a0b.</p> <p><pre><code>gcc -O2 -MMD -Wall -Werror -I/home/along/ysyx-workbench/nemu/include -I/home/along/ysyx-workbench/nemu/src/isa/riscv32/include -I/home/along/ysyx-workbench/nemu/src/engine/interpreter -O2  -Og -ggdb3  -DITRACE_COND=true -D__GUEST_ISA__=riscv32 -c -o /home/along/ysyx-workbench/nemu/build/obj-riscv32-nemu-interpreter/src/isa/riscv32/inst.o src/isa/riscv32/inst.c\n</code></pre> \u628a<code>-o</code>=&gt;<code>-E</code>\u518d\u628a\u6700\u540e\u9762\u52a0\u4e2a<code>| vim -</code>\u7ecf\u8fc7\u7b80\u5355\u7684\u4fee\u6539\u540e\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u770b\u5230\u5b8f\u5c55\u5f00\u7684\u6837\u5b50.</p> <pre><code>  { const void ** __instpat_end = &amp;&amp;__instpat_end_;;\n  do { uint64_t key, mask, shift; pattern_decode(\"0000000 00001 00000 000 00000 11100 11\", (sizeof(\"0000000 00001 00000 000 00000 11100 11\") - 1), &amp;key, &amp;mask, &amp;shift); \n    if ((((uint64_t)((s)-&gt;isa.inst.val) &gt;&gt; shift) &amp; mask) == key) { \n      { \n        decode_operand(s, &amp;rd, &amp;src1, &amp;src2, &amp;imm, TYPE_R); \n        set_nemu_state(NEMU_END, s-&gt;pc, (cpu.gpr[check_reg_idx(10)])) ; \n      }; \n      goto *(__instpat_end); \n    } \n  } while (0);\n  do { uint64_t key, mask, shift; pattern_decode(\"0000000 00001 00000 000 00000 11100 11\", (sizeof(\"0000000 00001 00000 000 00000 11100 11\") - 1), &amp;key, &amp;mask, &amp;shift); \n    if ((((uint64_t)((s)-&gt;isa.inst.val) &gt;&gt; shift) &amp; mask) == key) { \n      { \n        decode_operand(s, &amp;rd, &amp;src1, &amp;src2, &amp;imm, TYPE_N); \n        set_nemu_state(NEMU_END, s-&gt;pc, (cpu.gpr[check_reg_idx(10)])) ; \n      }; \n      goto *(__instpat_end); \n    } \n  } while (0);\n\n  do { uint64_t key, mask, shift; pattern_decode(\"??????? ????? ????? ??? ????? ????? ??\", (sizeof(\"??????? ????? ????? ??? ????? ????? ??\") - 1), &amp;key, &amp;mask, &amp;shift); \n    if ((((uint64_t)((s)-&gt;isa.inst.val) &gt;&gt; shift) &amp; mask) == key) { \n      { \n        decode_operand(s, &amp;rd, &amp;src1, &amp;src2, &amp;imm, TYPE_N); \n        invalid_inst(s-&gt;pc) ; \n      }; \n      goto *(__instpat_end); \n    } \n  } while (0);\n\n  __instpat_end_: ; };\n\n  (cpu.gpr[check_reg_idx(0)]) = 0;\n\n  return 0;\n}\n\nint isa_exec_once(Decode *s) {\n  s-&gt;isa.inst.val = inst_fetch(&amp;s-&gt;snpc, 4);\n  return decode_exec(s);\n}\n</code></pre>"},{"location":"PA/PA/#dummy","title":"dummy","text":"<p><pre><code>\u279c   make ARCH=$ISA-nemu ALL=dummy run\n# Building dummy-run [-nemu]\n/home/along/ysyx-workbench/abstract-machine/Makefile:30: *** Expected $ARCH in {loongarch32r-nemu mips32-nemu native riscv32e-nemu riscv32e-npc riscv32-nemu riscv64-nemu spike x86_64-qemu x86-nemu x86-qemu}, Got \"-nemu\".  Stop.\n dummy\n[         dummy] FAIL!\n\n\u279c   make ARCH=riscv32-nemu ALL=dummy run  \n# Building dummy-run [riscv32-nemu]\n+ CC tests/dummy.c\ncc1: error: \u2018-march=rv32im_zicsr\u2019: unsupported ISA subset \u2018z\u2019\nmake[1]: *** [/home/along/ysyx-workbench/abstract-machine/Makefile:110: /home/along/ysyx-workbench/am-kernels/tests/cpu-tests/build/riscv32-nemu/tests/dummy.o] Error 1\n dummy\n[         dummy] FAIL!\n</code></pre> \u62a5\u9519\u539f\u56e0\u662friscv\u7684\u4ea4\u53c9\u7f16\u8bd1\u5668\u7248\u672c\u8001\u4e86.</p> <p>\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u8981\u4e48\u81ea\u884c\u7f16\u8bd1\u4e00\u4e2a\u65b0\u7684\u4ea4\u53c9\u7f16\u8bd1\u5668,\u8981\u4e48\u76f4\u63a5\u4e0b\u538b\u7f29\u5305</p> <p><code>/opt</code> \u662f Linux \u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u76ee\u5f55,\u901a\u5e38\u7528\u4e8e\u5b58\u653e\u53ef\u9009\u7684\u5e94\u7528\u7a0b\u5e8f\u8f6f\u4ef6\u5305.</p> <p>\u5728 Linux \u7cfb\u7edf\u4e2d,<code>/opt</code> \u76ee\u5f55\u901a\u5e38\u7528\u4e8e\u5b58\u653e\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u6216\u989d\u5916\u7684\u8f6f\u4ef6\u5305,\u8fd9\u4e9b\u8f6f\u4ef6\u5305\u53ef\u80fd\u4e0d\u662f\u7531\u7cfb\u7edf\u7684\u5305\u7ba1\u7406\u5668\u7ba1\u7406\u7684.\u4f8b\u5982,\u4e00\u4e9b\u5546\u4e1a\u8f6f\u4ef6,\u5982 Oracle \u6570\u636e\u5e93,\u53ef\u80fd\u4f1a\u9009\u62e9\u5728 <code>/opt</code> \u76ee\u5f55\u4e0b\u5b89\u88c5.</p> <p>\u5728 <code>/opt</code> \u76ee\u5f55\u4e0b\u5b89\u88c5\u8f6f\u4ef6\u53ef\u4ee5\u4f7f\u5f97\u7cfb\u7edf\u7684\u5176\u4ed6\u90e8\u5206\u4fdd\u6301\u6574\u6d01,\u56e0\u4e3a\u6240\u6709\u7684\u6587\u4ef6\u90fd\u5728 <code>/opt</code> \u4e0b\u7684\u4e00\u4e2a\u76ee\u5f55\u4e2d,\u8fd9\u4f7f\u5f97\u5378\u8f7d\u8f6f\u4ef6\u53d8\u5f97\u975e\u5e38\u7b80\u5355,\u53ea\u9700\u8981\u5220\u9664\u8fd9\u4e2a\u76ee\u5f55\u5373\u53ef.</p> <p>\u603b\u7684\u6765\u8bf4,<code>/opt</code> \u662f\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u53ef\u9009\u8f6f\u4ef6\u5305\u7684\u76ee\u5f55.</p> <p>\u672c\u6765\u4e00\u76f4\u6ca1\u6709\u6253\u7b97\u641c\u7d22\u62a5\u9519\u7684,\u6700\u540e\u8fd8\u662f\u641c\u7d22\u4e86\u62a5\u9519.</p>"},{"location":"PA/PA/#dummy_1","title":"dummy\u8fd0\u884c","text":"<p><pre><code>(nemu) s\ninvalid opcode(PC = 0x80000000):\n    13 04 00 00 17 91 00 00 ...\n    00000413 00009117...\nThere are two cases which will trigger this unexpected exception:\n1. The instruction at PC = 0x80000000 is not implemented.\n2. Something is implemented incorrectly.\nFind this PC(0x80000000) in the disassembling result to distinguish which case it is.\n\nIf it is the first case, see\n       _                         __  __                         _ \n      (_)                       |  \\/  |                       | |\n  _ __ _ ___  ___ ________   __ | \\  / | __ _ _ __  _   _  __ _| |\n | '__| / __|/ __|______\\ \\ / / | |\\/| |/ _` | '_ \\| | | |/ _` | |\n | |  | \\__ \\ (__        \\ V /  | |  | | (_| | | | | |_| | (_| | |\n |_|  |_|___/\\___|        \\_/   |_|  |_|\\__,_|_| |_|\\__,_|\\__,_|_|\n\nfor more details.\n\nIf it is the second case, remember:\n* The machine is always right!\n* Every line of untested code is always wrong!\n\n0x80000000: 00 00 04 13 addi    s0, zero, 0\n[src/cpu/cpu-exec.c:121 cpu_exec] nemu: ABORT at pc = 0x80000000\n[src/cpu/cpu-exec.c:89 statistic] host time spent = 311 us\n[src/cpu/cpu-exec.c:90 statistic] total guest instructions = 1\n[src/cpu/cpu-exec.c:91 statistic] simulation frequency = 3,215 inst/s\n</code></pre> \u5b66\u4e60 RISC-V \u7684\u8bed\u4e49\u548c\u6307\u4ee4\u683c\u5f0f\u662f\u7406\u89e3\u548c\u4f7f\u7528\u8fd9\u4e00\u73b0\u4ee3\u6307\u4ee4\u96c6\u67b6\u6784\u7684\u5173\u952e.RISC-V \u662f\u4e00\u4e2a\u5f00\u6e90\u3001\u7b80\u6d01\u3001\u6a21\u5757\u5316\u7684\u6307\u4ee4\u96c6\u67b6\u6784,\u8bbe\u8ba1\u7528\u4e8e\u5404\u79cd\u8ba1\u7b97\u8bbe\u5907,\u4ece\u5d4c\u5165\u5f0f\u7cfb\u7edf\u5230\u8d85\u7ea7\u8ba1\u7b97\u673a\u90fd\u53ef\u4ee5\u4f7f\u7528.\u4ee5\u4e0b\u662f RISC-V \u7684\u8bed\u4e49\u548c\u6307\u4ee4\u683c\u5f0f\u7684\u57fa\u672c\u4ecb\u7ecd\uff1a</p>"},{"location":"PA/PA/#risc-v","title":"RISC-V \u6307\u4ee4\u96c6\u6982\u8ff0","text":"<ol> <li>\u7b80\u4ecb\uff1a</li> <li>RISC-V\uff08\u53d1\u97f3\u4e3a \"risk-five\"\uff09\u662f\u4e00\u4e2a\u57fa\u4e8e\u7cbe\u7b80\u6307\u4ee4\u96c6\uff08RISC\uff09\u539f\u5219\u7684\u5f00\u653e\u6307\u4ee4\u96c6\u67b6\u6784\uff08ISA\uff09.</li> <li> <p>\u8bbe\u8ba1\u7b80\u6d01,\u5305\u542b\u4e86\u57fa\u672c\u7684\u6307\u4ee4\u96c6\u548c\u6807\u51c6\u7684\u6269\u5c55,\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u8fdb\u884c\u81ea\u5b9a\u4e49\u6269\u5c55.</p> </li> <li> <p>\u6307\u4ee4\u683c\u5f0f\uff1a</p> </li> <li> <p>RISC-V \u6307\u4ee4\u6709\u56fa\u5b9a\u7684\u957f\u5ea6\uff08\u901a\u5e38\u4e3a 32 \u4f4d\uff09,\u53ef\u4ee5\u5206\u4e3a\u4e0d\u540c\u7684\u7c7b\u578b\uff1aR \u7c7b\u578b\uff08\u5bc4\u5b58\u5668-\u5bc4\u5b58\u5668\u64cd\u4f5c\uff09\u3001I \u7c7b\u578b\uff08\u7acb\u5373\u6570\u64cd\u4f5c\uff09\u3001S \u7c7b\u578b\uff08\u5b58\u50a8\u64cd\u4f5c\uff09\u3001B \u7c7b\u578b\uff08\u5206\u652f\u64cd\u4f5c\uff09\u3001U \u7c7b\u578b\uff08\u65e0\u6761\u4ef6\u8df3\u8f6c\uff09\u3001J \u7c7b\u578b\uff08\u6761\u4ef6\u8df3\u8f6c\uff09\u7b49.</p> </li> <li> <p>\u5bc4\u5b58\u5668\uff1a</p> </li> <li> <p>RISC-V \u4f7f\u7528\u6574\u6570\u5bc4\u5b58\u5668\uff08\u901a\u5e38\u6709 32 \u4e2a,\u547d\u540d\u4e3a x0 \u5230 x31\uff09,\u4ee5\u53ca\u4e00\u4e9b\u7279\u6b8a\u7528\u9014\u7684\u5bc4\u5b58\u5668\uff08\u5982\u7a0b\u5e8f\u8ba1\u6570\u5668 PC\u3001\u6808\u6307\u9488 SP \u7b49\uff09.</p> </li> <li> <p>\u6307\u4ee4\u8bed\u4e49\uff1a</p> </li> <li>\u6bcf\u6761\u6307\u4ee4\u90fd\u6709\u660e\u786e\u5b9a\u4e49\u7684\u64cd\u4f5c,\u6d89\u53ca\u5bc4\u5b58\u5668\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u3001\u7b97\u672f\u8fd0\u7b97\u3001\u903b\u8f91\u8fd0\u7b97\u3001\u5185\u5b58\u8bbf\u95ee\u548c\u63a7\u5236\u6d41\u64cd\u4f5c\u7b49.</li> <li>\u6307\u4ee4\u7684\u8bed\u4e49\u7531\u64cd\u4f5c\u7801\uff08opcode\uff09\u548c\u64cd\u4f5c\u6570\uff08operands\uff09\u7ec4\u6210,\u64cd\u4f5c\u6570\u53ef\u4ee5\u662f\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570\u6216\u5185\u5b58\u5730\u5740.</li> </ol>"},{"location":"PA/PA/#_18","title":"\u6307\u4ee4\u683c\u5f0f\u793a\u4f8b","text":""},{"location":"PA/PA/#r-","title":"R \u7c7b\u578b\u6307\u4ee4\uff08\u5bc4\u5b58\u5668-\u5bc4\u5b58\u5668\u64cd\u4f5c\uff09","text":"<p>R \u7c7b\u578b\u6307\u4ee4\u7528\u4e8e\u5bc4\u5b58\u5668\u4e4b\u95f4\u7684\u64cd\u4f5c,\u5982\u52a0\u6cd5\u3001\u51cf\u6cd5\u7b49.</p> <pre><code>  31    25 24   20 19   15 14   12 11    7 6     0\n+-------+-------+-------+-------+-------+-------+\n| funct7|  rs2  |  rs1  | funct3|   rd  | opcode|\n+-------+-------+-------+-------+-------+-------+\n</code></pre> <ul> <li><code>opcode</code>: \u64cd\u4f5c\u7801,\u6307\u5b9a\u64cd\u4f5c\u7c7b\u578b\uff08\u5982\u7b97\u672f\u8fd0\u7b97\u3001\u903b\u8f91\u8fd0\u7b97\u7b49\uff09.</li> <li><code>rd</code>: \u76ee\u6807\u5bc4\u5b58\u5668.</li> <li><code>rs1</code>\u3001<code>rs2</code>: \u6e90\u5bc4\u5b58\u5668.</li> <li><code>funct3</code>\u3001<code>funct7</code>: \u9488\u5bf9\u64cd\u4f5c\u7684\u5177\u4f53\u529f\u80fd\u7801.</li> </ul>"},{"location":"PA/PA/#i","title":"I \u7c7b\u578b\u6307\u4ee4\uff08\u7acb\u5373\u6570\u64cd\u4f5c\uff09","text":"<p>I \u7c7b\u578b\u6307\u4ee4\u7528\u4e8e\u5c06\u7acb\u5373\u6570\u4e0e\u5bc4\u5b58\u5668\u5185\u5bb9\u8fdb\u884c\u64cd\u4f5c,\u5982\u52a0\u8f7d\u3001\u5b58\u50a8\u3001\u79fb\u4f4d\u7b49.</p> <pre><code>  31    20 19   15 14   12 11    7 6     0\n+-------+-------+-------+-------+-------+-------+\n| imm[11:0] |  rs1  | funct3|   rd  | opcode|\n+-------+-------+-------+-------+-------+-------+\n</code></pre> <ul> <li><code>opcode</code>: \u64cd\u4f5c\u7801.</li> <li><code>rd</code>: \u76ee\u6807\u5bc4\u5b58\u5668.</li> <li><code>rs1</code>: \u6e90\u5bc4\u5b58\u5668.</li> <li><code>imm[11:0]</code>: 12 \u4f4d\u7684\u7acb\u5373\u6570.</li> </ul>"},{"location":"PA/PA/#s","title":"S \u7c7b\u578b\u6307\u4ee4\uff08\u5b58\u50a8\u64cd\u4f5c\uff09","text":"<p>S \u7c7b\u578b\u6307\u4ee4\u7528\u4e8e\u5b58\u50a8\u6570\u636e\u5230\u5185\u5b58.</p> <pre><code>  31    25 24   20 19   15 14   12 11    7 6     0\n+-------+-------+-------+-------+-------+-------+\n| imm[11:5]|  rs2  |  rs1  | funct3| imm[4:0]| opcode|\n+-------+-------+-------+-------+-------+-------+\n</code></pre> <ul> <li><code>opcode</code>: \u64cd\u4f5c\u7801.</li> <li><code>rs1</code>\u3001<code>rs2</code>: \u76f8\u5173\u5bc4\u5b58\u5668.</li> <li><code>imm[11:0]</code>: 12 \u4f4d\u7684\u7acb\u5373\u6570,\u7528\u4e8e\u6307\u5b9a\u5b58\u50a8\u7684\u504f\u79fb\u91cf.</li> </ul>"},{"location":"PA/PA/#_19","title":"\u5b66\u4e60\u8d44\u6e90\u63a8\u8350","text":"<p>\u5982\u679c\u4f60\u5e0c\u671b\u6df1\u5165\u4e86\u89e3 RISC-V \u7684\u8bed\u4e49\u548c\u6307\u4ee4\u683c\u5f0f,\u4ee5\u4e0b\u8d44\u6e90\u53ef\u80fd\u4f1a\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\uff1a</p> <ul> <li>RISC-V \u6307\u4ee4\u96c6\u624b\u518c</li> <li>RISC-V \u6559\u80b2\u57fa\u91d1\u4f1a\u7684\u6559\u80b2\u8d44\u6e90</li> <li>RISC-V \u76f8\u5173\u7684\u5f00\u653e\u8bfe\u7a0b\u548c\u5728\u7ebf\u5b66\u4e60\u5e73\u53f0\uff08\u5982 Coursera\u3001edX \u4e0a\u7684\u76f8\u5173\u8bfe\u7a0b\uff09</li> </ul> <p>\u901a\u8fc7\u8fd9\u4e9b\u8d44\u6e90,\u4f60\u53ef\u4ee5\u7cfb\u7edf\u5730\u5b66\u4e60\u548c\u7406\u89e3 RISC-V \u7684\u6307\u4ee4\u96c6\u67b6\u6784\u3001\u6307\u4ee4\u683c\u5f0f\u4ee5\u53ca\u64cd\u4f5c\u8bed\u4e49,\u4e3a\u8fdb\u4e00\u6b65\u7684\u5b66\u4e60\u548c\u5f00\u53d1\u5e94\u7528\u6253\u4e0b\u575a\u5b9e\u7684\u57fa\u7840.</p>"},{"location":"PA/PA/#ysyx-workbencham-kernelstestscpu-testsmakefile","title":"ysyx-workbench/am-kernels/tests/cpu-tests/makefile","text":"<p><code>make ARCH=$ISA-nemu ALL=dummy</code></p>"},{"location":"PA/PA/#result","title":"&gt;.result","text":"<p>\u5728 Makefile \u4e2d,<code>$(shell &gt; $(RESULT))</code> \u8fd9\u884c\u4ee3\u7801\u4f7f\u7528\u4e86 GNU Make \u7684 <code>$(shell ...)</code> \u51fd\u6570.\u8be5\u51fd\u6570\u5141\u8bb8\u5728 Makefile \u4e2d\u6267\u884c\u4efb\u610f\u7684 shell \u547d\u4ee4,\u5e76\u5c06\u5176\u8f93\u51fa\u4f5c\u4e3a\u53d8\u91cf\u503c.\u5177\u4f53\u6765\u8bf4,\u8fd9\u91cc\u6267\u884c\u7684\u547d\u4ee4\u662f <code>&gt; .result</code>,\u5b83\u7684\u4f5c\u7528\u662f\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 <code>.result</code> \u6587\u4ef6\uff08\u5982\u679c\u6587\u4ef6\u5df2\u7ecf\u5b58\u5728,\u5219\u6e05\u7a7a\u5b83\uff09.</p>"},{"location":"PA/PA/#shell","title":"<code>$(shell ...)</code> \u51fd\u6570","text":"<p><code>$(shell ...)</code> \u51fd\u6570\u7684\u8bed\u6cd5\u5982\u4e0b\uff1a <pre><code>$(shell command)\n</code></pre></p> <ul> <li><code>command</code> \u662f\u8981\u6267\u884c\u7684 shell \u547d\u4ee4.</li> <li><code>$(shell ...)</code> \u51fd\u6570\u6267\u884c <code>command</code> \u5e76\u5c06\u5176\u8f93\u51fa\u4f5c\u4e3a\u8fd4\u56de\u503c.</li> </ul>"},{"location":"PA/PA/#_20","title":"\u521b\u5efa\u7a7a\u6587\u4ef6","text":"<p>\u5728 shell \u4e2d,\u5355\u72ec\u4f7f\u7528\u91cd\u5b9a\u5411\u64cd\u4f5c\u7b26 <code>&gt;</code> \u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u65b0\u6587\u4ef6\u6216\u6e05\u7a7a\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u6587\u4ef6.\u4f8b\u5982\uff1a <pre><code>&gt; .result\n</code></pre> \u8fd9\u6761\u547d\u4ee4\u7684\u6548\u679c\u662f\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>.result</code> \u7684\u7a7a\u6587\u4ef6,\u5982\u679c <code>.result</code> \u6587\u4ef6\u5df2\u7ecf\u5b58\u5728,\u5219\u4f1a\u6e05\u7a7a\u5b83\u7684\u5185\u5bb9.</p> <p>\u5728 Makefile \u4e2d\u4f7f\u7528 <code>$(shell ...)</code> \u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\u7684\u76ee\u7684\u662f\u786e\u4fdd\u5728\u5f00\u59cb\u7f16\u8bd1\u4e4b\u524d,\u7ed3\u679c\u6587\u4ef6 <code>.result</code> \u662f\u7a7a\u7684.\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u5c06\u65b0\u7f16\u8bd1\u7684\u7ed3\u679c\u4e0e\u4e4b\u524d\u7684\u7ed3\u679c\u6df7\u5728\u4e00\u8d77.</p> <p>\u5728 Makefile \u4e2d,<code>$(RESULT)</code> \u662f\u4e00\u4e2a\u53d8\u91cf,\u7528\u4e8e\u5b58\u50a8\u7f16\u8bd1\u548c\u8fd0\u884c\u7ed3\u679c\u7684\u6587\u4ef6\u540d.\u5728\u524d\u9762\u7684 Makefile \u793a\u4f8b\u4e2d,\u5b83\u88ab\u5b9a\u4e49\u4e3a\uff1a</p> <pre><code>RESULT = .result\n$(shell &gt; $(RESULT))\n</code></pre> <p><code>$(RESULT)</code> \u53d8\u91cf\u7684\u4f5c\u7528\u662f\u8bb0\u5f55\u6bcf\u4e2a\u6d4b\u8bd5\u6587\u4ef6\u7684\u7f16\u8bd1\u548c\u8fd0\u884c\u7ed3\u679c.\u8fd9\u79cd\u505a\u6cd5\u53ef\u4ee5\u8ba9\u4f60\u5728\u7f16\u8bd1\u591a\u4e2a\u6d4b\u8bd5\u6587\u4ef6\u540e\u67e5\u770b\u5b83\u4eec\u7684\u7ed3\u679c,\u800c\u4e0d\u9700\u8981\u9010\u4e2a\u67e5\u770b\u7f16\u8bd1\u8f93\u51fa.</p>"},{"location":"PA/PA/#_21","title":"\u8be6\u7ec6\u8bf4\u660e","text":"<ol> <li>\u53d8\u91cf\u5b9a\u4e49\uff1a    <pre><code>RESULT = .result\n</code></pre></li> </ol> <p>\u8fd9\u884c\u4ee3\u7801\u5c06 <code>RESULT</code> \u53d8\u91cf\u5b9a\u4e49\u4e3a <code>.result</code>,\u8868\u793a\u7ed3\u679c\u6587\u4ef6\u7684\u540d\u79f0\u662f <code>.result</code>.</p> <ol> <li>\u521d\u59cb\u5316\u7ed3\u679c\u6587\u4ef6\uff1a    <pre><code>$(shell &gt; $(RESULT))\n</code></pre></li> </ol> <p>\u8fd9\u884c\u4ee3\u7801\u4f7f\u7528 <code>$(shell ...)</code> \u51fd\u6570\u6267\u884c shell \u547d\u4ee4 <code>&gt; .result</code>,\u8fd9\u4f1a\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 <code>.result</code> \u6587\u4ef6\uff08\u5982\u679c\u6587\u4ef6\u5df2\u7ecf\u5b58\u5728,\u5219\u6e05\u7a7a\u5b83\uff09.\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u6bcf\u6b21\u8fd0\u884c Makefile \u65f6,\u7ed3\u679c\u6587\u4ef6\u90fd\u662f\u7a7a\u7684,\u5e76\u4e14\u4e0d\u4f1a\u5305\u542b\u4e0a\u6b21\u8fd0\u884c\u7684\u7ed3\u679c.</p> <ol> <li> <p>\u8bb0\u5f55\u7f16\u8bd1\u7ed3\u679c\uff1a    <pre><code>@if make -s -f $@ ARCH=$(ARCH) $(MAKECMDGOALS); then \\\n    printf \"[%14s] $(COLOR_GREEN)PASS!$(COLOR_NONE)\\n\" $* &gt;&gt; $(RESULT); \\\nelse \\\n    printf \"[%14s] $(COLOR_RED)FAIL!$(COLOR_NONE)\\n\" $* &gt;&gt; $(RESULT); \\\nfi\n</code></pre></p> </li> <li> <p><code>printf \"[%14s] $(COLOR_GREEN)PASS!$(COLOR_NONE)\\n\" $* &gt;&gt; $(RESULT);</code>\uff1a\u5982\u679c\u7f16\u8bd1\u6210\u529f,\u6253\u5370\u4e00\u884c\u5305\u542b \"PASS!\" \u7684\u4fe1\u606f,\u5e76\u8ffd\u52a0\u5230 <code>.result</code> \u6587\u4ef6\u4e2d.</p> </li> <li><code>printf \"[%14s] $(COLOR_RED)FAIL!$(COLOR_NONE)\\n\" $* &gt;&gt; $(RESULT);</code>\uff1a\u5982\u679c\u7f16\u8bd1\u5931\u8d25,\u6253\u5370\u4e00\u884c\u5305\u542b \"FAIL!\" \u7684\u4fe1\u606f,\u5e76\u8ffd\u52a0\u5230 <code>.result</code> \u6587\u4ef6\u4e2d.</li> </ol> <p>\u8fd9\u6bb5\u4ee3\u7801\u662f\u4e00\u4e2a\u5728 Makefile \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u547d\u4ee4,\u7528\u4e8e\u6267\u884c\u6784\u5efa\u8fc7\u7a0b,\u5e76\u6839\u636e\u6784\u5efa\u7ed3\u679c\u8f93\u51fa\u76f8\u5e94\u7684\u4fe1\u606f\u5230\u4e00\u4e2a\u7ed3\u679c\u6587\u4ef6\u4e2d.\u8ba9\u6211\u4eec\u9010\u6b65\u89e3\u6790\u8fd9\u6bb5\u4ee3\u7801\u7684\u529f\u80fd\u548c\u7ec4\u6210\u90e8\u5206.</p> <p>\u9996\u5148,\u8fd9\u6bb5\u4ee3\u7801\u4f7f\u7528\u4e86 <code>@</code> \u524d\u7f00,\u8fd9\u5728 Makefile \u4e2d\u7528\u6765\u8868\u793a\u6267\u884c\u547d\u4ee4\u65f6,\u4e0d\u5c06\u8be5\u547d\u4ee4\u672c\u8eab\u8f93\u51fa\u5230\u63a7\u5236\u53f0.\u8fd9\u6837\u505a\u53ef\u4ee5\u8ba9\u8f93\u51fa\u7ed3\u679c\u66f4\u52a0\u6e05\u6670,\u53ea\u663e\u793a\u6211\u4eec\u5173\u5fc3\u7684\u4fe1\u606f.(\\(@\u8868\u793atargets,\\)^\u8868\u793aprerequisites,\u4e0d\u5982\u76f4\u63a5\u53bb\u770bmakefile manual)</p> <p>\u63a5\u4e0b\u6765,\u4f7f\u7528 <code>if</code> \u8bed\u53e5\u6765\u5224\u65ad <code>make -s -f $@ ARCH=$(ARCH) $(MAKECMDGOALS)</code> \u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c.\u8fd9\u91cc\u7684 <code>-s</code> \u9009\u9879\u8868\u793a\u5728\u6267\u884c\u65f6\u4e0d\u663e\u793a\u547d\u4ee4\u672c\u8eab,<code>-f $@</code> \u8868\u793a\u4f7f\u7528\u5f53\u524d\u76ee\u6807\uff08<code>$@</code>\uff09\u6307\u5b9a\u7684 Makefile \u6587\u4ef6.<code>ARCH=$(ARCH)</code> \u662f\u5411 make \u547d\u4ee4\u4f20\u9012\u7684\u4e00\u4e2a\u53d8\u91cf,\u5b83\u7684\u503c\u53d6\u51b3\u4e8e\u5f53\u524d\u73af\u5883\u6216\u8005\u662f\u5728\u547d\u4ee4\u884c\u4e2d\u6307\u5b9a\u7684\u503c.<code>$(MAKECMDGOALS)</code> \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u53d8\u91cf,\u5305\u542b\u4e86 make \u547d\u4ee4\u884c\u4e2d\u6307\u5b9a\u7684\u76ee\u6807\u5217\u8868.</p> <p>\u5982\u679c <code>make</code> \u547d\u4ee4\u6267\u884c\u6210\u529f\uff08\u5373\u8fd4\u56de\u503c\u4e3a 0\uff09,\u5219\u6267\u884c <code>then</code> \u5206\u652f,\u4f7f\u7528 <code>printf</code> \u547d\u4ee4\u5c06\u683c\u5f0f\u5316\u7684\u6210\u529f\u4fe1\u606f\u8ffd\u52a0\u5230 <code>$(RESULT)</code> \u6307\u5b9a\u7684\u6587\u4ef6\u4e2d.\u8fd9\u91cc\u7684 <code>[%14s]</code> \u662f <code>printf</code> \u683c\u5f0f\u5b57\u7b26\u4e32,\u7528\u4e8e\u5c06\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\u4e3a\u5bbd\u5ea6\u4e3a 14 \u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32,\u5982\u679c\u4e0d\u8db3\u5219\u5de6\u4fa7\u586b\u5145\u7a7a\u683c.<code>$*</code> \u4ee3\u8868\u4e86\u4f20\u9012\u7ed9\u5f53\u524d\u89c4\u5219\u7684\u6240\u6709\u53c2\u6570,<code>$(COLOR_GREEN)</code> \u548c <code>$(COLOR_NONE)</code> \u662f\u5728 Makefile \u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf,\u7528\u4e8e\u8bbe\u7f6e\u6587\u672c\u989c\u8272,\u4ee5\u4fbf\u5728\u8f93\u51fa\u4e2d\u9ad8\u4eae\u663e\u793a\u6210\u529f\u4fe1\u606f.</p> <p>\u5982\u679c <code>make</code> \u547d\u4ee4\u6267\u884c\u5931\u8d25\uff08\u5373\u8fd4\u56de\u503c\u975e 0\uff09,\u5219\u6267\u884c <code>else</code> \u5206\u652f,\u4f7f\u7528 <code>printf</code> \u547d\u4ee4\u5c06\u683c\u5f0f\u5316\u7684\u5931\u8d25\u4fe1\u606f\u8ffd\u52a0\u5230 <code>$(RESULT)</code> \u6307\u5b9a\u7684\u6587\u4ef6\u4e2d.\u5931\u8d25\u4fe1\u606f\u7684\u683c\u5f0f\u4e0e\u6210\u529f\u4fe1\u606f\u76f8\u540c,\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u4f7f\u7528\u4e86 <code>$(COLOR_RED)</code> \u53d8\u91cf\u6765\u8bbe\u7f6e\u6587\u672c\u989c\u8272,\u4ee5\u4fbf\u5728\u8f93\u51fa\u4e2d\u9ad8\u4eae\u663e\u793a\u5931\u8d25\u4fe1\u606f.</p> <p>\u603b\u7684\u6765\u8bf4,\u8fd9\u6bb5\u4ee3\u7801\u901a\u8fc7\u6267\u884c\u53e6\u4e00\u4e2a Makefile \u5e76\u68c0\u67e5\u5176\u8fd4\u56de\u503c,\u6765\u51b3\u5b9a\u662f\u8f93\u51fa\u6784\u5efa\u6210\u529f\u8fd8\u662f\u5931\u8d25\u7684\u4fe1\u606f,\u5e76\u5c06\u8fd9\u4e9b\u4fe1\u606f\u4ee5\u7279\u5b9a\u7684\u683c\u5f0f\u8ffd\u52a0\u5230\u4e00\u4e2a\u7ed3\u679c\u6587\u4ef6\u4e2d,\u540c\u65f6\u901a\u8fc7\u989c\u8272\u7684\u53d8\u5316\u4f7f\u5f97\u7ed3\u679c\u4e00\u76ee\u4e86\u7136.</p> <ol> <li> <p>\u663e\u793a\u7ed3\u679c\uff1a    <pre><code>run: all\n    @cat $(RESULT)\n    @rm $(RESULT)\n</code></pre></p> </li> <li> <p><code>@cat $(RESULT)</code>\uff1a\u663e\u793a <code>.result</code> \u6587\u4ef6\u7684\u5185\u5bb9,\u5217\u51fa\u6240\u6709\u6d4b\u8bd5\u6587\u4ef6\u7684\u7f16\u8bd1\u548c\u8fd0\u884c\u7ed3\u679c.</p> </li> <li><code>@rm $(RESULT)</code>\uff1a\u5220\u9664 <code>.result</code> \u6587\u4ef6,\u6e05\u7406\u4e34\u65f6\u6587\u4ef6.</li> </ol>"},{"location":"PA/PA/#_22","title":"\u793a\u4f8b","text":"<p>\u5047\u8bbe\u4f60\u6709\u4e24\u4e2a\u6d4b\u8bd5\u6587\u4ef6 <code>tests/dummy.c</code> \u548c <code>tests/sample.c</code>,\u5e76\u4e14\u4f60\u8fd0\u884c <code>make ARCH=$ISA-nemu ALL=\"dummy sample\" run</code>.\u5047\u8bbe <code>dummy.c</code> \u7f16\u8bd1\u6210\u529f\u800c <code>sample.c</code> \u7f16\u8bd1\u5931\u8d25,<code>.result</code> \u6587\u4ef6\u7684\u5185\u5bb9\u53ef\u80fd\u5982\u4e0b\uff1a</p> <pre><code>        dummy PASS!\n       sample FAIL!\n</code></pre> <p>\u5728 <code>run</code> \u76ee\u6807\u4e2d,<code>cat .result</code> \u5c06\u663e\u793a\u4e0a\u8ff0\u5185\u5bb9,<code>rm .result</code> \u5219\u4f1a\u5220\u9664 <code>.result</code> \u6587\u4ef6.</p>"},{"location":"PA/PA/#_23","title":"\u603b\u7ed3","text":"<p><code>$(RESULT)</code> \u662f\u4e00\u4e2a\u7528\u4e8e\u5b58\u50a8\u548c\u663e\u793a\u7f16\u8bd1\u548c\u8fd0\u884c\u7ed3\u679c\u7684\u4e34\u65f6\u6587\u4ef6\u540d\u53d8\u91cf.\u5b83\u7684\u5b9a\u4e49\u548c\u4f7f\u7528\u786e\u4fdd\u4e86\u6bcf\u6b21\u8fd0\u884c Makefile \u65f6\u90fd\u80fd\u8bb0\u5f55\u6bcf\u4e2a\u6d4b\u8bd5\u6587\u4ef6\u7684\u7ed3\u679c,\u5e76\u5728\u6700\u7ec8\u8f93\u51fa\u7ed3\u679c\u540e\u6e05\u7406\u8be5\u6587\u4ef6.</p>"},{"location":"PA/PA/#pa21","title":"PA2.1 \u6307\u4ee4\u5b9e\u73b0","text":""},{"location":"PA/PA/#_24","title":"\u6559\u8bad","text":"<p>YSYX\u7684\u8fd9\u4e2a\u5f00\u653e\u67b6\u6784\u8bbe\u8ba1\u4e4b\u9053\u6709\u4e00\u70b9\u6ca1\u5199\u597d(\u4f8b\u5982\u7ed3\u6784\u592a\u6df7\u4e71\u4e86,\u4ecb\u7ecd\u57fa\u672c\u6307\u4ee4\u683c\u5f0f\u7684\u65f6\u5019,U\u578b\u6307\u4ee4\u7684\u7acb\u5373\u657020\u4f4d\u5de6\u79fb\u90fd\u6ca1\u8bf4,\u5c31\u5f00\u59cb\u4ecb\u7ecd\u51cf\u5c11\u6247\u5f62\u9762\u79ef\u4e4b\u7c7b\u7684\u77e5\u8bc6\u770b\u5f97\u5f88\u4e00\u5934\u96fe\u6c34,\u602a\u4e0d\u5f97\u5f88\u591ablog\u8bf4\u4e0d\u5982\u76f4\u63a5\u53bb\u770b\u5b98\u65b9\u624b\u518c,\u8fd9\u70b9\u786e\u5b9e,\u5509)</p> <p>\u6307\u4ee4\u5b9e\u73b0\u5c31\u662f\u7eaf\u6284\u624b\u518c,\u8865\u5168\u6846\u67b6\u4ee3\u7801\u91cc\u7684\u7a7a\u767d,\u8fd9\u4e2a\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684,\u5c31\u662f\u8981\u591a\u770b\u624b\u518c,\u591a\u770b\u624b\u518c,\u591a\u770b\u624b\u518c.(\u4f8b\u5982\u53d6\u7acb\u5373\u6570\u7684\u51e0\u4e2aimm,)\u96be\u7ef7\u62ffcopilot\u751f\u6210\u7684\u53d6\u7acb\u5373\u6570\u5b8f\u5c45\u7136\u662f\u9519\u7684,\u5f53\u65f6\u5077\u61d2\u4e86\u6ca1\u53bb\u770b\u624b\u518c,\u7ed3\u679c\u6d6a\u8d39\u4e86\u5f88\u591a\u65f6\u95f4\u6d4b\u8bd5\u51fa\u8fd9\u4e2a\u95ee\u9898.</p>"},{"location":"PA/PA/#gdb","title":"gdb\u6761\u4ef6\u8c03\u8bd5","text":"<p>mersenne\u6d4b\u8bd5\u672a\u901a\u8fc7,\u9700\u8981\u4f7f\u7528gdb\u8fdb\u884c\u8c03\u8bd5. \u5148break\u5230\u5927\u6982\u5730\u65b9\u518d\u4f7f\u7528,condition\u6765\u5b8c\u6210\u6761\u4ef6\u8c03\u8bd5. (\u7b28\u529e\u6cd5\u81ea\u7136\u662fs N\u624b\u52a8\u627e\u51fa\u6765\u90a3\u4e2astep\u4f1aabortion\u7684\u5730\u65b9)</p> <pre><code>(gdb) break exec_once\n(gdb) condition 1 (s-&gt;dnpc == 0x7ffffcdc)\n</code></pre>"},{"location":"PA/PA/#make-nb-vim-","title":"make -nB | vim -","text":"<p><code>sed</code> <code>grep</code> () <pre><code># \u53ea\u4fdd\u7559gcc\u6216g++\u5f00\u5934\u7684\u884c\n:%!grep \"^\\(gcc\\|g++\\)\"\n\n# \u5c06\u73af\u5883\u53d8\u91cf$NEMU_HOME\u6240\u6307\u793a\u5b57\u7b26\u4e32\u66ff\u6362\u4e3a$NEMU_HOME\n:%!sed -e \"s+$NEMU_HOME+\\$NEMU_HOME+g\"\n\n# \u5c06$NEMU_HOME/build/obj-riscv32-nemu-interpreter\u66ff\u6362\u4e3a$OBJ_DIR\n:%s+\\$NEMU_HOME/build/obj-riscv32-nemu-interpreter+$OBJ_DIR+g\n\n# \u5c06-c\u4e4b\u524d\u7684\u5185\u5bb9\u66ff\u6362\u4e3a$CFLAGS\n:%s/-O2.*=riscv32/$CFLAGS/g\n\n# \u5c06\u6700\u540e\u4e00\u884c\u7684\u7a7a\u683c\u66ff\u6362\u6210\u6362\u884c\u5e76\u7f29\u8fdb\u4e24\u683c\n:$s/  */\\r  /g\n</code></pre></p> <p>\u4ee5\u4e0b\u662f\u4f60\u5217\u51fa\u7684\u51e0\u6761 Vim \u7f16\u8f91\u547d\u4ee4\u7684\u89e3\u91ca\u53ca\u4f7f\u7528\u573a\u666f\uff1a</p> <ol> <li> <p>\u53ea\u4fdd\u7559 <code>gcc</code> \u6216 <code>g++</code> \u5f00\u5934\u7684\u884c\uff1a     <pre><code>:%!grep \"^\\(gcc\\|g++\\)\"\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f7f\u7528 <code>grep</code> \u5de5\u5177\u7b5b\u9009\u51fa\u5f53\u524d\u6587\u4ef6\u4e2d\u6240\u6709\u4ee5 <code>gcc</code> \u6216 <code>g++</code> \u5f00\u5934\u7684\u884c.<code>%</code> \u8868\u793a\u6574\u4e2a\u6587\u4ef6,<code>!</code> \u8868\u793a\u6267\u884c\u5916\u90e8\u547d\u4ee4,<code>grep \"^\\(gcc\\|g++\\)\"</code> \u7528\u4e8e\u5339\u914d\u884c\u9996\u4e3a <code>gcc</code> \u6216 <code>g++</code> \u7684\u884c.</p> </li> <li> <p>\u5c06\u73af\u5883\u53d8\u91cf <code>$NEMU_HOME</code> \u6240\u6307\u793a\u5b57\u7b26\u4e32\u66ff\u6362\u4e3a <code>$NEMU_HOME</code>\uff1a     <pre><code>:%!sed -e \"s+$NEMU_HOME+\\$NEMU_HOME+g\"\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f7f\u7528 <code>sed</code> \u5de5\u5177\u5c06\u6587\u4ef6\u4e2d\u6240\u6709 <code>$NEMU_HOME</code> \u7684\u503c\u66ff\u6362\u4e3a\u5b57\u7b26\u4e32 <code>\\$NEMU_HOME</code>.<code>s+old+new+g</code> \u662f <code>sed</code> \u7684\u66ff\u6362\u547d\u4ee4,\u5176\u4e2d <code>+</code> \u662f\u5206\u9694\u7b26,\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u5408\u9002\u7684\u5206\u9694\u7b26.</p> </li> <li> <p>\u5c06 <code>$NEMU_HOME/build/obj-riscv32-nemu-interpreter</code> \u66ff\u6362\u4e3a <code>$OBJ_DIR</code>\uff1a     <pre><code>:%s+\\$NEMU_HOME/build/obj-riscv32-nemu-interpreter+$OBJ_DIR+g\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f7f\u7528 Vim \u7684\u66ff\u6362\u547d\u4ee4\u5c06\u6587\u4ef6\u4e2d\u6240\u6709 <code>$NEMU_HOME/build/obj-riscv32-nemu-interpreter</code> \u66ff\u6362\u4e3a <code>$OBJ_DIR</code>.<code>%</code> \u8868\u793a\u6574\u4e2a\u6587\u4ef6,<code>s</code> \u662f\u66ff\u6362\u547d\u4ee4.</p> </li> <li> <p>\u5c06 <code>-c</code> \u4e4b\u524d\u7684\u5185\u5bb9\u66ff\u6362\u4e3a <code>$CFLAGS</code>\uff1a     <pre><code>:%s/-O2.*=riscv32/$CFLAGS/g\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f7f\u7528 Vim \u7684\u66ff\u6362\u547d\u4ee4,\u5c06\u6587\u4ef6\u4e2d <code>-O2</code> \u5230 <code>=riscv32</code> \u4e4b\u95f4\u7684\u5185\u5bb9\u66ff\u6362\u4e3a <code>$CFLAGS</code>.<code>%</code> \u8868\u793a\u6574\u4e2a\u6587\u4ef6,<code>s</code> \u662f\u66ff\u6362\u547d\u4ee4.</p> </li> <li> <p>\u5c06\u6700\u540e\u4e00\u884c\u7684\u7a7a\u683c\u66ff\u6362\u6210\u6362\u884c\u5e76\u7f29\u8fdb\u4e24\u683c\uff1a     <pre><code>:$s/  */\\r  /g\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f7f\u7528 Vim \u7684\u66ff\u6362\u547d\u4ee4,\u5c06\u6700\u540e\u4e00\u884c\u4e2d\u7684\u6bcf\u4e2a\u7a7a\u683c\u6bb5\u66ff\u6362\u4e3a\u6362\u884c\u7b26\u5e76\u5728\u65b0\u884c\u5f00\u59cb\u5904\u7f29\u8fdb\u4e24\u683c.<code>$</code> \u8868\u793a\u6700\u540e\u4e00\u884c,<code>s</code> \u662f\u66ff\u6362\u547d\u4ee4,<code>\\r</code> \u8868\u793a\u6362\u884c\u7b26,<code></code> \u8868\u793a\u4e24\u4e2a\u7a7a\u683c.</p> </li> <li> <p>\u7b5b\u51fa\u6765.c\u7ed3\u5c3e\u7684\u884c <pre><code>:%!grep \"\\.c$\"\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f7f\u7528 <code>grep</code> \u5de5\u5177\u7b5b\u9009\u51fa\u5f53\u524d\u6587\u4ef6\u4e2d\u6240\u6709\u4ee5 <code>.c</code> \u7ed3\u5c3e\u7684\u884c.<code>%</code> \u8868\u793a\u6574\u4e2a\u6587\u4ef6,<code>!</code> \u8868\u793a\u6267\u884c\u5916\u90e8\u547d\u4ee4,<code>grep \"\\.c$\"</code> \u7528\u4e8e\u5339\u914d\u884c\u5c3e\u4e3a <code>.c</code> \u7684\u884c.</p> </li> </ol> <p><code>sed</code> \u548c <code>grep</code> \u662f\u4e24\u4e2a\u5728 Unix/Linux \u73af\u5883\u4e2d\u5e7f\u6cdb\u4f7f\u7528\u7684\u6587\u672c\u5904\u7406\u5de5\u5177.\u5b83\u4eec\u6709\u4e0d\u540c\u7684\u7528\u9014\u548c\u529f\u80fd,\u4e0b\u9762\u662f\u5bf9\u5b83\u4eec\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff1a</p>"},{"location":"PA/PA/#grepglobal-regular-expression-print","title":"<code>grep</code>\uff08Global Regular Expression Print\uff09","text":"<p><code>grep</code> \u662f\u4e00\u4e2a\u7528\u4e8e\u641c\u7d22\u6587\u672c\u7684\u5de5\u5177,\u5b83\u901a\u8fc7\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u67e5\u627e\u6587\u672c\u4e2d\u7684\u7279\u5b9a\u6a21\u5f0f.<code>grep</code> \u53ef\u4ee5\u7528\u4e8e\u5728\u6587\u4ef6\u4e2d\u641c\u7d22\u7279\u5b9a\u7684\u5b57\u7b26\u4e32\u6216\u6a21\u5f0f,\u5e76\u8f93\u51fa\u5339\u914d\u7684\u884c.</p> <p>\u57fa\u672c\u7528\u6cd5\uff1a <pre><code>grep [OPTIONS] PATTERN [FILE...]\n</code></pre></p> <p>\u5e38\u7528\u9009\u9879\uff1a - <code>-i</code>\uff1a\u5ffd\u7565\u5927\u5c0f\u5199. - <code>-v</code>\uff1a\u53cd\u8f6c\u5339\u914d,\u663e\u793a\u4e0d\u5339\u914d\u7684\u884c. - <code>-r</code>\uff1a\u9012\u5f52\u641c\u7d22\u76ee\u5f55. - <code>-l</code>\uff1a\u4ec5\u663e\u793a\u5305\u542b\u5339\u914d\u884c\u7684\u6587\u4ef6\u540d. - <code>-n</code>\uff1a\u663e\u793a\u5339\u914d\u884c\u7684\u884c\u53f7. - <code>-E</code>: \u4f7f\u7528\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f. \u793a\u4f8b\uff1a <pre><code># \u5728\u6587\u4ef6example.txt\u4e2d\u641c\u7d22\u5305\u542b\u5b57\u7b26\u4e32'pattern'\u7684\u884c\ngrep 'pattern' example.txt\n\n# \u5728\u5f53\u524d\u76ee\u5f55\u53ca\u5176\u5b50\u76ee\u5f55\u4e2d\u9012\u5f52\u641c\u7d22\u5305\u542b\u5b57\u7b26\u4e32'pattern'\u7684\u6587\u4ef6\ngrep -r 'pattern' .\n</code></pre></p>"},{"location":"PA/PA/#sedstream-editor","title":"<code>sed</code>\uff08Stream Editor\uff09","text":"<p><code>sed</code> \u662f\u4e00\u4e2a\u6d41\u7f16\u8f91\u5668,\u7528\u4e8e\u5bf9\u6587\u672c\u8fdb\u884c\u8fc7\u6ee4\u548c\u8f6c\u6362.<code>sed</code> \u53ef\u4ee5\u5bf9\u6587\u672c\u8fdb\u884c\u63d2\u5165\u3001\u5220\u9664\u3001\u66ff\u6362\u548c\u5176\u4ed6\u64cd\u4f5c,\u901a\u5e38\u7528\u4e8e\u5904\u7406\u6587\u4ef6\u4e2d\u7684\u6587\u672c\u6570\u636e.</p> <p>\u57fa\u672c\u7528\u6cd5\uff1a <pre><code>sed [OPTIONS] 'script' [FILE...]\n</code></pre></p> <p>\u5e38\u7528\u9009\u9879\uff1a - <code>-e script</code>\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684\u811a\u672c. - <code>-f script-file</code>\uff1a\u4ece\u811a\u672c\u6587\u4ef6\u4e2d\u8bfb\u53d6\u547d\u4ee4. - <code>-n</code>\uff1a\u6291\u5236\u81ea\u52a8\u6253\u5370,\u53ea\u6709\u5728\u811a\u672c\u4e2d\u4f7f\u7528<code>p</code>\u547d\u4ee4\u65f6\u624d\u6253\u5370\u884c. - <code>-i</code>\uff1a\u76f4\u63a5\u7f16\u8f91\u6587\u4ef6,\u800c\u4e0d\u662f\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa.</p> <p>\u5e38\u7528\u547d\u4ee4\uff1a - <code>s/pattern/replacement/</code>\uff1a\u66ff\u6362\u5339\u914d\u7684\u6a21\u5f0f. - <code>d</code>\uff1a\u5220\u9664\u884c. - <code>p</code>\uff1a\u6253\u5370\u884c. - <code>a\\text</code>\uff1a\u5728\u5f53\u524d\u884c\u4e4b\u540e\u63d2\u5165\u6587\u672c. - <code>i\\text</code>\uff1a\u5728\u5f53\u524d\u884c\u4e4b\u524d\u63d2\u5165\u6587\u672c.</p> <p>\u793a\u4f8b\uff1a <pre><code># \u5c06\u6587\u4ef6example.txt\u4e2d\u7684\u6240\u6709'old'\u66ff\u6362\u4e3a'new'\nsed 's/old/new/g' example.txt\n\n# \u5220\u9664\u6587\u4ef6example.txt\u4e2d\u7684\u7b2c2\u884c\nsed '2d' example.txt\n\n# \u5728\u6587\u4ef6example.txt\u7684\u7b2c3\u884c\u540e\u63d2\u5165'this is a new line'\nsed '3a\\this is a new line' example.txt\n</code></pre></p>"},{"location":"PA/PA/#grep-sed","title":"<code>grep</code> \u548c <code>sed</code> \u7684\u8054\u5408\u4f7f\u7528","text":"<p><code>grep</code> \u548c <code>sed</code> \u53ef\u4ee5\u7ed3\u5408\u4f7f\u7528,\u4ee5\u5b9e\u73b0\u66f4\u5f3a\u5927\u7684\u6587\u672c\u5904\u7406\u529f\u80fd.\u4f8b\u5982,\u5148\u4f7f\u7528 <code>grep</code> \u7b5b\u9009\u51fa\u7279\u5b9a\u7684\u884c,\u7136\u540e\u7528 <code>sed</code> \u5bf9\u8fd9\u4e9b\u884c\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u5904\u7406.</p> <p>\u793a\u4f8b\uff1a <pre><code># \u5148\u7528grep\u627e\u51fa\u5305\u542b'pattern'\u7684\u884c,\u518d\u7528sed\u5c06'old'\u66ff\u6362\u4e3a'new'\ngrep 'pattern' example.txt | sed 's/old/new/g'\n</code></pre></p> <p>\u901a\u8fc7 <code>grep</code> \u548c <code>sed</code> \u7684\u7ec4\u5408,\u80fd\u591f\u9ad8\u6548\u5730\u8fdb\u884c\u590d\u6742\u7684\u6587\u672c\u5904\u7406\u4efb\u52a1.</p>"},{"location":"PA/PA/#tabnew","title":":tabnew\u547d\u4ee4","text":"<p><code>:tabnew</code> \u547d\u4ee4\u7528\u4e8e\u5728 Vim \u7f16\u8f91\u5668\u4e2d\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u6807\u7b7e\u9875.\u5728 Vim \u4e2d,\u6807\u7b7e\u9875\u662f\u4e00\u79cd\u65b9\u4fbf\u7684\u591a\u6587\u4ef6\u7ba1\u7406\u65b9\u5f0f,\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a Vim \u5b9e\u4f8b\u4e2d\u540c\u65f6\u7f16\u8f91\u591a\u4e2a\u6587\u4ef6.</p> <p><code>:tabnew</code> \u662f Vim \u7f16\u8f91\u5668\u4e2d\u7684\u4e00\u4e2a\u547d\u4ee4,\u7528\u4e8e\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00\u6587\u4ef6.\u6807\u7b7e\u9875\u5141\u8bb8\u7528\u6237\u5728\u591a\u4e2a\u6587\u4ef6\u4e4b\u95f4\u5207\u6362,\u540c\u65f6\u4fdd\u6301\u6bcf\u4e2a\u6587\u4ef6\u7684\u6253\u5f00\u72b6\u6001,\u4ece\u800c\u63d0\u9ad8\u591a\u4efb\u52a1\u5904\u7406\u7684\u6548\u7387.</p>"},{"location":"PA/PA/#_25","title":"\u57fa\u672c\u7528\u6cd5","text":"<pre><code>:tabnew [filename]\n</code></pre> <ul> <li><code>:tabnew</code>\uff1a\u6253\u5f00\u4e00\u4e2a\u7a7a\u7684\u6807\u7b7e\u9875.</li> <li><code>:tabnew filename</code>\uff1a\u5728\u4e00\u4e2a\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00\u6307\u5b9a\u7684\u6587\u4ef6.</li> </ul>"},{"location":"PA/PA/#_26","title":"\u793a\u4f8b","text":"<ol> <li> <p>\u6253\u5f00\u4e00\u4e2a\u7a7a\u6807\u7b7e\u9875\uff1a     <pre><code>:tabnew\n</code></pre></p> </li> <li> <p>\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00\u6587\u4ef6\uff1a     <pre><code>:tabnew myfile.txt\n</code></pre></p> </li> </ol>"},{"location":"PA/PA/#_27","title":"\u6807\u7b7e\u9875\u64cd\u4f5c","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u7528\u7684\u6807\u7b7e\u9875\u64cd\u4f5c\u547d\u4ee4\uff1a</p> <ul> <li><code>:tabnext</code> \u6216 <code>:tabn</code>\uff1a\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u6807\u7b7e\u9875.</li> <li><code>:tabprevious</code> \u6216 <code>:tabp</code>\uff1a\u5207\u6362\u5230\u4e0a\u4e00\u4e2a\u6807\u7b7e\u9875.</li> <li><code>:tabfirst</code>\uff1a\u5207\u6362\u5230\u7b2c\u4e00\u4e2a\u6807\u7b7e\u9875.</li> <li><code>:tablast</code>\uff1a\u5207\u6362\u5230\u6700\u540e\u4e00\u4e2a\u6807\u7b7e\u9875.</li> <li><code>:tabclose</code> \u6216 <code>:tabc</code>\uff1a\u5173\u95ed\u5f53\u524d\u6807\u7b7e\u9875.</li> <li><code>:tabs</code>\uff1a\u5217\u51fa\u6240\u6709\u6253\u5f00\u7684\u6807\u7b7e\u9875.</li> </ul>"},{"location":"PA/PA/#_28","title":"\u5feb\u6377\u952e\u64cd\u4f5c","text":"<p>Vim \u8fd8\u63d0\u4f9b\u4e86\u5feb\u6377\u952e\u6765\u65b9\u4fbf\u5730\u64cd\u4f5c\u6807\u7b7e\u9875\uff1a</p> <ul> <li><code>gt</code>\uff1a\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u6807\u7b7e\u9875.</li> <li><code>gT</code>\uff1a\u5207\u6362\u5230\u4e0a\u4e00\u4e2a\u6807\u7b7e\u9875.</li> <li><code>{N}gt</code>\uff1a\u5207\u6362\u5230\u7b2c N \u4e2a\u6807\u7b7e\u9875\uff08\u4f8b\u5982,<code>3gt</code> \u5207\u6362\u5230\u7b2c\u4e09\u4e2a\u6807\u7b7e\u9875\uff09.</li> </ul> <p>\u4f7f\u7528\u6807\u7b7e\u9875\u529f\u80fd,\u53ef\u4ee5\u5728 Vim \u4e2d\u66f4\u52a0\u9ad8\u6548\u5730\u7ba1\u7406\u548c\u7f16\u8f91\u591a\u4e2a\u6587\u4ef6.</p>"},{"location":"PA/PA/#_29","title":"#\u529f\u80fd","text":"<p><code>#</code> \u662f Vim \u7f16\u8f91\u5668\u4e2d\u7684\u4e00\u4e2a\u5feb\u6377\u952e,\u7528\u4e8e\u5728\u5f53\u524d\u6587\u4ef6\u4e2d\u67e5\u627e\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u7684\u5355\u8bcd,\u5e76\u8df3\u8f6c\u5230\u4e0b\u4e00\u4e2a\u5339\u914d\u7684\u4f4d\u7f6e.\u8fd9\u4e2a\u529f\u80fd\u901a\u5e38\u7528\u4e8e\u5feb\u901f\u5b9a\u4f4d\u548c\u67e5\u627e\u6587\u672c\u4e2d\u7684\u5173\u952e\u5b57.</p> <p><code>xargs</code> \u662f\u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684 Unix \u547d\u4ee4,\u7528\u4e8e\u5c06\u8f93\u5165\u8f6c\u6362\u4e3a\u547d\u4ee4\u884c\u53c2\u6570.\u5b83\u5141\u8bb8\u4f60\u5c06\u6807\u51c6\u8f93\u5165\u7684\u6570\u636e\u4f20\u9012\u7ed9\u5176\u4ed6\u547d\u4ee4,\u7279\u522b\u9002\u7528\u4e8e\u5904\u7406\u957f\u5217\u8868\u7684\u6587\u4ef6\u6216\u5176\u4ed6\u9879\u76ee.\u4e0b\u9762\u662f\u5bf9 <code>xargs</code> \u7684\u8be6\u7ec6\u4ecb\u7ecd\uff1a</p>"},{"location":"PA/PA/#xargs","title":"xargs\u57fa\u672c\u8bed\u6cd5","text":"<pre><code>xargs [options] [command [initial-arguments]]\n</code></pre>"},{"location":"PA/PA/#_30","title":"\u4e3b\u8981\u529f\u80fd","text":"<p><code>xargs</code> \u8bfb\u53d6\u6807\u51c6\u8f93\u5165\u5e76\u5c06\u5176\u5206\u5272\u6210\u4e00\u7ec4\u53c2\u6570,\u7136\u540e\u5c06\u8fd9\u4e9b\u53c2\u6570\u4f20\u9012\u7ed9\u6307\u5b9a\u7684\u547d\u4ee4.</p>"},{"location":"PA/PA/#_31","title":"\u4e3b\u8981\u9009\u9879","text":"<ul> <li><code>-0</code>\uff1a\u8f93\u5165\u9879\u76ee\u4ee5\u7a7a\u5b57\u7b26\uff08null character\uff09\u5206\u9694,\u5e38\u7528\u4e8e\u4e0e <code>find -print0</code> \u642d\u914d\u4f7f\u7528.</li> <li><code>-d delimiter</code>\uff1a\u81ea\u5b9a\u4e49\u5b9a\u754c\u7b26,\u5206\u5272\u8f93\u5165\u9879\u76ee.</li> <li><code>-I replace-str</code>\uff1a\u5b9a\u4e49\u66ff\u6362\u5b57\u7b26\u4e32,\u6307\u5b9a\u6bcf\u6b21\u66ff\u6362\u8f93\u5165\u4e2d\u7684\u6bcf\u4e2a\u53c2\u6570.</li> <li><code>-n number</code>\uff1a\u6307\u5b9a\u6bcf\u6b21\u4f20\u9012\u7ed9\u547d\u4ee4\u7684\u53c2\u6570\u6570\u76ee.</li> <li><code>-P max-procs</code>\uff1a\u6307\u5b9a\u540c\u65f6\u8fd0\u884c\u7684\u6700\u5927\u8fdb\u7a0b\u6570\uff08\u5e76\u884c\u6267\u884c\uff09.</li> <li><code>-L max-lines</code>\uff1a\u6307\u5b9a\u6bcf\u6b21\u8bfb\u53d6\u7684\u8f93\u5165\u884c\u6570.</li> </ul>"},{"location":"PA/PA/#_32","title":"\u4f7f\u7528\u793a\u4f8b","text":"<ol> <li> <p>\u7b80\u5355\u793a\u4f8b\uff1a     <pre><code>echo \"file1.txt file2.txt file3.txt\" | xargs rm\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5220\u9664 <code>file1.txt</code>\u3001<code>file2.txt</code> \u548c <code>file3.txt</code>.</p> </li> <li> <p>\u7ed3\u5408 <code>find</code> \u4f7f\u7528\uff1a     <pre><code>find . -name \"*.log\" | xargs rm\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u627e\u5230\u5f53\u524d\u76ee\u5f55\u53ca\u5176\u5b50\u76ee\u5f55\u4e0b\u7684\u6240\u6709 <code>.log</code> \u6587\u4ef6\u5e76\u5220\u9664\u5b83\u4eec.</p> </li> <li> <p>\u5904\u7406\u5e26\u7a7a\u683c\u7684\u6587\u4ef6\u540d\uff1a     <pre><code>find . -name \"*.log\" -print0 | xargs -0 rm\n</code></pre> <code>-print0</code> \u9009\u9879\u4f7f <code>find</code> \u8f93\u51fa\u4ee5 null \u5b57\u7b26\u5206\u9694\u7684\u6587\u4ef6\u540d,<code>xargs -0</code> \u80fd\u6b63\u786e\u5904\u7406\u8fd9\u4e9b\u6587\u4ef6\u540d,\u5373\u4f7f\u5b83\u4eec\u5305\u542b\u7a7a\u683c\u6216\u6362\u884c\u7b26.</p> </li> <li> <p>\u9650\u5236\u6bcf\u6b21\u547d\u4ee4\u884c\u7684\u53c2\u6570\u6570\u91cf\uff1a     <pre><code>find . -name \"*.txt\" | xargs -n 5 cp -t /backup\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u6bcf\u6b21\u4f1a\u4f20\u9012 5 \u4e2a\u6587\u4ef6\u7ed9 <code>cp</code> \u547d\u4ee4,\u5c06\u5b83\u4eec\u590d\u5236\u5230 <code>/backup</code> \u76ee\u5f55.</p> </li> <li> <p>\u5e76\u884c\u6267\u884c\uff1a     <pre><code>find . -name \"*.log\" | xargs -P 4 gzip\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u4f7f\u7528\u6700\u591a 4 \u4e2a\u5e76\u884c\u8fdb\u7a0b\u6765\u538b\u7f29\u627e\u5230\u7684 <code>.log</code> \u6587\u4ef6.</p> </li> <li> <p>\u4f7f\u7528\u66ff\u6362\u5b57\u7b26\u4e32\uff1a     <pre><code>echo \"file1 file2 file3\" | xargs -I {} mv {} /new/location\n</code></pre>     \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5c06 <code>file1</code>\u3001<code>file2</code> \u548c <code>file3</code> \u79fb\u52a8\u5230 <code>/new/location</code> \u76ee\u5f55,<code>{}</code> \u4f1a\u88ab\u6bcf\u4e2a\u6587\u4ef6\u540d\u66ff\u6362.</p> </li> </ol>"},{"location":"PA/PA/#_33","title":"\u603b\u7ed3","text":"<p><code>xargs</code> \u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u5de5\u5177,\u80fd\u663e\u8457\u63d0\u9ad8\u5904\u7406\u6279\u91cf\u6587\u4ef6\u6216\u53c2\u6570\u7684\u6548\u7387.\u901a\u8fc7\u5c06\u6807\u51c6\u8f93\u5165\u8f6c\u6362\u4e3a\u547d\u4ee4\u884c\u53c2\u6570,\u5b83\u5728\u8bb8\u591a\u811a\u672c\u548c\u81ea\u52a8\u5316\u4efb\u52a1\u4e2d\u626e\u6f14\u7740\u91cd\u8981\u89d2\u8272.</p>"},{"location":"PA/PA/#_34","title":"\u53d6\u9664","text":"<p>\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d,\u7b26\u53f7 <code>^</code> \u6709\u4e24\u4e2a\u4e3b\u8981\u4f5c\u7528,\u5177\u4f53\u53d6\u51b3\u4e8e\u5b83\u6240\u5728\u7684\u4f4d\u7f6e\uff1a</p>"},{"location":"PA/PA/#1","title":"1. \u884c\u9996\u5339\u914d\u7b26","text":"<p>\u5f53 <code>^</code> \u4f4d\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5f00\u5934\u65f6,\u5b83\u8868\u793a\u5339\u914d\u884c\u7684\u5f00\u5934.\u4e5f\u5c31\u662f\u8bf4,<code>^pattern</code> \u53ea\u4f1a\u5339\u914d\u90a3\u4e9b\u4ee5 <code>pattern</code> \u5f00\u5934\u7684\u884c.</p> <p>\u793a\u4f8b</p> <ul> <li> <p>\u5339\u914d\u4ee5 \"hello\" \u5f00\u5934\u7684\u884c\uff1a   <pre><code>grep \"^hello\" file.txt\n</code></pre>   \u4f8b\u5982,\u6587\u4ef6 <code>file.txt</code> \u4e2d\u6709\u4ee5\u4e0b\u5185\u5bb9\uff1a   <pre><code>hello world\nsay hello\nhello there\n</code></pre>   \u53ea\u6709\u7b2c\u4e00\u884c\u548c\u7b2c\u4e09\u884c\u4f1a\u88ab\u5339\u914d.</p> </li> <li> <p>\u5339\u914d\u4ee5\u6570\u5b57\u5f00\u5934\u7684\u884c\uff1a   <pre><code>grep \"^[0-9]\" file.txt\n</code></pre>   \u4f8b\u5982,\u6587\u4ef6 <code>file.txt</code> \u4e2d\u6709\u4ee5\u4e0b\u5185\u5bb9\uff1a   <pre><code>1. This is a test.\nThis is another test.\n42 is the answer.\n</code></pre>   \u53ea\u6709\u7b2c\u4e00\u884c\u548c\u7b2c\u4e09\u884c\u4f1a\u88ab\u5339\u914d.</p> </li> </ul>"},{"location":"PA/PA/#2","title":"2. \u5426\u5b9a\u5b57\u7b26\u96c6","text":"<p>\u5f53 <code>^</code> \u4f4d\u4e8e\u65b9\u62ec\u53f7 <code>[]</code> \u4e2d\u7684\u5f00\u5934\u65f6,\u5b83\u8868\u793a\u5426\u5b9a\u5b57\u7b26\u96c6.\u4e5f\u5c31\u662f\u8bf4,<code>[^abc]</code> \u8868\u793a\u5339\u914d\u4efb\u4f55\u4e0d\u5728 <code>abc</code> \u4e4b\u5185\u7684\u5b57\u7b26.</p> <ul> <li> <p>\u5339\u914d\u4e0d\u5305\u542b\u5143\u97f3\u5b57\u6bcd\u7684\u5b57\u7b26\uff1a   <pre><code>grep \"[^aeiou]\" file.txt\n</code></pre>   \u4f8b\u5982,\u6587\u4ef6 <code>file.txt</code> \u4e2d\u6709\u4ee5\u4e0b\u5185\u5bb9\uff1a   <pre><code>apple\nbanana\ncherry\n</code></pre>   \u6bcf\u4e00\u884c\u90fd\u4f1a\u5339\u914d,\u56e0\u4e3a\u6bcf\u884c\u90fd\u6709\u81f3\u5c11\u4e00\u4e2a\u975e\u5143\u97f3\u5b57\u6bcd.</p> </li> <li> <p>\u5339\u914d\u4e0d\u5305\u542b\u6570\u5b57\u7684\u5b57\u7b26\uff1a   <pre><code>grep \"[^0-9]\" file.txt\n</code></pre>   \u4f8b\u5982,\u6587\u4ef6 <code>file.txt</code> \u4e2d\u6709\u4ee5\u4e0b\u5185\u5bb9\uff1a   <pre><code>1234\nabcd\na1b2c3\n</code></pre>   \u7b2c\u4e8c\u884c\u548c\u7b2c\u4e09\u884c\u4f1a\u88ab\u5339\u914d,\u56e0\u4e3a\u5b83\u4eec\u5305\u542b\u975e\u6570\u5b57\u5b57\u7b26.</p> </li> <li> <p><code>^pattern</code>\uff1a\u5339\u914d\u884c\u7684\u5f00\u5934.</p> </li> <li><code>[^chars]</code>\uff1a\u5339\u914d\u4e0d\u5728 <code>chars</code> \u5185\u7684\u4efb\u610f\u5b57\u7b26.</li> </ul> <p>\u8fd9\u4e9b\u89c4\u5219\u4f7f\u5f97 <code>^</code> \u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u975e\u5e38\u6709\u7528,\u53ef\u4ee5\u7528\u4e8e\u5339\u914d\u884c\u7684\u7279\u5b9a\u4f4d\u7f6e\u6216\u6392\u9664\u7279\u5b9a\u5b57\u7b26\u96c6.</p>"},{"location":"PA/PA/#nemugrep","title":"nemu\u4e2d\u7684grep","text":"<pre><code>find . -name \"*.[ch]\" | grep -E \"^\\./(src|include)\" | \\\n  grep -E -v \"^\\./include/config\" | grep -v \"mips32\\|riscv64\\|loongarch32r\" | wc\nfind . -name \"*.[ch]\" | grep -E \"^\\./(src|include)\" | \\\n  grep -E -v \"^\\./include/config\" | grep -v \"mips32\\|riscv64\\|loongarch32r\" | xargs wc\n\n// wc (print newline,word,and the byte counts for each file)\n</code></pre>"},{"location":"PA/PA/#sext","title":"SEXT\u5b8f\u7684\u4f5c\u7528","text":"<p><code>SEXT</code> \u5b8f\u7684\u4f5c\u7528\u662f\u5c06\u4e00\u4e2a\u6709\u7b26\u53f7\u6570\u7684\u4f4e\u4f4d\u6269\u5c55\u4e3a\u66f4\u9ad8\u4f4d,\u4ee5\u4fdd\u6301\u5176\u7b26\u53f7\u4f4d\u4e0d\u53d8.\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d,\u6709\u7b26\u53f7\u6570\u901a\u5e38\u4f7f\u7528\u8865\u7801\u8868\u793a,\u5373\u6700\u9ad8\u4f4d\u4e3a\u7b26\u53f7\u4f4d,0 \u8868\u793a\u6b63\u6570,1 \u8868\u793a\u8d1f\u6570.\u5f53\u9700\u8981\u5c06\u4e00\u4e2a\u4f4e\u4f4d\u6709\u7b26\u53f7\u6570\u6269\u5c55\u4e3a\u66f4\u9ad8\u4f4d\u65f6,\u9700\u8981\u4fdd\u6301\u7b26\u53f7\u4f4d\u4e0d\u53d8,\u5373\u5c06\u7b26\u53f7\u4f4d\u590d\u5236\u5230\u66f4\u9ad8\u4f4d.(copilot\u8bf4\u7684)</p> <p>\u5176\u5b9e\u8fd9\u4e9b\u503c\u5b58\u5728\u5185\u5b58\u91cc\u90fd\u662f32\u4f4d,\u53ea\u662f\u5728\u663e\u793a\u7684\u65f6\u5019\u663e\u793a\u6210\u82e5\u5e72\u4f4d,\u6240\u4ee5\u9700\u8981\u8fdb\u884c\u7b26\u53f7\u6269\u5c55.</p>"},{"location":"PA/PA/#pa22","title":"PA2.2","text":""},{"location":"PA/PA/#_35","title":"\u94fe\u63a5\u548c\u52a0\u8f7d","text":"<p>GCC \u63d0\u4f9b\u4e86\u8bb8\u591a\u9009\u9879\u6765\u63a7\u5236\u7f16\u8bd1\u8fc7\u7a0b,\u6bcf\u4e2a\u9009\u9879\u90fd\u6709\u7279\u5b9a\u7684\u529f\u80fd,\u8bb8\u591a\u9009\u9879\u7684\u7f29\u5199\u4e5f\u76f4\u89c2\u5730\u53cd\u6620\u4e86\u5b83\u4eec\u7684\u529f\u80fd.\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684 GCC \u9009\u9879\u53ca\u5176\u529f\u80fd\u4e0e\u7f29\u5199\u7684\u5173\u7cfb\uff1a</p> <ol> <li><code>-o</code> (output)\uff1a</li> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u7684\u540d\u79f0.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>o</code> \u4ee3\u8868\u201coutput\u201d.</li> <li> <p>\u793a\u4f8b\uff1a<code>gcc -o my_program foo.c</code> \u5c06\u7f16\u8bd1 <code>foo.c</code> \u5e76\u5c06\u8f93\u51fa\u7684\u53ef\u6267\u884c\u6587\u4ef6\u547d\u540d\u4e3a <code>my_program</code>.</p> </li> <li> <p><code>-I</code> (include)\uff1a</p> </li> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u989d\u5916\u7684\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>I</code> \u4ee3\u8868\u201cinclude\u201d.</li> <li> <p>\u793a\u4f8b\uff1a<code>gcc -I/my/include/path foo.c</code> \u5c06\u5728 <code>/my/include/path</code> \u4e2d\u641c\u7d22\u5934\u6587\u4ef6.</p> </li> <li> <p><code>-L</code> (library path)\uff1a</p> </li> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u989d\u5916\u7684\u5e93\u6587\u4ef6\u641c\u7d22\u8def\u5f84.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>L</code> \u4ee3\u8868\u201clibrary path\u201d.</li> <li> <p>\u793a\u4f8b\uff1a<code>gcc -L/my/library/path foo.c</code> \u5c06\u5728 <code>/my/library/path</code> \u4e2d\u641c\u7d22\u5e93\u6587\u4ef6.</p> </li> <li> <p><code>-l</code> (library)\uff1a</p> </li> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u94fe\u63a5\u65f6\u8981\u4f7f\u7528\u7684\u5e93.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>l</code> \u4ee3\u8868\u201clibrary\u201d.</li> <li> <p>\u793a\u4f8b\uff1a<code>gcc -o my_program foo.o -lm</code> \u5c06\u94fe\u63a5\u6570\u5b66\u5e93\uff08libm\uff09.</p> </li> <li> <p><code>-g</code> (debug)\uff1a</p> </li> <li>\u529f\u80fd\uff1a\u751f\u6210\u8c03\u8bd5\u4fe1\u606f,\u7528\u4e8e\u8c03\u8bd5\u5668\uff08\u5982 GDB\uff09.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>g</code> \u4ee3\u8868\u201cdebug\u201d.</li> <li> <p>\u793a\u4f8b\uff1a<code>gcc -g foo.c</code> \u5c06\u7f16\u8bd1 <code>foo.c</code> \u5e76\u751f\u6210\u8c03\u8bd5\u4fe1\u606f.</p> </li> <li> <p><code>-O</code> (optimize)\uff1a</p> </li> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u4f18\u5316\u7ea7\u522b\uff08\u5982 <code>-O2</code>\uff09.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>O</code> \u4ee3\u8868\u201coptimize\u201d.</li> <li> <p>\u793a\u4f8b\uff1a<code>gcc -O2 foo.c</code> \u5c06\u4ee5\u4f18\u5316\u7ea7\u522b 2 \u7f16\u8bd1 <code>foo.c</code>.</p> </li> <li> <p><code>-D</code> (define)\uff1a</p> </li> <li>\u529f\u80fd\uff1a\u5b9a\u4e49\u9884\u5904\u7406\u5b8f.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>D</code> \u4ee3\u8868\u201cdefine\u201d.</li> <li> <p>\u793a\u4f8b\uff1a<code>gcc -DDEBUG foo.c</code> \u5c06\u5728\u7f16\u8bd1 <code>foo.c</code> \u65f6\u5b9a\u4e49 <code>DEBUG</code> \u5b8f.</p> </li> <li> <p><code>-E</code> (preprocess)\uff1a</p> </li> <li>\u529f\u80fd\uff1a\u53ea\u6267\u884c\u9884\u5904\u7406\u6b65\u9aa4,\u4e0d\u8fdb\u884c\u7f16\u8bd1.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>E</code> \u4ee3\u8868\u201cpreprocess\u201d.</li> <li> <p>\u793a\u4f8b\uff1a<code>gcc -E foo.c</code> \u5c06\u9884\u5904\u7406 <code>foo.c</code> \u5e76\u8f93\u51fa\u7ed3\u679c.</p> </li> <li> <p><code>-S</code> (assembly)\uff1a</p> </li> <li>\u529f\u80fd\uff1a\u751f\u6210\u6c47\u7f16\u4ee3\u7801,\u800c\u4e0d\u8fdb\u884c\u6c47\u7f16\u548c\u94fe\u63a5.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>S</code> \u4ee3\u8868\u201cassembly\u201d.</li> <li> <p>\u793a\u4f8b\uff1a<code>gcc -S foo.c</code> \u5c06\u7f16\u8bd1 <code>foo.c</code> \u5e76\u751f\u6210\u6c47\u7f16\u4ee3\u7801\u6587\u4ef6 <code>foo.s</code>.</p> </li> <li> <p><code>-Wall</code> (all warnings)\uff1a</p> <ul> <li>\u529f\u80fd\uff1a\u542f\u7528\u6240\u6709\u5e38\u89c1\u7684\u8b66\u544a.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>Wall</code> \u4ee3\u8868\u201call warnings\u201d.</li> <li>\u793a\u4f8b\uff1a<code>gcc -Wall foo.c</code> \u5c06\u7f16\u8bd1 <code>foo.c</code> \u5e76\u542f\u7528\u6240\u6709\u5e38\u89c1\u7684\u8b66\u544a.</li> </ul> </li> <li> <p>** <code>-c</code> (compile)**:</p> <ul> <li>\u529f\u80fd\uff1a\u7f16\u8bd1\u6e90\u6587\u4ef6,\u4f46\u4e0d\u8fdb\u884c\u94fe\u63a5.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>c</code> \u4ee3\u8868\u201ccompile\u201d.</li> <li>\u793a\u4f8b\uff1a<code>gcc -c foo.c</code> \u5c06\u7f16\u8bd1 <code>foo.c</code> \u751f\u6210\u76ee\u6807\u6587\u4ef6 <code>foo.o</code>.</li> </ul> </li> </ol> <p>\u8fd9\u4e9b\u9009\u9879\u63d0\u4f9b\u4e86\u5bf9\u7f16\u8bd1\u8fc7\u7a0b\u7684\u7ec6\u7c92\u5ea6\u63a7\u5236,\u5e2e\u52a9\u5f00\u53d1\u8005\u4f18\u5316\u548c\u8c03\u8bd5\u4ed6\u4eec\u7684\u7a0b\u5e8f.</p> <ol> <li><code>-ggdb</code> (GDB debug)\uff1a<ul> <li>\u529f\u80fd\uff1a\u751f\u6210\u4f9b GDB \u4f7f\u7528\u7684\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f.</li> <li>\u7f29\u5199\u6765\u6e90\uff1a<code>ggdb</code> \u4ee3\u8868\u201cGDB debug\u201d.</li> <li>\u793a\u4f8b\uff1a<code>gcc -ggdb foo.c</code> \u5c06\u7f16\u8bd1 <code>foo.c</code> \u5e76\u751f\u6210\u8be6\u7ec6\u7684\u8c03\u8bd5\u4fe1\u606f.</li> </ul> </li> </ol> <p>\u4e3b\u8981\u9009\u9879\u89e3\u91ca - -g: \u751f\u6210\u57fa\u672c\u7684\u8c03\u8bd5\u4fe1\u606f\u3002 - -ggdb: \u751f\u6210\u4f9b GDB \u4f7f\u7528\u7684\u8c03\u8bd5\u4fe1\u606f\uff0c\u5e76\u4e14\u6bd4 <code>-g</code> \u66f4\u8be6\u7ec6\u3002\u5305\u542b\u66f4\u591a\u7684\u8c03\u8bd5\u4fe1\u606f\uff0c\u6bd4\u5982 GNU \u6269\u5c55\u3002</p> <p>\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u6e90\u6587\u4ef6 <code>example.c</code>\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u7f16\u8bd1\u5b83\uff1a</p> <pre><code>gcc -ggdb -o example example.c\n</code></pre> <p>\u8fd9\u4f1a\u751f\u6210\u4e00\u4e2a\u540d\u4e3a <code>example</code> \u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5e76\u5305\u542b GDB \u6240\u9700\u7684\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002</p> <p>\u4f18\u70b9 - \u66f4\u8be6\u7ec6\u7684\u8c03\u8bd5\u4fe1\u606f: \u63d0\u4f9b\u4e86\u66f4\u4e30\u5bcc\u7684\u8c03\u8bd5\u4fe1\u606f\uff0c\u4fbf\u4e8e\u4f7f\u7528 GDB \u8fdb\u884c\u590d\u6742\u7684\u8c03\u8bd5\u3002 - \u9002\u7528\u4e8e GDB: \u7279\u522b\u9002\u5408\u4e0e GDB \u642d\u914d\u4f7f\u7528\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u5229\u7528 GDB \u7684\u9ad8\u7ea7\u8c03\u8bd5\u529f\u80fd\u3002</p> <p>\u7f3a\u70b9 - \u8f83\u5927\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6: \u7531\u4e8e\u5305\u542b\u4e86\u66f4\u591a\u7684\u8c03\u8bd5\u4fe1\u606f\uff0c\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u4f1a\u6bd4\u53ea\u4f7f\u7528 <code>-g</code> \u66f4\u5927\u3002 - \u53ef\u80fd\u4f1a\u5f71\u54cd\u6027\u80fd: \u867d\u7136\u8c03\u8bd5\u4fe1\u606f\u4e0d\u4f1a\u5f71\u54cd\u8fd0\u884c\u65f6\u6027\u80fd\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5305\u542b\u8c03\u8bd5\u4fe1\u606f\u7684\u6587\u4ef6\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7f16\u8bd1\u548c\u94fe\u63a5\u65f6\u95f4\u589e\u52a0\u3002</p> <p>\u8c03\u8bd5\u793a\u4f8b \u7f16\u8bd1\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 GDB \u8c03\u8bd5\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff1a</p> <pre><code>gdb example\n</code></pre> <p>\u5728 GDB \u4e2d\uff0c\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u65ad\u70b9\u3001\u68c0\u67e5\u53d8\u91cf\u3001\u5355\u6b65\u6267\u884c\u4ee3\u7801\u7b49\uff0c\u8fd9\u4e9b\u8c03\u8bd5\u64cd\u4f5c\u90fd\u4f1a\u53d7\u76ca\u4e8e\u8be6\u7ec6\u7684\u8c03\u8bd5\u4fe1\u606f\u3002</p> <p>\u4f7f\u7528 <code>-ggdb</code> \u53ef\u4ee5\u5927\u5927\u63d0\u9ad8\u8c03\u8bd5\u7684\u4fbf\u5229\u6027\u548c\u6548\u7387\uff0c\u5c24\u5176\u662f\u5728\u5904\u7406\u590d\u6742\u7684\u4ee3\u7801\u6216\u8c03\u8bd5\u96be\u4ee5\u590d\u73b0\u7684\u9519\u8bef\u65f6\u3002</p>"},{"location":"PA/PA/#coreutils-binutilsgnu","title":"coreutils \u548c binutils(GNU\u5de5\u5177\u94fe)","text":"<p><code>coreutils</code> \u548c <code>binutils</code> \u662f GNU \u5de5\u5177\u96c6\u4e2d\u7684\u4e24\u4e2a\u91cd\u8981\u7ec4\u4ef6,\u5206\u522b\u63d0\u4f9b\u4e86\u6838\u5fc3\u5de5\u5177\u548c\u4e8c\u8fdb\u5236\u5de5\u5177\u7684\u529f\u80fd.\u4ee5\u4e0b\u662f\u5bf9\u8fd9\u4e24\u4e2a\u5de5\u5177\u96c6\u7684\u7b80\u8981\u4ecb\u7ecd\uff1a</p>"},{"location":"PA/PA/#coreutils","title":"coreutils","text":""},{"location":"PA/riscv/","title":"risc-v","text":"<p>\u4ec0\u4e48\u662frisc-v?reduced instruction sets computer - v(\u6307\u745e\u514b\u4e94\u4ee3)</p> <ol> <li>\u4e94\u4e2a\u9636\u6bb5\u5206\u522b\u662f\u5982\u4f55\u5b9e\u73b0\u7684?</li> </ol>"},{"location":"PA/riscv/#instruction-fetch-if","title":"\u53d6\u6307(Instruction Fetch, IF)","text":"<p><code>isa_exec_once()</code>\u505a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u60c5\u5c31\u662f\u53d6\u6307\u4ee4. \u5728 <code>NEMU</code> \u4e2d, \u6709\u4e00\u4e2a\u51fd\u6570inst_fetch()(\u5728<code>nemu/include/cpu/ifetch.h</code>\u4e2d\u5b9a\u4e49)\u4e13\u95e8\u8d1f\u8d23\u53d6\u6307\u4ee4\u7684\u5de5\u4f5c. inst_fetch()\u6700\u7ec8\u4f1a\u6839\u636e\u53c2\u6570<code>len</code>\u6765\u8c03\u7528<code>vaddr_ifetch()</code>(\u5728<code>nemu/src/memory/vaddr.c</code>\u4e2d\u5b9a\u4e49), \u800c\u76ee\u524d<code>vaddr_ifetch()</code>\u53c8\u4f1a\u901a\u8fc7<code>paddr_read()</code>\u6765\u8bbf\u95ee\u7269\u7406\u5185\u5b58\u4e2d\u7684\u5185\u5bb9. \u56e0\u6b64, \u53d6\u6307\u64cd\u4f5c\u7684\u672c\u8d28\u53ea\u4e0d\u8fc7\u5c31\u662f\u4e00\u6b21\u5185\u5b58\u7684\u8bbf\u95ee\u800c\u5df2. <pre><code>int isa_exec_once(Decode *s) {\n  s-&gt;isa.inst.val = inst_fetch(&amp;s-&gt;snpc, 4);\n  return decode_exec(s);\n}\n</code></pre> \u8fd9\u4e2a4\u5012\u662f\u8ba9\u6211\u89c9\u5f97\u53ef\u4ee5,\u56e0\u4e3anemu\u67b6\u6784\u5206\u4e86\u51e0\u4e2a\u4e0d\u540c\u7684\u6587\u4ef6,\u8fd9\u6837\u4e5f\u597d,\u56e0\u4e3amagic macro\u6574\u592a\u591a\u4e86,\u770b\u7684\u4e5f\u8111\u888b\u5927,\u76f4\u63a5\u5206\u6210\u4e0d\u540c\u7684\u6587\u4ef6\u4e5f\u597d.(\u5c1a\u672a\u641e\u660e\u767d\u5177\u4f53\u5982\u4f55\u7f16\u8bd1\u7684,\u4f30\u8ba1\u662f\u901a\u8fc7makefile\u6765\u6839\u636e\u67b6\u6784\u9009\u62e9\u4e0d\u540c\u6587\u4ef6\u6765\u8fdb\u884c\u7f16\u8bd1) \u8bbe\u8ba1\u7684\u7cbe\u5999\u5728\u638c\u63e1\u4e86\u9b54\u6cd5\u5b8f\u540e\u53ef\u4ee5\u5927\u6982\u638c\u63e1</p> <p><pre><code>typedef concat(__GUEST_ISA__, _ISADecodeInfo) ISADecodeInfo;\n\ntypedef struct {\n  union {\n    uint32_t val;\n  } inst;\n} MUXDEF(CONFIG_RV64, riscv64_ISADecodeInfo, riscv32_ISADecodeInfo);\n</code></pre> \u8fd9\u4e2a\u5b8f\u7684\u4f5c\u7528\u662f\u6839\u636e<code>__GUEST_ISA__</code>\u7684\u503c\u6765\u9009\u62e9\u4e0d\u540c\u7684\u7ed3\u6784\u4f53\u5b9a\u4e49. \u4f8b\u5982, \u5f53<code>__GUEST_ISA__</code>\u7684\u503c\u4e3a<code>riscv64</code>\u65f6, <code>MUXDEF</code>\u4f1a\u5c55\u5f00\u4e3a<code>riscv64_ISADecodeInfo</code>, \u800c\u5f53<code>__GUEST_ISA__</code>\u7684\u503c\u4e3a<code>riscv32</code>\u65f6, <code>MUXDEF</code>\u4f1a\u5c55\u5f00\u4e3a<code>riscv32_ISADecodeInfo</code>. \u8fd9\u6837, \u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7<code>__GUEST_ISA__</code>\u7684\u503c\u6765\u9009\u62e9\u4e0d\u540c\u7684\u7ed3\u6784\u4f53\u5b9a\u4e49, \u4ece\u800c\u5b9e\u73b0\u4e86\u4e0d\u540c\u6307\u4ee4\u96c6\u7684\u652f\u6301.</p>"},{"location":"PA/riscv/#inst_fetch","title":"inst_fetch","text":"<p>fetch(\u5728\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\uff0c\"fetch\"\u901a\u5e38\u6307\u7684\u662f\u4ece\u5185\u5b58\u4e2d\u83b7\u53d6\u6570\u636e\u7684\u8fc7\u7a0b.\u5728\u5904\u7406\u5668\u7684\u6307\u4ee4\u5468\u671f\u4e2d\uff0c\"fetch\"\u9636\u6bb5\u662f\u6307\u4ece\u5185\u5b58\u4e2d\u83b7\u53d6\u6307\u4ee4\u7684\u8fc7\u7a0b)</p> <p>\u5728\u4f60\u7ed9\u51fa\u7684\u4ee3\u7801\u4e2d\uff0c<code>inst_fetch</code>\u51fd\u6570\u7684\u4f5c\u7528\u5c31\u662f\u4ece\u865a\u62df\u5730\u5740<code>pc</code>\u6307\u5411\u7684\u4f4d\u7f6e\u83b7\u53d6\u957f\u5ea6\u4e3a<code>len</code>\u7684\u6307\u4ee4\uff0c\u5e76\u5c06<code>pc</code>\u5411\u524d\u79fb\u52a8<code>len</code>\u4e2a\u5355\u4f4d.\u8fd9\u4e2a\u51fd\u6570\u662f\u6a21\u62dfCPU\u7684\u6307\u4ee4\u83b7\u53d6\u9636\u6bb5\u7684\u4e00\u90e8\u5206.</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c<code>inst_fetch</code>\u51fd\u6570\u505a\u4e86\u4ee5\u4e0b\u51e0\u4ef6\u4e8b\uff1a</p> <ol> <li>\u8c03\u7528<code>vaddr_ifetch</code>\u51fd\u6570\u4ece\u865a\u62df\u5730\u5740<code>pc</code>\u83b7\u53d6\u957f\u5ea6\u4e3a<code>len</code>\u7684\u6307\u4ee4.</li> <li>\u5c06<code>pc</code>\u5411\u524d\u79fb\u52a8<code>len</code>\u4e2a\u5355\u4f4d\uff0c\u4ee5\u4fbf\u4e0b\u4e00\u6b21\u83b7\u53d6\u6307\u4ee4\u65f6\u80fd\u83b7\u53d6\u5230\u6b63\u786e\u7684\u6307\u4ee4.</li> <li>\u8fd4\u56de\u83b7\u53d6\u5230\u7684\u6307\u4ee4.</li> </ol> <p>\u8fd9\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u83b7\u53d6\u5230\u7684\u6307\u4ee4\uff0c\u5b83\u662f\u4e00\u4e2a<code>uint32_t</code>\u7c7b\u578b\u7684\u503c. <pre><code>#include &lt;memory/vaddr.h&gt;\n\nstatic inline uint32_t inst_fetch(vaddr_t *pc, int len) {\n  uint32_t inst = vaddr_ifetch(*pc, len);\n  (*pc) += len;\n  return inst;\n}\n\nstatic int decode_exec(Decode *s) {\n  int rd = 0;\n  word_t src1 = 0, src2 = 0, imm = 0;\n  s-&gt;dnpc = s-&gt;snpc;\n</code></pre></p>"},{"location":"PA/riscv/#instruction-decode-id","title":"\u8bd1\u7801(instruction decode, ID)","text":"<p>\u63a5\u4e0b\u6765\u4ee3\u7801\u4f1a\u8fdb\u5165decode_exec()\u51fd\u6570, \u5b83\u9996\u5148\u8fdb\u884c\u7684\u662f\u8bd1\u7801\u76f8\u5173\u7684\u64cd\u4f5c. \u8bd1\u7801\u7684\u76ee\u7684\u662f\u5f97\u5230\u6307\u4ee4\u7684\u64cd\u4f5c\u548c\u64cd\u4f5c\u5bf9\u8c61, \u8fd9\u4e3b\u8981\u662f\u901a\u8fc7\u67e5\u770b\u6307\u4ee4\u7684opcode\u6765\u51b3\u5b9a\u7684. \u4e0d\u540cISA\u7684opcode\u4f1a\u51fa\u73b0\u5728\u6307\u4ee4\u7684\u4e0d\u540c\u4f4d\u7f6e, \u6211\u4eec\u53ea\u9700\u8981\u6839\u636e\u6307\u4ee4\u7684\u7f16\u7801\u683c\u5f0f, \u4ece\u53d6\u51fa\u7684\u6307\u4ee4\u4e2d\u8bc6\u522b\u51fa\u76f8\u5e94\u7684opcode\u5373\u53ef.</p> <p>\u548cYEMU\u76f8\u6bd4, NEMU\u4f7f\u7528\u4e00\u79cd\u62bd\u8c61\u5c42\u6b21\u66f4\u9ad8\u7684\u8bd1\u7801\u65b9\u5f0f: \u6a21\u5f0f\u5339\u914d, NEMU\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u6a21\u5f0f\u5b57\u7b26\u4e32\u6765\u6307\u5b9a\u6307\u4ee4\u4e2dopcode, \u4f8b\u5982\u5728riscv32\u4e2d\u6709\u5982\u4e0b\u6a21\u5f0f:</p> <pre><code>static int decode_exec(Decode *s) {\n  int rd = 0;\n  word_t src1 = 0, src2 = 0, imm = 0;\n  s-&gt;dnpc = s-&gt;snpc;\n\n#define INSTPAT_INST(s) ((s)-&gt;isa.inst.val)\n#define INSTPAT_MATCH(s, name, type, ... /* execute body */ ) { \\\n  decode_operand(s, &amp;rd, &amp;src1, &amp;src2, &amp;imm, concat(TYPE_, type)); \\\n  __VA_ARGS__ ; \\\n}\n</code></pre>"},{"location":"PA/riscv/#gcc","title":"gcc","text":"<p>-E -S -c -o file -g -v -nB</p>"},{"location":"PA/riscv/#rtl","title":"RTL\u5b9e\u73b0\u5904\u7406\u5668","text":""},{"location":"PA/riscv/#alu","title":"ALU\u5982\u4f55\u5b9e\u73b0","text":""},{"location":"PA/riscv/#varilator","title":"varilator\u4eff\u771f","text":"<p>\u597d\u7684\uff0c\u6211\u53ef\u4ee5\u4e3a\u60a8\u4ecb\u7ecd\u5982\u4f55\u7f16\u5199 Verilator \u7684 <code>main.cpp</code> \u6587\u4ef6\u3002</p> <p><code>main.cpp</code> \u662f Verilator \u751f\u6210\u7684 C++ \u4ee3\u7801\u7684\u5165\u53e3\u70b9\uff0c\u7528\u4e8e\u6a21\u62df Verilog \u6a21\u5757\u7684\u884c\u4e3a\u3002 \u5b83\u901a\u5e38\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a</p> <p>1.  \u5305\u542b\u5934\u6587\u4ef6\uff1a</p> <pre><code>#include \"Vyour_module.h\"   // Verilator \u751f\u6210\u7684\u5934\u6587\u4ef6\n#include \"verilated.h\"\n#include \"verilated_vcd_c.h\" // \u7528\u4e8e\u751f\u6210\u6ce2\u5f62\u6587\u4ef6 (\u53ef\u9009)\n</code></pre> <ul> <li><code>Vyour_module.h</code> \u662f Verilator \u4e3a\u60a8\u7684 Verilog \u6a21\u5757\u751f\u6210\u7684 C++ \u5934\u6587\u4ef6\u3002 \u5c06 <code>your_module</code> \u66ff\u6362\u4e3a\u60a8\u5b9e\u9645\u7684\u6a21\u5757\u540d\u79f0\u3002</li> <li><code>verilated.h</code> \u5305\u542b Verilator \u7684\u6838\u5fc3\u51fd\u6570\u548c\u7c7b\u3002</li> <li><code>verilated_vcd_c.h</code> \u5305\u542b\u7528\u4e8e\u751f\u6210 VCD \u6ce2\u5f62\u6587\u4ef6\u7684\u51fd\u6570\u548c\u7c7b (\u53ef\u9009)\u3002</li> </ul> <p>2.  \u521b\u5efa\u9876\u5c42\u6a21\u5757\u5b9e\u4f8b\uff1a</p> <pre><code>Vyour_module* top = new Vyour_module;\n</code></pre> <ul> <li><code>Vyour_module</code> \u662f Verilator \u751f\u6210\u7684\u9876\u5c42\u6a21\u5757\u7c7b\u3002</li> <li><code>top</code> \u662f\u6307\u5411\u9876\u5c42\u6a21\u5757\u5b9e\u4f8b\u7684\u6307\u9488\u3002</li> </ul> <p>3.  \u521d\u59cb\u5316\u548c\u4eff\u771f\u5faa\u73af\uff1a</p> <pre><code>vluint64_t main_time = 0; // \u5f53\u524d\u4eff\u771f\u65f6\u95f4\n\n// \u521d\u59cb\u5316\ntop-&gt;reset = 1;\ntop-&gt;clk = 0;\ntop-&gt;eval(); // \u8bc4\u4f30\u521d\u59cb\u72b6\u6001\n\n// \u53ef\u9009\uff1a\u521b\u5efa\u6ce2\u5f62\u6587\u4ef6\nVerilatedVcdC* tfp = new VerilatedVcdC;\ntop-&gt;trace(tfp, 99); // \u8ddf\u8e2a\u6240\u6709\u4fe1\u53f7\ntfp-&gt;open(\"your_module.vcd\"); // \u6253\u5f00\u6ce2\u5f62\u6587\u4ef6\n\n// \u4eff\u771f\u5faa\u73af\nwhile (!Verilated::gotFinish()) {\n  main_time++;\n\n  // \u751f\u6210\u65f6\u949f\u4fe1\u53f7\n  if (main_time % 2 == 0) {\n    top-&gt;clk = !top-&gt;clk;\n  }\n\n  // \u5e94\u7528\u8f93\u5165\u4fe1\u53f7\n  // ...\n\n  // \u8bc4\u4f30\u7535\u8def\n  top-&gt;eval();\n\n  // \u53ef\u9009\uff1a\u8bb0\u5f55\u6ce2\u5f62\u6570\u636e\n  if (tfp) {\n    tfp-&gt;dump(main_time);\n  }\n}\n\n// \u6e05\u7406\nif (tfp) {\n  tfp-&gt;close();\n}\ntop-&gt;final();\ndelete top;\n</code></pre> <ul> <li><code>main_time</code> \u7528\u4e8e\u8ddf\u8e2a\u5f53\u524d\u4eff\u771f\u65f6\u95f4\u3002</li> <li>\u521d\u59cb\u5316\u9636\u6bb5\u5c06 <code>reset</code> \u4fe1\u53f7\u8bbe\u7f6e\u4e3a 1\uff0c\u7136\u540e\u8bc4\u4f30\u7535\u8def\u7684\u521d\u59cb\u72b6\u6001\u3002</li> <li>\u4eff\u771f\u5faa\u73af\u4e2d\uff0c\u60a8\u53ef\u4ee5\u751f\u6210\u65f6\u949f\u4fe1\u53f7\uff0c\u5e94\u7528\u8f93\u5165\u4fe1\u53f7\uff0c\u5e76\u8bc4\u4f30\u7535\u8def\u7684\u884c\u4e3a\u3002</li> <li>\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>VerilatedVcdC</code> \u7c7b\u751f\u6210 VCD \u6ce2\u5f62\u6587\u4ef6\uff0c\u4ee5\u4fbf\u5728\u4eff\u771f\u540e\u8fdb\u884c\u5206\u6790\u3002</li> </ul> <p>4.  \u5b8c\u6574\u793a\u4f8b (\u5047\u8bbe\u60a8\u7684\u6a21\u5757\u540d\u4e3a <code>my_module</code>)\uff1a</p> <pre><code>#include \"Vmy_module.h\"\n#include \"verilated.h\"\n#include \"verilated_vcd_c.h\"\n\nint main(int argc, char** argv, char** env) {\n  Verilated::commandArgs(argc, argv);\n\n  Vmy_module* top = new Vmy_module;\n\n  vluint64_t main_time = 0;\n\n  // \u521d\u59cb\u5316\n  top-&gt;reset = 1;\n  top-&gt;clk = 0;\n  top-&gt;eval();\n\n  // \u521b\u5efa\u6ce2\u5f62\u6587\u4ef6 (\u53ef\u9009)\n  VerilatedVcdC* tfp = new VerilatedVcdC;\n  top-&gt;trace(tfp, 99);\n  tfp-&gt;open(\"my_module.vcd\");\n\n  // \u4eff\u771f\u5faa\u73af\n  while (!Verilated::gotFinish()) {\n    main_time++;\n\n    if (main_time % 2 == 0) {\n      top-&gt;clk = !top-&gt;clk;\n    }\n\n    // \u5e94\u7528\u8f93\u5165\u4fe1\u53f7\n    // ...\n\n    top-&gt;eval();\n\n    if (tfp) {\n      tfp-&gt;dump(main_time);\n    }\n  }\n\n  // \u6e05\u7406\n  if (tfp) {\n    tfp-&gt;close();\n  }\n  top-&gt;final();\n  delete top;\n\n  return 0;\n}\n</code></pre> <p>\u7f16\u8bd1\u548c\u8fd0\u884c\uff1a</p> <ol> <li>\u4f7f\u7528 Verilator \u7f16\u8bd1\u60a8\u7684 Verilog \u6a21\u5757\u548c <code>main.cpp</code> \u6587\u4ef6\u3002</li> <li>\u8fd0\u884c\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u8fdb\u884c\u4eff\u771f\u3002</li> </ol> <p>\u8bf7\u8bb0\u4f4f\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u57fa\u672c\u7684\u793a\u4f8b\uff0c\u60a8\u9700\u8981\u6839\u636e\u60a8\u7684\u5177\u4f53 Verilog \u6a21\u5757\u548c\u4eff\u771f\u9700\u6c42\u8fdb\u884c\u4fee\u6539\u3002</p> <p>\u5e0c\u671b\u8fd9\u4e9b\u4fe1\u606f\u5bf9\u60a8\u6709\u6240\u5e2e\u52a9\uff01</p>"},{"location":"csapp/","title":"CSAPP","text":""},{"location":"csapp/#content","title":"Content","text":"<p>-csapp </p>"},{"location":"csapp/cs144/","title":"cs144","text":"<p>\u524d\u4eba\u7684\u7ecf\u9a8c</p> <p>https://pandaychen.github.io/2024/02/10/A-CS144-COURSE-STUDY/</p> <p>https://csdiy.wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/CS144/#_3</p>"},{"location":"csapp/cs144/#lab1","title":"lab1","text":""},{"location":"csapp/cs144/#tcp","title":"TCP","text":"<p>\u4ece\u4e0d\u505c\u66f4\u6362\u5047\u8bbe,\u76f4\u5230\u534f\u8bae\u53d8\u6210TCP\u534f\u8bae\u7684\u5f62\u72b6,\u5e95\u5c42\u5b58\u5728\u4e22\u5305,\u5b58\u5728\u9519\u8bef\u4f20\u6cd5,\u9700\u8981\u8d85\u65f6\u91cd\u4f20</p>"},{"location":"csapp/csapp/","title":"CSAPP attack lab","text":"<p>\u76ee\u524d\u5f88\u60f3\u77e5\u9053\u7684\u662f\uff0c\u5bc4\u5b58\u5668\u7684\u540d\u5b57\u7684\u82f1\u6587\u5168\u79f0 \u524d\u516d\u4e2a\u5bc4\u5b58\u5668(%rax, %rbx, %rcx, %rdx, %rsi, %rdi)\u79f0\u4e3a\u901a\u7528\u5bc4\u5b58\u5668\uff0c\u6709\u5176\u300e\u7279\u5b9a\u300f\u7684\u7528\u9014\uff1a</p> <p>%rax(%eax) \u7528\u4e8e\u505a\u7d2f\u52a0(add) %rcx(%ecx) \u7528\u4e8e\u8ba1\u6570(count) %rdx(%edx) \u7528\u4e8e\u4fdd\u5b58\u6570\u636e(data) %rbx(%ebx) \u7528\u4e8e\u505a\u5185\u5b58\u67e5\u627e\u7684\u57fa\u7840\u5730\u5740(base) %rsi(%esi) \u7528\u4e8e\u4fdd\u5b58\u6e90\u7d22\u5f15\u503c(source) %rdi(%edi) \u7528\u4e8e\u4fdd\u5b58\u76ee\u6807\u7d22\u5f15\u503c(destination)</p> <p>shl(shift logical left) shr(shift logical right) \u903b\u8f91\u53f3\u79fb sar(shift arithmetic left) leaq(load effective address) inc(increament) dec(decreament)</p> <p>\u9700\u8981\u4e24\u4e2a\u64cd\u4f5c\u6570\u7684\u6307\u4ee4</p> <ul> <li>addq Src, Dest -&gt; Dest = Dest + Src</li> <li>subq Src, Dest -&gt; Dest = Dest - Src</li> <li>imulq Src, Dest -&gt; Dest = Dest * Src</li> <li>salq Src, Dest -&gt; Dest = Dest &lt;&lt; Src</li> <li>sarq Src, Dest -&gt; Dest = Dest &gt;&gt; Src</li> <li>shrq Src, Dest -&gt; Dest = Dest &gt;&gt; Src</li> <li>xorq Src, Dest -&gt; Dest = Dest ^ Src</li> <li>andq Src, Dest -&gt; Dest = Dest &amp; Src</li> <li>orq Src, Dest -&gt; Dest = Dest | Src</li> </ul>"},{"location":"csapp/csapp/#_1","title":"\u6d41\u7a0b\u63a7\u5236","text":"\u5728\u5c0f\u571f\u5200\u7684\u535a\u5ba2\u4e2d\u590d\u5236\u6765\u7684<pre><code>// Do While \u7684 C \u8bed\u8a00\u4ee3\u7801\nlong pcount_do(unsigned long x)\n{\n    long result = 0;\n    do {\n        result += x &amp; 0x1;\n        x &gt;&gt;= 1;\n    } while (x);\n    return result;\n}\n\n// Goto \u7248\u672c\nlong pcount_goto(unsigned long x)\n{\n    long result = 0;\nloop:\n    result += x &amp; 0x1;\n    x &gt;&gt;= 1;\n    if (x) goto loop;\n    return result;\n}\n// ctrl+shift+[ \u6298\u53e0\u5149\u6807\u6240\u5904\u7684\u4ee3\u7801\u5757\n</code></pre> <p>\u8be5\u51fd\u6570\u8ba1\u7b97\u53c2\u6570x\u4e2d\u6709\u591a\u5c11\u4f4d\u662f1(\u7a81\u7136\u60f3\u5230\u6709\u8bb8\u591a\u65b9\u6cd5\u53ef\u4ee5\u4f18\u5316\u8be5\u51fd\u6570)https://zhuanlan.zhihu.com/p/341488123 \u3000\u3000sparse_popcnt \u5bf9 iterated_popcnt \u505a\u4e86\u6539\u8fdb\uff0c\u6bcf\u6b21\u8fed\u4ee3\u603b\u662f\u5c06\u6700\u53f3\u8fb9\u7684\u975e\u96f6\u4f4d\u7f6e\u96f6\u3002\u8fd9\u662f\u51cf\u6cd5\u7684\u5999\u7528\u3002\u8bd5\u60f3\u4e00\u4e0b\uff0c\u4e00\u4e2a\u4ec5\u6700\u9ad8\u4f4d\u4e3a1\u7684\u6574\u6570\uff0c\u7528\u6b64\u65b9\u6cd5\u7684\u8bdd\u4ec5\u9700\u4e00\u6b21\u8fed\u4ee3\uff1b\u800c iterated_popcnt \u8fd8\u662f\u4f1a\u201c\u4e56\u4e56\u5730\u201d\u8fed\u4ee3 32 \u6b21\u3002</p> iterated_popcntsparse_popcnt <pre><code>    int iterated_popcnt(uint32_t n)\n    {\n        int count = 0;\n        for(; n; n &gt;&gt;= 1)\n            count += n &amp; 1U;\n        return count;\n    }\n</code></pre> <pre><code>int sparse_popcnt(uint32_t n)\n{\n    int count = 0;\n    while(n)\n    {\n        ++count;\n        n &amp;= n - 1;\n    }\n    return count;\n}\n</code></pre>"},{"location":"csapp/csapp/#_2","title":"\u8be5\u51fd\u6570\u7684\u6c47\u7f16\u4ee3\u7801","text":"<pre><code>        movl    $0, %eax    # result = 0\n.L2:                    # loop:\n    movq    %rdi, %rdx\n    andl    $1, %edx    # t = x &amp; 0x1\n    addq    %rdx, %rax  # result += t\n    shrq    %rdi        # x &gt;&gt;= 1\n    jne     .L2         # if (x) goto loop\n    rep; ret\n</code></pre>"},{"location":"csapp/csapp/#while-do-while","title":"while \u548cdo-while","text":"<p>\u5148\u6765\u770b\u770b\u5e76\u4e0d\u90a3\u4e48\u5e38\u7528\u7684 Do-While \u8bed\u53e5\u4ee5\u53ca\u5bf9\u5e94\u4f7f\u7528 goto \u8bed\u53e5\u8fdb\u884c\u8df3\u8f6c\u7684\u7248\u672c\uff1a <pre><code>// Do While \u7684 C \u8bed\u8a00\u4ee3\u7801\nlong pcount_do(unsigned long x)\n{\n    long result = 0;\n    do {\n        result += x &amp; 0x1;\n        x &gt;&gt;= 1;\n    } while (x);\n    return result;\n}\n\n// Goto \u7248\u672c\nlong pcount_goto(unsigned long x)\n{\n    long result = 0;\nloop:\n    result += x &amp; 0x1;\n    x &gt;&gt;= 1;\n    if (x) goto loop;\n    return result;\n}\n</code></pre></p> <p>\u800c\u5bf9\u4e8e While \u8bed\u53e5\u7684\u8f6c\u6362\uff0c\u4f1a\u76f4\u63a5\u8df3\u5230\u4e2d\u95f4\uff0c\u5982\uff1a <pre><code>// C While version\nwhile (Test)\n    Body\n\n// Goto Version\n    goto test;\nloop:\n    Body\ntest:\n    if (Test)\n        goto loop;\ndone:\n</code></pre> \u5982\u679c\u5728\u7f16\u8bd1\u5668\u4e2d\u5f00\u542f -O1 \u4f18\u5316\uff0c\u90a3\u4e48\u4f1a\u628a While \u5148\u7ffb\u8bd1\u6210 Do-While\uff0c\u7136\u540e\u518d\u8f6c\u6362\u6210\u5bf9\u5e94\u7684 Goto \u7248\u672c\uff0c\u56e0\u4e3a Do-While \u8bed\u53e5\u6267\u884c\u8d77\u6765\u66f4\u5feb\uff0c\u66f4\u7b26\u5408 CPU \u7684\u8fd0\u7b97\u6a21\u578b\u3002</p>"},{"location":"csapp/csapp/#for-loops","title":"For Loops","text":"for loops\u7684\u7b49\u4ef7<pre><code>for(init-expr;test-expr;update-expr){\n    body-statement\n}\n\ninit-expr;\nwhile(test-expr){\n    body-statement\n    update-expr\n}\n</code></pre> <p>for\u5faa\u73af\u662f\u5982\u4f55\u5b9e\u73b0n\u7684\u9636\u4e58</p> cx86asm <pre><code>long fact_for(long n){\n    long i;\n    long result = 1;\n    for(i=2;i&lt;=n;i++){\n        result *= i;\n    }\n    return result;\n}\n</code></pre> <pre><code>    movl $1 %eax\n    movl $2 %edx\n    jmp .L2\n.L3\n    imulq %rdx,%rax\n    addq $1,%rdx\n.L2\n    cmpq %rdi,%rdx\n    jl .L3\n    rep ret\n</code></pre>"},{"location":"leetcode/","title":"leetcode","text":""},{"location":"leetcode/#_1","title":"\u57fa\u672c\u7b97\u6cd5","text":"<p>-base algorithum</p>"},{"location":"leetcode/#_2","title":"leetcode","text":""},{"location":"leetcode/base/","title":"leetcode","text":""},{"location":"leetcode/base/#_1","title":"\u57fa\u672c\u7b97\u6cd5","text":""},{"location":"leetcode/base/#_2","title":"\u6570\u636e\u7ed3\u6784","text":""},{"location":"leetcode/base/#_3","title":"\u94fe\u8868","text":"<p>\u5355\u94fe\u8868\u7684\u57fa\u672c\u6280\u5de7 <pre><code>1. \u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u94fe\u8868\n\n2. \u94fe\u8868\u7684\u5206\u89e3\n\n3. \u5408\u5e76 k \u4e2a\u6709\u5e8f\u94fe\u8868\n\n4. \u5bfb\u627e\u5355\u94fe\u8868\u7684\u5012\u6570\u7b2c k \u4e2a\u8282\u70b9\n\n5. \u5bfb\u627e\u5355\u94fe\u8868\u7684\u4e2d\u70b9\n\n6. \u5224\u65ad\u5355\u94fe\u8868\u662f\u5426\u5305\u542b\u73af\u5e76\u627e\u51fa\u73af\u8d77\u70b9\n\n7. \u5224\u65ad\u4e24\u4e2a\u5355\u94fe\u8868\u662f\u5426\u76f8\u4ea4\u5e76\u627e\u51fa\u4ea4\u70b9\n</code></pre></p>"},{"location":"leetcode/base/#_4","title":"\u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u94fe\u8868","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u8bbe\u5b9a\u4e00\u4e2a\u54e8\u5175\u8282\u70b9 prehead \uff0c\u8fd9\u53ef\u4ee5\u5728\u6700\u540e\u8ba9\u6211\u4eec\u6bd4\u8f83\u5bb9\u6613\u5730\u8fd4\u56de\u5408\u5e76\u540e\u7684\u94fe\u8868\u3002\u6211\u4eec\u7ef4\u62a4\u4e00\u4e2a prev \u6307\u9488\uff0c\u6211\u4eec\u9700\u8981\u505a\u7684\u662f\u8c03\u6574\u5b83\u7684 next \u6307\u9488\u3002\u7136\u540e\uff0c\u6211\u4eec\u91cd\u590d\u4ee5\u4e0b\u8fc7\u7a0b\uff0c\u76f4\u5230 l1 \u6216\u8005 l2 \u6307\u5411\u4e86 null \uff1a\u5982\u679c l1 \u5f53\u524d\u8282\u70b9\u7684\u503c\u5c0f\u4e8e\u7b49\u4e8e l2 \uff0c\u6211\u4eec\u5c31\u628a l1 \u5f53\u524d\u7684\u8282\u70b9\u63a5\u5728 prev \u8282\u70b9\u7684\u540e\u9762\u540c\u65f6\u5c06 l1 \u6307\u9488\u5f80\u540e\u79fb\u4e00\u4f4d\u3002\u5426\u5219\uff0c\u6211\u4eec\u5bf9 l2 \u505a\u540c\u6837\u7684\u64cd\u4f5c\u3002\u4e0d\u7ba1\u6211\u4eec\u5c06\u54ea\u4e00\u4e2a\u5143\u7d20\u63a5\u5728\u4e86\u540e\u9762\uff0c\u6211\u4eec\u90fd\u9700\u8981\u628a prev \u5411\u540e\u79fb\u4e00\u4f4d\u3002</p> <p>\u5728\u5faa\u73af\u7ec8\u6b62\u7684\u65f6\u5019\uff0c l1 \u548c l2 \u81f3\u591a\u6709\u4e00\u4e2a\u662f\u975e\u7a7a\u7684\u3002\u7531\u4e8e\u8f93\u5165\u7684\u4e24\u4e2a\u94fe\u8868\u90fd\u662f\u6709\u5e8f\u7684\uff0c\u6240\u4ee5\u4e0d\u7ba1\u54ea\u4e2a\u94fe\u8868\u662f\u975e\u7a7a\u7684\uff0c\u5b83\u5305\u542b\u7684\u6240\u6709\u5143\u7d20\u90fd\u6bd4\u524d\u9762\u5df2\u7ecf\u5408\u5e76\u94fe\u8868\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u8981\u5927\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ea\u9700\u8981\u7b80\u5355\u5730\u5c06\u975e\u7a7a\u94fe\u8868\u63a5\u5728\u5408\u5e76\u94fe\u8868\u7684\u540e\u9762\uff0c\u5e76\u8fd4\u56de\u5408\u5e76\u94fe\u8868\u5373\u53ef\u3002(\u8fd9\u6bb5\u662f\u4eceleetcode\u590d\u5236\u7684) <pre><code> /**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     ListNode *next;\n *     ListNode() : val(0), next(nullptr) {}\n *     ListNode(int x) : val(x), next(nullptr) {}\n *     ListNode(int x, ListNode *next) : val(x), next(next) {}\n * };\n */\nclass Solution {\npublic:\n    ListNode* mergeTwoLists(ListNode* list1, ListNode* list2) {\n               ListNode* prehead = new ListNode(-1),*pre = prehead;\n               while(list1&amp;&amp;list2){\n                   if(list1-&gt;val &lt; list2-&gt;val){\n                       prehead-&gt;next = list1;\n                       list1 = list1-&gt;next;\n                       prehead = prehead-&gt;next;\n                   }else{\n                       prehead-&gt;next = list2;\n                       list2 = list2-&gt;next;\n                       prehead = prehead-&gt;next;\n                   }\n               }\n                prehead-&gt;next = list1==nullptr?list2:list1;\n                return pre-&gt;next;\n    }\n};\n</code></pre></p>"},{"location":"leetcode/base/#_5","title":"\u5355\u94fe\u8868\u7684\u5206\u89e3","text":"<pre><code>ListNode* partition(ListNode* head, int x) {\n    // \u5b58\u653e\u5c0f\u4e8e x \u7684\u94fe\u8868\u7684\u865a\u62df\u5934\u7ed3\u70b9\n    ListNode* dummy1 = new ListNode(-1);\n    // \u5b58\u653e\u5927\u4e8e\u7b49\u4e8e x \u7684\u94fe\u8868\u7684\u865a\u62df\u5934\u7ed3\u70b9\n    ListNode* dummy2 = new ListNode(-1);\n    // p1, p2 \u6307\u9488\u8d1f\u8d23\u751f\u6210\u7ed3\u679c\u94fe\u8868\n    ListNode* p1 = dummy1, * p2 = dummy2;\n    // p \u8d1f\u8d23\u904d\u5386\u539f\u94fe\u8868\uff0c\u7c7b\u4f3c\u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u94fe\u8868\u7684\u903b\u8f91\n    // \u8fd9\u91cc\u662f\u5c06\u4e00\u4e2a\u94fe\u8868\u5206\u89e3\u6210\u4e24\u4e2a\u94fe\u8868\n    ListNode* p = head;\n    while (p != nullptr) {\n        if (p-&gt;val &gt;= x) {\n            p2-&gt;next = p;\n            p2 = p2-&gt;next;\n        } else {\n            p1-&gt;next = p;\n            p1 = p1-&gt;next;\n        }\n        // \u65ad\u5f00\u539f\u94fe\u8868\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u7684 next \u6307\u9488\n        ListNode* temp = p-&gt;next;\n        p-&gt;next = nullptr;\n        p = temp;\n    }\n    // \u8fde\u63a5\u4e24\u4e2a\u94fe\u8868\n    p1-&gt;next = dummy2-&gt;next;\n\n    return dummy1-&gt;next;\n}\n</code></pre>"},{"location":"life/","title":"\u6211\u7684\u751f\u6d3b","text":"<p>\u5206\u4eab\u6211\u7684\u751f\u6d3b.</p>"},{"location":"life/#_2","title":"\u5982\u4f55\u5206\u4eab?","text":"<p>\u521d\u6b65\u6211\u6253\u7b97\u4f9d\u65e7\u662f\u4f9d\u6258\u4e8emkdocs\u8fd9\u4e2a\u9879\u76ee,\u867d\u7136(\u6211\u66f4\u559c\u6b22hugo\u7684\u8fd9\u4e2a\u6837\u5f0f,\u4f46\u662fmkdocs\u6298\u817e\u597d\u4e86\u4e00\u4e2a\u4e0d\u9700\u8981\u672c\u5730\u7f16\u8bd1\u7684\u6d41\u7a0b,\u4f9d\u6258ci.yml,\u6216\u8bb8\u53ef\u4ee5\u66f4\u6539\u4e00\u4e0bhugo Papermod,\u5373\u6211\u7684\u4e3b\u9875\u9879\u76ee\u6765\u652f\u6301\u4e00\u4e0b\u4ec5\u9700\u8981\u672c\u5730\u4fee\u6539\u6587\u672c,\u7f16\u8bd1\u63a8\u9001\u4ea4\u7ed9github\u5c31\u53ef\u4ee5.)</p> <p>life\u6587\u4ef6\u5939\u4e0b,\u6309\u7167\u65e5\u671f(obsidian\u683c\u5f0f\u7684year/month/day)\u8fd9\u6837\u521b\u5efa\u6587\u4ef6\u5939,\u4ee5\u4e00\u5929\u7684\u5355\u4f4d\u6765\u7ba1\u7406\u6587\u672c\u548c\u63d2\u5165\u5176\u4e2d\u7684\u56fe\u7247.</p>"},{"location":"life/#_3","title":"\u5357\u4eac\u4e4b\u65c5","text":"<p>-\u664b\u8c12\u4e2d\u5c71\u9675</p>"},{"location":"life/#_4","title":"\u505a\u996d\u6280\u5de7\u603b\u7ed3","text":"<p>-\u505a\u996d</p>"},{"location":"life/2024-6-15/2024-6-15/","title":"\u5357\u4eac\u4e4b\u65c5","text":"<p>\u4e00\u76f4\u60f3\u53bb\u62dc\u8c12\u4e2d\u5c71\u9675,\u611f\u5ff5\u4e8e\u5b59\u4e2d\u5c71\u5148\u751f\u4e00\u751f\u8d77\u4f0f\u8f6c\u6298,\u8bfb\u4ed6\u7684&lt;&lt;\u5efa\u56fd\u65b9\u7565&gt;&gt;\u6536\u83b7\u5f88\u591a.</p>"},{"location":"life/2024-6-15/2024-6-15/#day1","title":"day1","text":"<p>\u6c49\u53e3\u7ad9\u5230\u5357\u4eac\u5357\u7ad9,\u5dee\u4e0d\u591a\u4e09\u5c0f\u65f6.\u5357\u4eac\u771f\u7684\u662f\u4e00\u5ea7\u5f88\u4f18\u96c5\u7684\u57ce\u5e02,\u5730\u94c1\u662f\u4eba\u6587\u5730\u94c1.\u5b9a\u4e0b\u89c4\u5212,\u8981\u53bb\u4e2d\u5c71\u9675\u548c\u5357\u4eac\u535a\u7269\u9662.</p>"},{"location":"life/2024-6-15/2024-6-15/#_2","title":"\u5357\u4eac\u535a\u7269\u9662","text":"<p>\u770b\u4e86\u53cd\u6e05\u590d\u660e\u7cfb\u5217\u4f5c\u54c1,\u516b\u5927\u5c71\u4eba,\u660e\u5b98\u5458\u8096\u50cf......</p>"},{"location":"life/2024-6-15/2024-6-15/#_3","title":"\u664b\u8c12\u4e2d\u5c71\u9675","text":"<p>\u60f3\u5230\u5f88\u591a.</p> <p>\u4e0b\u5348\u53bb\u4e86\u4e1c\u5357\u5927\u5b66\u724c\u697c\u6821\u533a,\u53ef\u60dc\u6ca1\u6709\u7ec6\u770b.</p>"},{"location":"life/2024-6-15/2024-6-15/#_4","title":"\u9057\u61be","text":"<p>\u56e0\u4e3a\u5b66\u6821\u8fd9\u8fb9\u6d3b\u52a8,\u6ca1\u6765\u5f97\u53ca\u796d\u62dc\u660e\u5b5d\u9675,\u4e2d\u5c71\u5148\u751f\u5f53\u5e74\u7387\u6587\u6b66\u5b98\u5458\u660e\u5b5d\u9675(\u8bb8\u591a\u4eba\u90fd\u5728\u8d28\u7591,\u4e3a\u4ec0\u4e48\u63a8\u7ffb\u4e86\u5c01\u5efa\u541b\u4e3b\u4e13\u5236\u4e4b\u540e,\u5b59\u4e2d\u5c71\u8fd8\u8981\u53bb\u796d\u5960\u4e00\u4e2a\u5c01\u5efa\u541b\u4e3b.1912\u5e742\u670812\u65e5,\u6e05\u5e1d\u9000\u4f4d\u540e,\u5b59\u4e2d\u5c71\u4e8e13\u65e5\u53d1\u51fa\u300a\u8f9e\u4e34\u65f6\u5927\u603b\u7edf\u6587\u300b\u548c\u300a\u63a8\u8350\u8881\u4e16\u51ef\u6587\u300b,\u5e76\u4e8e15\u65e5\u4e3e\u884c\u201c\u6c11\u56fd\u7edf\u4e00\u5927\u5178\u201d.\u6b64\u6b21\u62dc\u8c12\u6d3b\u52a8\u662f\u5927\u5178\u7684\u4e00\u9879\u91cd\u8981\u5185\u5bb9,\u4e4b\u540e\u4ee5\u5b59\u4e2d\u5c71\u5148\u751f\u7684\u540d\u4e49\u53d1\u8868\u4e86\u4e24\u4e2a\u6587\u544a\u300a\u796d\u660e\u592a\u7956\u6587\u300b\u548c\u300a\u8c12\u660e\u592a\u7956\u9675\u6587\u300b.\u524d\u4e00\u7bc7\u4e3a\u201c\u795d\u544a\u6587\u201d,\u540e\u4e00\u7bc7\u662f\u201c\u5ba3\u8bfb\u6587\u201d.\u300a\u796d\u660e\u592a\u7956\u6587\u300b\u4e2d\u5199\u9053\uff1a\u201c\u8d75\u5b8b\u672b\u9020,\u4ee3\u4e8e\u8499\u53e4,\u795e\u5dde\u9646\u6c89,\u51e0\u53ca\u767e\u5e74\u2026\u2026\u6ee1\u6e05\u4e58\u95f4\u5165\u636e\u4e2d\u590f,\u55df\u6211\u5e2e\u4eba\u8bf8\u592b\u5144\u5f1f,\u8fed\u8d77\u8fed\u789a,\u81f3\u4e8e\u4e8c\u767e\u516d\u5341\u6709\u516b\u5e74.\u201d\u5b59\u4e2d\u5c71\u628a\u5143\u3001\u6e05\u4e24\u4ee3\u5f53\u6210\u662f\u4e2d\u56fd\u4ea1\u56fd\u7684\u5e74\u4ee3,\u6b64\u6b21\u8c12\u9675\u662f\u5728\u544a\u8beb\u4e16\u4eba,\u6c49\u4eba\u91cd\u65b0\u638c\u6743,\u6062\u590d\u4e2d\u534e,\u5c31\u50cf\u5f53\u5e74\u6731\u5143\u748b\u6d88\u706d\u5143\u671d\u5efa\u7acb\u660e\u671d\u4e00\u6837.https://dfz.nanjing.gov.cn/gzdt/202110/t20211012_3155528.html)</p> <p></p>"},{"location":"life/2024-7-17/2024-7-17/","title":"\u53a8\u827a","text":"<p>\u56e0\u4e3a\u5b66\u8f66\u539f\u56e0,\u8fd9\u6bb5\u65f6\u95f4\u4e00\u76f4\u81ea\u5df1\u505a\u996d,\u603b\u7ed3\u5982\u4e0b\u6280\u5de7,\u4ee5\u98e8\u8bfb\u8005.</p>"},{"location":"life/2024-7-17/2024-7-17/#_2","title":"\u6280\u5de7","text":"<ol> <li>\u716e\u996d: \u7c73/\u6c34=1/1</li> <li>\u505a\u725b\u8089\u8981\u5782\u76f4\u725b\u8089\u7eb9\u8def\u5206\u5272\u725b\u8089,\u505a\u725b\u8089\u8fd8\u522b\u712f\u6c34,\u5bb9\u6613\u5f88\u8001</li> <li>\u505a\u7ea2\u70e7\u8089\u8981\u7528\u9ad8\u538b\u9505</li> <li>\u6d17\u7897\u5f88\u75db\u82e6</li> <li>\u9e21\u86cb\u8fd8\u662f\u4e70\u65e0\u83cc\u7684\u5427(\u9664\u975e\u613f\u610f\u6d6a\u8d39\u65f6\u95f4\u53bb\u6d17,\u4e0d\u597d\u641e)</li> </ol> <p>2025\u5e743\u670826\u65e5\u662f\u5b59\u4e2d\u5c71\u5148\u751f\u5fcc\u65e5,\u6216\u8005\u5728\u5317\u4eac\u6216\u8005\u53bb\u5357\u4eac\u7eaa\u5ff5\u4e00\u4e0b,\u8fd9\u4e2a\u8fd8\u6ca1\u5b9a.(\u5728\u5317\u4eac\u53ef\u4ee5\u53bb\u4e00\u4e0b\u660e\u5341\u4e09\u9675,\u5728\u5357\u4eac\u53ef\u4ee5\u53bb\u4e00\u4e0b\u4e2d\u5c71\u9675,\u660e\u5b5d\u9675)</p>"},{"location":"tool/","title":"\u4ecb\u7ecd\u4e00\u4e9b\u4f7f\u7528\u7684\u5de5\u5177","text":"<p>-git</p> <p>-chatgpt</p> <p>-gdb</p> <p>-rust</p> <p>-shell_gpt</p>"},{"location":"tool/chatgpt/","title":"chatgpt prompt","text":"<p>\u64b0\u5199Prompt\u7684\u4e24\u4e2a\u5173\u952e\u539f\u5219\uff1a 1. \u7ed9\u51fa\u6e05\u6670\u548c\u660e\u786e\u7684\u6307\u4ee4   \uff081\uff09\u4f7f\u7528\u5206\u9694\u7b26\u6e05\u6670\u5730\u5c06Prompt\u8f93\u5165\u7684\u4e0d\u540c\u90e8\u5206\u5206\u5f00   \uff082\uff09\u8981\u6c42\u7ed3\u6784\u5316\u7684\u8f93\u51fa\uff0c\u5982\u8f93\u51fa\u4e3a<code>json</code>\u3001<code>html</code>\u3001<code>xml</code>\u7b49\u683c\u5f0f   \uff083\uff09\u68c0\u67e5\u5185\u5bb9\u662f\u5426\u6ee1\u8db3\u4efb\u52a1\u6240\u9700\u7684\u6761\u4ef6\uff0c\u62d2\u7edd\u65e0\u6548\u6216\u975e\u6cd5\u7684\u5185\u5bb9   \uff084\uff09\u7ed9\u51fa\u51e0\u4e2a\u4efb\u52a1\u7684\u793a\u4f8b\uff08<code>Few-shot</code>\uff09 2. \u7ed9\u6a21\u578b\u4e00\u4e9b\u601d\u8003\u7684\u65f6\u95f4   \uff081\uff09\u544a\u77e5\u6a21\u578b\u5b8c\u6210\u4efb\u52a1\u6240\u9700\u7684\u6b65\u9aa4   \uff082\uff09\u6307\u5bfc\u6a21\u578b\u5728\u5f97\u51fa\u7ed3\u8bba\u4e4b\u524d\u5148\u81ea\u884c\u89e3\u51b3\u95ee\u9898\u5177\u4f53\u5185\u5bb9\u7ee7\u7eed\u5f80\u4e0b\u770b\u4f7f\u7528\u5206\u9694\u7b26\u6e05\u6670\u5730\u5c06<code>Prompt</code>\u8f93\u5165\u7684\u4e0d\u540c\u90e8\u5206\u5206\u5f00 <code>Prompt</code>\u901a\u5e38\u5305\u542b\u4e00\u4e9b\u6307\u4ee4\u548c\u5f85\u5904\u7406\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u7528\u5206\u9694\u7b26\u5c06\u6307\u4ee4\u548c\u5185\u5bb9\u660e\u786e\u5206\u5f00. \u8fd9\u91cc\u7684\u5206\u9694\u7b26\u53ef\u4ee5\u662f \u4e09\u4e2a\u5f15\u53f7(\"\"\")\u3001 \u4e09\u4e2a\u53cd\u5f15\u53f7(<code>``)\u3001 \u4e09\u6761\u77ed\u7ebf(---)\u3001 \u5c16\u62ec\u53f7(&lt;&gt;) xml tag(</code><code></code>`)\u7b49\u3002  <p>\u4e0b\u9762\u4e3e\u4f8b\u8bf4\u660e\uff1a  \u6211\u4eec\u53ef\u4ee5\u5199\u4e00\u4e2a\u8fd9\u6837\u7684<code>Prompt</code>\uff0c\u6765\u4e3a\u4e00\u6bb5\u6587\u672c\u5199\u6458\u8981\uff1a  ''' \u5c06\u4e0b\u9762\u7528\u4e09\u4e2a\u53cd\u5f15\u53f7\u62ec\u8d77\u6765\u7684\u5185\u5bb9\u603b\u7ed3\u4e3a\u4e00\u53e5\u8bdd\uff1a  \u9700\u8981\u603b\u7ed3\u7684\u6587\u672c\u662f\uff1a  ```  \u4f60\u5e94\u8be5\u63d0\u4f9b\u5c3d\u53ef\u80fd\u6e05\u6670\u548c\u5177\u4f53\u7684\u6307\u4ee4\u6765\u8868\u8fbe\u4f60\u60f3\u8ba9\u6a21\u578b\u505a\u4ec0\u4e48\u3002\u8fd9\u5c06\u5f15\u5bfc\u6a21\u578b\u671d\u7740\u671f\u671b\u7684\u8f93\u51fa\u65b9\u5411\u53d1\u5c55\uff0c\u5e76\u51cf\u5c11\u6536\u5230\u65e0\u5173\u6216\u4e0d\u6b63\u786e\u54cd\u5e94\u7684\u53ef\u80fd\u6027\u3002\u4e0d\u8981\u6df7\u6dc6\u5199\u4e00\u4e2a\u6e05\u6670\u7684\u63d0\u793a\u548c\u5199\u4e00\u4e2a\u7b80\u77ed\u7684\u63d0\u793a\u3002\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u66f4\u957f\u7684\u63d0\u793a\u63d0\u4f9b\u66f4\u591a\u7684\u6e05\u6670\u5ea6\u548c\u4e0a\u4e0b\u6587\uff0c\u8fd9\u53ef\u4ee5\u5bfc\u81f4\u66f4\u8be6\u7ec6\u548c\u76f8\u5173\u7684\u8f93\u51fa.  ```   ChatGPT\u8f93\u51fa\u5982\u4e0b\uff1a \u63d0\u4f9b\u6e05\u6670\u5177\u4f53\u7684\u6307\u4ee4\u53ef\u4ee5\u5f15\u5bfc\u6a21\u578b\u671d\u5411\u671f\u671b\u7684\u8f93\u51fa\u65b9\u5411\u53d1\u5c55\uff0c\u51cf\u5c11\u4e0d\u6b63\u786e\u54cd\u5e94\u7684\u53ef\u80fd\u6027\u3002\u63d0\u793a\u4e0d\u8981\u7b80\u77ed\uff0c\u66f4\u957f\u7684\u63d0\u793a\u63d0\u4f9b\u66f4\u591a\u6e05\u6670\u5ea6\u548c\u4e0a\u4e0b\u6587\uff0c\u53ef\u4ee5\u5bfc\u81f4\u66f4\u8be6\u7ec6\u76f8\u5173\u7684\u8f93\u51fa\u3002 ''' \u8981\u6c42\u7ed3\u6784\u5316\u7684\u8f93\u51fa\uff0c\u5982\u8f93\u51fa\u4e3ajson\u3001html\u3001xml\u7b49\u683c\u5f0f</p> <ol> <li>\u626e\u6f14\u89d2\u8272</li> </ol> <p>'''     \u4f60\u662f\u4e00\u540d [XXX\u9886\u57df] \u7684\u4e13\u5bb6,\u4e0b\u9762\u8bf7\u5bf9\u6211\u7ed9\u51fa\u7684XXXX\u8fdb\u884c\u540c\u884c\u8bc4\u8bae.</p> <p>'''</p>"},{"location":"tool/gdb/","title":"gdb \u7684\u539f\u7406","text":"<p>Linux \u4e0b\u5e38\u7528\u7684\u7a0b\u5e8f\u8c03\u8bd5\u5668 gdb \u662f\u4ec0\u4e48\u539f\u7406\uff1f - MeteorZ\u7684\u56de\u7b54 - \u77e5\u4e4e https://www.zhihu.com/question/578172542/answer/3389041105</p> <p>ptrace(),</p>"},{"location":"tool/gdb/#_1","title":"\u67e5\u770b\u5bc4\u5b58\u5668\u7684\u503c","text":"<p>\u6211\u5bf9\u5bc4\u5b58\u5668\u503c\u7684\u652f\u6301\u8fd8\u662f\u6709\u95ee\u9898,\u539f\u56e0\u662fregs\u7684\u5bc4\u5b58\u5668\u540d\u5b57\u53d8\u4e86\u76f8\u5e94\u7684\u5339\u914d\u89c4\u5219\u4e5f\u8981\u53d8,\u6709\u70b9\u5c0f\u4e11,\u56e0\u4e3a\u4e4b\u524d\u5c1d\u8bd5\u7528\u5b8f\u6765\u652f\u6301\u591a\u5e73\u53f0,\u73b0\u5728\u8fd8\u662f\u5f97\u6839\u636e\u67b6\u6784\u6765\u53d8\u8fd9\u4e2a\u5bc4\u5b58\u5668\u540d\u5b57\u5339\u914d\u7684\u6b63\u5219\u89c4\u5219.</p>"},{"location":"tool/gdb/#_2","title":"\u76d1\u89c6\u70b9","text":"<p><pre><code>make: *** [/home/along/ysyx-workbench/nemu/scripts/native.mk:38: run] Segmentation fault (core dumped)\n</code></pre> \u5f88\u96be\u868c\u7684\u4f4f\u7684\u662f,\u8fd9\u4e9b\u6307\u4ee4</p>"},{"location":"tool/git/","title":"git","text":""},{"location":"tool/git/#git_1","title":"git\u63d0\u4ea4\u89e3\u51b3\u672c\u5730\u4e0e\u8fdc\u7a0b\u51b2\u7a81","text":"<p>how-to-resolve-git-pull-conflicts-and-overwrite-local-changes-step-by-step-guide</p> <p>markdown\u7684\u5f15\u7528\u8bed\u6cd5  <pre><code>    [title](url)\n    &lt;http://baidu.com&gt;\n    [tutorial][1]\n\n    [1]: https://baidu.com\n</code></pre> tutorial</p>"},{"location":"tool/git/#_1","title":"\u4ecb\u7ecd","text":"<p>\u672c\u5730git\u4ed3\u5e93\u548c\u8fdc\u7a0b\u4ed3\u5e93\u51b2\u7a81\u662f\u6307\u5f53\u4f60\u8bd5\u56fe\u5c06\u4f60\u7684\u672c\u5730\u4ee3\u7801\u63a8\u9001\u5230\u4e00\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u65f6,\u53d1\u73b0\u8fdc\u7a0b\u4ed3\u5e93\u5df2\u7ecf\u6709\u4e86\u548c\u4f60\u7684\u672c\u5730\u4ee3\u7801\u4e0d\u540c\u7684\u4fee\u6539,\u5bfc\u81f4Git\u65e0\u6cd5\u81ea\u52a8\u5408\u5e76\u5b83\u4eec.\u4f60\u9700\u8981\u624b\u52a8\u89e3\u51b3\u51b2\u7a81,\u7136\u540e\u518d\u63a8\u9001\u4f60\u7684\u4ee3\u7801.</p> <p>\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u89e3\u51b3\u672c\u5730git\u4ed3\u5e93\u548c\u8fdc\u7a0b\u4ed3\u5e93\u51b2\u7a81,\u6bd4\u5982\uff1a</p> <ul> <li>\u4f7f\u7528git stash\u547d\u4ee4\u5c06\u4f60\u7684\u672c\u5730\u4fee\u6539\u6682\u65f6\u4fdd\u5b58\u8d77\u6765,\u7136\u540e\u4f7f\u7528git pull\u547d\u4ee4\u5c06\u8fdc\u7a0b\u4ee3\u7801\u62c9\u53d6\u5230\u4f60\u7684\u672c\u5730\u4ed3\u5e93,\u7136\u540e\u4f7f\u7528git stash pop\u547d\u4ee4\u5c06\u4f60\u7684\u672c\u5730\u4fee\u6539\u5408\u5e76\u5230\u66f4\u65b0\u540e\u7684\u4ee3\u7801\u4e2d\u53bb,\u89e3\u51b3\u51b2\u7a81\u540e\u518d\u63d0\u4ea4\u4f60\u7684\u4ee3\u7801.</li> <li>\u4f7f\u7528git reset --hard\u547d\u4ee4\u5c06\u4f60\u7684\u672c\u5730\u4ee3\u7801\u91cd\u7f6e\u5230\u4e0a\u4e00\u6b21\u63d0\u4ea4\u7684\u72b6\u6001,\u7136\u540e\u4f7f\u7528git pull\u547d\u4ee4\u5c06\u8fdc\u7a0b\u4ee3\u7801\u62c9\u53d6\u5230\u4f60\u7684\u672c\u5730\u4ed3\u5e93,\u7136\u540e\u7528\u4f60\u5907\u4efd\u8fc7\u7684\u672c\u5730\u4fee\u6539\u8986\u76d6\u4f60\u7684\u672c\u5730\u6587\u4ef6,\u89e3\u51b3\u51b2\u7a81\u540e\u518d\u63d0\u4ea4\u4f60\u7684\u4ee3\u7801.</li> <li>\u4f7f\u7528git mergetool\u547d\u4ee4\u542f\u52a8\u4e00\u4e2a\u5408\u5e76\u5de5\u5177,\u6bd4\u5982vim\u6216Kaleidoscope,\u8ba9\u4f60\u5728\u7f16\u8f91\u5668\u4e2d\u9009\u62e9\u8981\u4fdd\u7559\u7684\u4fee\u6539.</li> </ul> <p>\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u559c\u597d\u548c\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u672c\u5730git\u4ed3\u5e93\u548c\u8fdc\u7a0b\u4ed3\u5e93\u51b2\u7a81.</p>"},{"location":"tool/git/#understanding-git-pull-conflictsgit-pull","title":"Understanding Git Pull Conflicts(\u7406\u89e3Git Pull\u51b2\u7a81)","text":"<p><code>Pull</code>(\u62c9\u53d6\u547d\u4ee4) merges changes frome a <code>remote</code> repository into a <code>local</code> repository.When there are conflicting changes in the same file,a git pull conflict occurs.<code>Git diff</code> command can be used to find conflicts between two branches </p> <p>Git pull\u547d\u4ee4\u5c06\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u7684\u66f4\u6539\u5408\u5e76\u5230\u672c\u5730\u4ed3\u5e93\u4e2d.\u5f53\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d\u6709\u51b2\u7a81\u7684\u66f4\u6539\u65f6,\u4f1a\u53d1\u751fgit pull\u51b2\u7a81. Git diff\u547d\u4ee4\u53ef\u4ee5\u7528\u6765\u67e5\u627e\u4e24\u4e2a\u5206\u652f\u4e4b\u95f4\u7684\u51b2\u7a81.</p> <p>It is important to keep pull requests up-to-date to avoid conflicts. Formatting rules should be established and followed to avoid conflicts.</p> <p>\u4fdd\u6301pull request\u662f\u6700\u65b0\u7684\u4ee5\u907f\u514d\u51b2\u7a81\u662f\u5f88\u91cd\u8981\u7684.\u5e94\u5efa\u7acb\u5e76\u9075\u5faa\u683c\u5f0f\u89c4\u5219\u4ee5\u907f\u514d\u51b2\u7a81.</p> <p>GitLens\u662f\u4e00\u4e2a\u80fd\u591f\u589e\u5f3aVS Code\u4e2dGit\u529f\u80fd\u7684\u63d2\u4ef6,\u5b83\u80fd\u591f\u89e3\u9501\u6bcf\u4e2a\u4ed3\u5e93\u4e2d\u9690\u85cf\u7684\u77e5\u8bc6.\u5b83\u5e2e\u52a9\u4f60\u901a\u8fc7Git blame\u6ce8\u91ca\u548cCodeLens\u5feb\u901f\u5730\u67e5\u770b\u4ee3\u7801\u7684\u4f5c\u8005\u4fe1\u606f,\u65e0\u7f1d\u5730\u5bfc\u822a\u548c\u6d4f\u89c8Git\u4ed3\u5e93,\u901a\u8fc7\u4e30\u5bcc\u7684\u53ef\u89c6\u5316\u548c\u5f3a\u5927\u7684\u6bd4\u8f83\u547d\u4ee4\u83b7\u5f97\u6709\u4ef7\u503c\u7684\u6d1e\u5bdf,\u4ee5\u53ca\u66f4\u591a\u5176\u4ed6\u529f\u80fd.</p>"},{"location":"tool/git/#clashdashboard","title":"\u4e3a\u4ec0\u4e48\u6211\u7684clash\u6ca1\u6709dashboard","text":"<p>\u56e0\u4e3a\u6ca1\u6709\u6240\u4ee5\u6ca1\u6709,\u6211\u627e\u5230\u7684 clash for linux \u7684\u7248\u672c\u662f\u4e0d\u5e26\u63a7\u5236\u754c\u9762\u7684,\u9700\u8981\u8bbf\u95ee \u8fd9\u4e2a web \u63a7\u5236\u53f0 \u624d\u80fd\u8fdb\u884c\u63a7\u5236.\u540e\u6765\u4e3a\u4e86\u65b9\u4fbf\u8bbf\u95ee,\u6211\u5c31\u628a\u4ed6\u7684\u5305\u90fd\u7ed9\u6293\u4e86\u4e0b\u6765,\u653e\u5728\u4e86\u672c\u5730\u7684 nginx \u4e0a.\u5f97\u6709\u4e2aclash-ui(\u4f46\u662f\u539f\u9879\u76ee\u5df2\u7ecf\u88ab\u5220\u6389sad)</p> <p>https://clash.razord.top/#/proxies</p> <p>https://www.joeyne.cool/http/proxy/ubuntu-\u5b89\u88c5clash\u5e76\u914d\u7f6e\u5f00\u673a\u542f\u52a8/#clash-for-linux <pre><code># \u8fdb\u5165\u4e0b\u8f7d\u76ee\u5f55\uff08\u9ed8\u8ba4\u60c5\u51b5\u662f\u4e0b\u8f7d\u5230 ~/Downloads \u76ee\u5f55,\u5982\u679c\u4e0d\u662f\u8bf7\u8fdb\u5165\u5230\u5bf9\u5e94\u7684\u4e0b\u8f7d\u76ee\u5f55\uff09\ncd ~/Downloads\n# \u89e3\u538b\ngunzip clash-linux-amd64-v3-v1.15.1.gz\n# \u91cd\u547d\u540d\nmv clash-linux-amd64-v3-v1.15.1 clash\n# \u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650(\u89e3\u538b\u540e\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6,\u5982\u679c\u6ca1\u6709\u6267\u884c\u6743\u9650,\u9700\u8981\u624b\u52a8\u6dfb\u52a0\uff09\nchmod +x clash\n# \u590d\u5236clash \u5230/usr/bin/\u6587\u4ef6\u5939(\u8fd9\u6837\u5728\u7ec8\u7aef\u4efb\u4f55\u4f4d\u7f6e\u6267\u884c clash \u5373\u53ef\u542f\u52a8)\nsudo mv clash /usr/bin/\n</code></pre></p> <pre><code>[Unit]\nDescription=clash\n\n[Service]\nType=simple\nExecStart=/usr/bin/clash -f /home/along/desk/clash/config.yaml\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>"},{"location":"tool/git/#gitgithub","title":"\u5173\u4e8egit\u548cgithub","text":"<p>ssh\u7684\u5bc6\u94a5\u53ea\u80fd\u6765\u9a8c\u8bc1ssh\u534f\u8bae\u76f8\u5173\u7684,\u4f60\u5982\u679c\u4f7f\u7528\u7684\u662fhttps\u7684\u5c31\u4e0d\u80fd\u9a8c\u8bc1.\u6240\u4ee5\u6dfb\u52a0remote\u7684\u65f6\u5019\u8981\u6ce8\u610f,\u5982\u679c\u662fssh\u7684\u8bdd,\u5c31\u8981\u7528ssh\u7684\u5730\u5740,\u5982\u679c\u662fhttps\u7684\u8bdd,\u5c31\u8981\u7528https\u7684\u5730\u5740.</p>"},{"location":"tool/git/#git-remote","title":"\u66f4\u6539\u6216\u8005\u6dfb\u52a0git remote\u4ed3\u5e93\u7684\u5730\u5740","text":"<pre><code>git remote set-url origin yours_github_repository_url\ngit remote add origin yours_github_repository_url\n# \u6b64\u5904origin\u53ef\u4ee5\u81ea\u884c\u4fee\u6539\n</code></pre>"},{"location":"tool/git/#_2","title":"\u5f3a\u5236\u63a8\u9001","text":"<p>\u5982\u679c\u4f60\u4e0d\u5728\u4e4e<code>main</code>\u5206\u652f\u7684\u5185\u5bb9,\u5e76\u4e14\u4f60\u60f3\u8981\u5c06<code>pa1</code>\u5206\u652f\u7684\u5185\u5bb9\u5f3a\u5236\u63a8\u9001\u5230<code>main</code>\u5206\u652f,\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code># \u5207\u6362\u5230pa1\u5206\u652f\ngit checkout pa1\n\n# \u5f3a\u5236\u63a8\u9001\u5230\u8fdc\u7aef\u7684main\u5206\u652f\ngit push origin +pa1:main\n# origin\u662f\u8fdc\u7aef\u4ed3\u5e93\u7684\u540d\u79f0,+pa1:main\u8868\u793a\u5c06\u672c\u5730\u7684pa1\u5206\u652f\u5f3a\u5236\u63a8\u9001\u5230\u8fdc\u7aef\u7684main\u5206\u652f\n</code></pre> <p>\u8fd9\u91cc\u7684<code>+</code>\u7b26\u53f7\u8868\u793a\u5f3a\u5236\u63a8\u9001.\u8fd9\u5c06\u4f1a\u8986\u76d6\u8fdc\u7aef\u7684<code>main</code>\u5206\u652f,\u4f7f\u5176\u4e0e\u4f60\u672c\u5730\u7684<code>pa1</code>\u5206\u652f\u5b8c\u5168\u76f8\u540c.</p> <p>\u8bf7\u6ce8\u610f,\u5f3a\u5236\u63a8\u9001\u662f\u4e00\u79cd\u7834\u574f\u6027\u64cd\u4f5c,\u5b83\u4f1a\u6c38\u4e45\u5730\u8986\u76d6\u8fdc\u7aef\u7684<code>main</code>\u5206\u652f.\u5728\u4f60\u6267\u884c\u8fd9\u4e2a\u64cd\u4f5c\u4e4b\u524d,\u4f60\u5e94\u8be5\u786e\u4fdd\u4f60\u4e0d\u9700\u8981<code>main</code>\u5206\u652f\u4e0a\u7684\u4efb\u4f55\u66f4\u6539,\u6216\u8005\u4f60\u5df2\u7ecf\u5907\u4efd\u4e86\u8fd9\u4e9b\u66f4</p>"},{"location":"tool/git/#github-cli","title":"\u5173\u4e8eGithub Cli\u7684\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c","text":"<p>\u4ecb\u7ecdGit Personal Access Token</p> <p>\u5b58\u50a8\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\u7684\u9009\u9879 \u4ee5\u4e0b\u662f\u51e0\u79cd\u5e38\u89c1\u7684\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\u5b58\u50a8\u9009\u9879\uff1a</p> <ol> <li>\u5b58\u50a8\u5728\u73af\u5883\u53d8\u91cf\u4e2d \u5c06\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\u5b58\u50a8\u5728\u73af\u5883\u53d8\u91cf\u4e2d\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u505a\u6cd5.\u901a\u8fc7\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf,\u53ef\u4ee5\u8f7b\u677e\u5730\u5728\u547d\u4ee4\u884c\u4e2d\u8bbf\u95ee\u4ee4\u724c,\u800c\u4e0d\u9700\u8981\u5728\u6bcf\u6b21\u4f7f\u7528Git\u547d\u4ee4\u65f6\u90fd\u624b\u52a8\u8f93\u5165.\u4f8b\u5982,\u5728Linux\u548cMac\u4e0a,\u53ef\u4ee5\u5c06\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\u6dfb\u52a0\u5230<sub>/.bashrc\u6216</sub>/.bash_profile\u6587\u4ef6\u4e2d\uff1a</li> </ol> <pre><code>export GIT_TOKEN=your_token_here\n</code></pre> <p>\u7136\u540e,\u901a\u8fc7\u8bbf\u95ee$GIT_TOKEN\u6765\u4f7f\u7528\u4ee4\u724c,\u8fd9\u6837\u53ef\u4ee5\u5f88\u597d\u7684\u89e3\u51b3\u6211\u7684\u4e00\u4e2a\u75db\u70b9,\u5c31\u662f\u6211\u4f1a\u5728\u4e00\u4e2a\u5e73\u53f0\u6709\u4e0d\u540c\u8d26\u6237\u7684\u4ed3\u5e93,\u8fd9\u6837\u4e00\u4e2assh key\u4f1a\u5728\u5176\u4ed6\u8d26\u6237\u7528\u4e86,\u8fd9\u6837\u6211\u7684\u4e00\u4e9bgithub\u4ed3\u5e93\u7684push\u5c31\u4f1a\u6210\u95ee\u9898,\u5982\u679c\u6709\u4e86\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u5b58\u50a8\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\u7684\u529f\u80fd\u4e4b\u540e,\u6211\u53ea\u9700\u8981\u5bf9\u5e94\u4e0d\u540c\u7684\u8d26\u6237\u8bbe\u7f6e\u4e0d\u540c\u7684\u73af\u5883\u53d8\u91cf\u5c31\u53ef\u4ee5\u4e86,\u4f8b\u5982<code>along_git_token</code>,<code>cyberalong_token</code>.</p> <ol> <li>\u5b58\u50a8\u5728Git\u914d\u7f6e\u6587\u4ef6\u4e2d Git\u914d\u7f6e\u6587\u4ef6\uff08~/.gitconfig\uff09\u662f\u5b58\u50a8Git\u914d\u7f6e\u4fe1\u606f\u7684\u6587\u4ef6.\u53ef\u4ee5\u5728\u5176\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u914d\u7f6e\u9879\u6765\u5b58\u50a8\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c.\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</li> </ol> <p><pre><code>[github]\n    token = your_token_here\n</code></pre> \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b,\u53ef\u4ee5\u4f7f\u7528git config\u547d\u4ee4\u8bbf\u95ee\u4ee4\u724c\uff1a</p> <p><pre><code>$ git config --global github.token your_token_here\n</code></pre> 3. \u5b58\u50a8\u5728\u5bc6\u94a5\u7ba1\u7406\u5668\u4e2d \u5982\u679c\u4f7f\u7528\u7684\u662f\u5bc6\u7801\u7ba1\u7406\u5de5\u5177,\u4f8b\u5982Keychain\uff08Mac OS\uff09\u6216Credential Manager\uff08Windows\uff09,\u53ef\u4ee5\u5c06\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\u5b58\u50a8\u5728\u8fd9\u4e9b\u5de5\u5177\u4e2d.\u8fd9\u6837,\u4ee4\u724c\u5c06\u88ab\u5b89\u5168\u5730\u5b58\u50a8,\u4e0d\u6613\u6cc4\u9732,\u5728\u9700\u8981\u65f6\u53ef\u4ee5\u81ea\u52a8\u63d0\u53d6.</p>"},{"location":"tool/git/#ubuntu2004vscode","title":"\u5982\u4f55\u5728ubuntu20.04\u4e2d\u66f4\u65b0vscode","text":"<p>\u5982\u4f55\u5728ubuntu20.04\u4e2d\u66f4\u65b0vscode</p>"},{"location":"tool/git/#vscode","title":"\u5982\u4f55\u67e5\u770bvscode\u7684\u5b89\u88c5\u65b9\u5f0f","text":"<p>\u8981\u67e5\u770b\u5728 Ubuntu \u4e2d\u5b89\u88c5\u7684 Visual Studio Code (VSCode) \u7684\u65b9\u5f0f,\u60a8\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u68c0\u67e5\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\uff1a \u5982\u679c\u60a8\u662f\u901a\u8fc7\u5305\u7ba1\u7406\u5668\uff08\u5982apt\uff09\u5b89\u88c5\u7684VSCode,\u5219\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\uff1a</p> <pre><code>apt-get list --installed | grep code//warning\u8b66\u544a\u4e86\u4e0d\u7a33\u5b9a\n\ndpkg --list | grep code\n</code></pre> <p>\u5982\u679c\u8f93\u51fa\u4e2d\u663e\u793a\u6709\u5173<code>code</code>\u7684\u6761\u76ee,\u5219\u8bf4\u660e\u60a8\u662f\u901a\u8fc7\u5305\u7ba1\u7406\u5668\u5b89\u88c5\u7684VSCode.</p> </li> <li> <p>\u68c0\u67e5Snap\u5305\uff1a \u5982\u679c\u60a8\u662f\u901a\u8fc7Snap\u5305\u7ba1\u7406\u5668\u5b89\u88c5\u7684VSCode,\u5219\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>snap list | grep code\n</code></pre> <p>\u5982\u679c\u8f93\u51fa\u4e2d\u663e\u793a\u4e86\u4e0eVSCode\u76f8\u5173\u7684\u6761\u76ee,\u5219\u8bf4\u660e\u60a8\u662f\u901a\u8fc7Snap\u5305\u5b89\u88c5\u7684.</p> </li> <li> <p>\u68c0\u67e5\u5b89\u88c5\u76ee\u5f55\uff1a \u5982\u679c\u60a8\u624b\u52a8\u5b89\u88c5\u4e86VSCode,\u60a8\u53ef\u4ee5\u67e5\u770b\u5176\u5b89\u88c5\u76ee\u5f55,\u901a\u5e38\u60c5\u51b5\u4e0b,\u5b83\u4f1a\u5b89\u88c5\u5728 <code>/usr/share/code</code> \u6216\u8005 <code>~/.vscode</code> \u76ee\u5f55\u4e0b.\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u67e5\u627e\uff1a</p> <pre><code>which code\n</code></pre> <p>\u8fd9\u4f1a\u663e\u793aVSCode\u7684\u53ef\u6267\u884c\u6587\u4ef6\u7684\u4f4d\u7f6e.</p> </li> </ol> <p>\u901a\u8fc7\u8fd9\u4e9b\u6b65\u9aa4,\u60a8\u53ef\u4ee5\u786e\u5b9a\u60a8\u7684\u7cfb\u7edf\u4e2dVSCode\u7684\u5b89\u88c5\u65b9\u5f0f.</p>"},{"location":"tool/rust/","title":"rust","text":"<p>\u5728rust\u4e2d,\u53d8\u91cf\u9ed8\u8ba4\u662fimmutable\u4e0d\u53ef\u6539\u53d8\u7684,\u5f53\u53d8\u91cf\u4e0d\u53ef\u53d8\u65f6,\u4e00\u65e6\u503c\u88ab\u7ed1\u5b9a\u5230\u4e00\u4e2a\u540d\u79f0\u4e0a,\u8fd9\u4e2a\u503c\u5c31\u4e0d\u80fd\u88ab\u6539\u53d8,\u8fd9\u6837\u7684\u8bbe\u8ba1\u6709\u52a9\u4e8e\u9632\u6b62\u610f\u5916\u7684\u6570\u636e\u4fee\u6539\u548c\u5e76\u53d1\u95ee\u9898.\u82e5\u8981\u4f7f\u53d8\u91cf\u53ef\u53d8,\u9700\u8981\u5728\u58f0\u660e\u65f6\u4f7f\u7528mut\u5173\u952e\u5b57.</p> <pre><code>let x =5;\nlet mut x =5;\n</code></pre> <p>rust\u4e2d\u5e38\u91cf\u603b\u662f\u4e0d\u53ef\u53d8\u5316,\u4f7f\u7528const\u5173\u952e\u5b57,\u4e14\u53ea\u80fd\u88ab\u58f0\u660e\u4e3a\u5e38\u91cf\u8868\u8fbe\u5f0f(\u5fc5\u987b\u662f\u5728\u7f16\u8bd1\u671f\u786e\u5b9a\u7684\u503c)</p>"},{"location":"tool/rust/#_1","title":"\u590d\u5408\u7c7b\u578b","text":"<ul> <li>array: [1,2,3]</li> <li>tuple: (1,true)</li> </ul>"},{"location":"tool/rust/#tuple","title":"tuple\u5143\u7ec4","text":"<p>\u5143\u7ec4\u662f\u4e00\u4e2a\u5c06\u591a\u4e2a\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u7ec4\u5408\u8fdb\u4e00\u4e2a\u590d\u5408\u7c7b\u578b\u7684\u4e3b\u8981\u65b9\u5f0f.\u5143\u7ec4\u957f\u5ea6\u56fa\u5b9a:\u4e00\u65e6\u58f0\u660e,\u5176\u957f\u5ea6\u4e0d\u4f1a\u589e\u957f\u6216\u7f29\u5c0f</p> <pre><code>fn main{\n  let tup:(i32,f64,u8)=(500,12,12)\n}\n</code></pre>"},{"location":"tool/rust/#_2","title":"\u8868\u8fbe\u5f0f\u548c\u8bed\u53e5","text":"<p>\u8868\u8fbe\u5f0f\u4f1a\u4ea7\u751f\u503c,\u8bed\u53e5\u4e0d\u4ea7\u751f\u503c.</p> <p>\u8868\u8fbe\u5f0f\u7684\u672b\u5c3e\u90fd\u6ca1\u6709\u5206\u53f7,\u8bed\u53e5\u7684\u672b\u5c3e\u6709\u5206\u53f7.</p>"},{"location":"tool/rust/#_3","title":"\u6240\u6709\u6743","text":"<p>\u6240\u6709\u6743\uff08\u7cfb\u7edf\uff09\u662f Rust \u6700\u4e3a\u4e0e\u4f17\u4e0d\u540c\u7684\u7279\u6027\uff0c\u5b83\u8ba9 Rust \u65e0\u9700\u5783\u573e\u56de\u6536\u5668\uff08garbage collector\uff09\u5373\u53ef\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\u3002\u56e0\u6b64\uff0c\u7406\u89e3 Rust \u4e2d\u6240\u6709\u6743\u7684\u8fd0\u4f5c\u65b9\u5f0f\u975e\u5e38\u91cd\u8981\u3002\u5728\u672c\u7ae0\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u6240\u6709\u6743\u4ee5\u53ca\u76f8\u5173\u529f\u80fd\uff1a\u501f\u7528\u3001slice \u4ee5\u53ca Rust \u5982\u4f55\u5728\u5185\u5b58\u4e2d\u5b58\u653e\u6570\u636e\u3002</p> <p>Rust \u7684\u6838\u5fc3\u529f\u80fd\uff08\u4e4b\u4e00\uff09\u662f \u6240\u6709\u6743\uff08ownership\uff09\u3002\u867d\u7136\u8be5\u529f\u80fd\u5f88\u5bb9\u6613\u89e3\u91ca\uff0c\u4f46\u5b83\u5bf9\u8bed\u8a00\u7684\u5176\u4ed6\u90e8\u5206\u6709\u7740\u6df1\u523b\u7684\u5f71\u54cd\u3002</p> <p>\u6240\u6709\u8fd0\u884c\u7684\u7a0b\u5e8f\u90fd\u5fc5\u987b\u7ba1\u7406\u5176\u4f7f\u7528\u8ba1\u7b97\u673a\u5185\u5b58\u7684\u65b9\u5f0f\u3002\u4e00\u4e9b\u8bed\u8a00\u4e2d\u5177\u6709\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u4e0d\u65ad\u5730\u5bfb\u627e\u4e0d\u518d\u4f7f\u7528\u7684\u5185\u5b58\uff1b\u5728\u53e6\u4e00\u4e9b\u8bed\u8a00\u4e2d\uff0c\u5f00\u53d1\u8005\u5fc5\u987b\u4eb2\u81ea\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\u3002Rust \u5219\u9009\u62e9\u4e86\u7b2c\u4e09\u79cd\u65b9\u5f0f\uff1a\u901a\u8fc7\u6240\u6709\u6743\u7cfb\u7edf\u7ba1\u7406\u5185\u5b58\uff0c\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u65f6\u4f1a\u6839\u636e\u4e00\u7cfb\u5217\u7684\u89c4\u5219\u8fdb\u884c\u68c0\u67e5\u3002\u5728\u8fd0\u884c\u65f6\uff0c\u6240\u6709\u6743\u7cfb\u7edf\u7684\u4efb\u4f55\u529f\u80fd\u90fd\u4e0d\u4f1a\u51cf\u6162\u7a0b\u5e8f\u3002</p> <p>\u56e0\u4e3a\u6240\u6709\u6743\u5bf9\u5f88\u591a\u5f00\u53d1\u8005\u6765\u8bf4\u90fd\u662f\u4e00\u4e2a\u65b0\u6982\u5ff5\uff0c\u9700\u8981\u4e00\u4e9b\u65f6\u95f4\u6765\u9002\u5e94\u3002\u597d\u6d88\u606f\u662f\u968f\u7740\u4f60\u5bf9 Rust \u548c\u6240\u6709\u6743\u7cfb\u7edf\u7684\u89c4\u5219\u8d8a\u6765\u8d8a\u6709\u7ecf\u9a8c\uff0c\u4f60\u5c31\u8d8a\u80fd\u81ea\u7136\u5730\u7f16\u5199\u51fa\u5b89\u5168\u548c\u9ad8\u6548\u7684\u4ee3\u7801\u3002\u6301\u4e4b\u4ee5\u6052\uff01</p> <p>\u5f53\u4f60\u7406\u89e3\u4e86\u6240\u6709\u6743\uff0c\u4f60\u5c06\u6709\u4e00\u4e2a\u575a\u5b9e\u7684\u57fa\u7840\u6765\u7406\u89e3\u90a3\u4e9b\u4f7f Rust \u72ec\u7279\u7684\u529f\u80fd\u3002\u5728\u672c\u7ae0\u4e2d\uff0c\u4f60\u5c06\u901a\u8fc7\u5b8c\u6210\u4e00\u4e9b\u793a\u4f8b\u6765\u5b66\u4e60\u6240\u6709\u6743\uff0c\u8fd9\u4e9b\u793a\u4f8b\u57fa\u4e8e\u4e00\u4e2a\u5e38\u7528\u7684\u6570\u636e\u7ed3\u6784\uff1a\u5b57\u7b26\u4e32\u3002</p> <p>(rust\u5c3d\u91cf\u5c06\u5b89\u5168\u95ee\u9898\u89e3\u51b3\u5728\u7f16\u8bd1\u671f,\u5e76\u4e14\u7f16\u8bd1\u5668\u5bf9\u4e8e\u7528\u6237\u975e\u5e38\u53cb\u597d)</p> <p>string \u7c7b\u578b\u4e3a\u4e86\u652f\u6301\u53ef\u53d8\u53ef\u589e\u957f\u7684\u6587\u672c\u7247\u6bb5,\u9700\u8981\u5728\u5806\u4e0a\u5206\u914d\u4e00\u5757\u5728\u7f16\u8bd1\u65f6\u672a\u77e5\u5927\u5c0f\u7684\u5185\u5b58</p> <ul> <li>\u5fc5\u987b\u518d\u8fd0\u884c\u65f6\u5411\u5185\u5b58\u5206\u914d\u5668\u8bf7\u6c42\u5185\u5b58</li> <li>\u9700\u8981\u4e00\u4e2a\u5f53\u6211\u4eec\u5904\u7406\u5b8cstring\u65f6\u5c06\u5185\u5b58\u8fd4\u56de\u7ed9\u5206\u914d\u5668\u7684\u65b9\u6cd5</li> </ul> <p>\u7136\u800c\uff0c\u7b2c\u4e8c\u90e8\u5206\u5b9e\u73b0\u8d77\u6765\u5c31\u5404\u6709\u533a\u522b\u4e86\u3002\u5728\u6709 \u5783\u573e\u56de\u6536\uff08garbage collector\uff0cGC\uff09\u7684\u8bed\u8a00\u4e2d\uff0c GC \u8bb0\u5f55\u5e76\u6e05\u9664\u4e0d\u518d\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u800c\u6211\u4eec\u5e76\u4e0d\u9700\u8981\u5173\u5fc3\u5b83\u3002\u6ca1\u6709 GC \u7684\u8bdd\uff0c\u8bc6\u522b\u51fa\u4e0d\u518d\u4f7f\u7528\u7684\u5185\u5b58\u5e76\u8c03\u7528\u4ee3\u7801\u663e\u5f0f\u91ca\u653e\u5c31\u662f\u6211\u4eec\u7684\u8d23\u4efb\u4e86\uff0c\u8ddf\u8bf7\u6c42\u5185\u5b58\u7684\u65f6\u5019\u4e00\u6837\u3002\u4ece\u5386\u53f2\u7684\u89d2\u5ea6\u4e0a\u8bf4\u6b63\u786e\u5904\u7406\u5185\u5b58\u56de\u6536\u66fe\u7ecf\u662f\u4e00\u4e2a\u56f0\u96be\u7684\u7f16\u7a0b\u95ee\u9898\u3002\u5982\u679c\u5fd8\u8bb0\u56de\u6536\u4e86\u4f1a\u6d6a\u8d39\u5185\u5b58\u3002\u5982\u679c\u8fc7\u65e9\u56de\u6536\u4e86\uff0c\u5c06\u4f1a\u51fa\u73b0\u65e0\u6548\u53d8\u91cf\u3002\u5982\u679c\u91cd\u590d\u56de\u6536\uff0c\u8fd9\u4e5f\u662f\u4e2a bug\u3002\u6211\u4eec\u9700\u8981\u7cbe\u786e\u5730\u4e3a\u4e00\u4e2a allocate \u914d\u5bf9\u4e00\u4e2a free\u3002</p> <p>Rust \u91c7\u53d6\u4e86\u4e00\u4e2a\u4e0d\u540c\u7684\u7b56\u7565\uff1a\u5185\u5b58\u5728\u62e5\u6709\u5b83\u7684\u53d8\u91cf\u79bb\u5f00\u4f5c\u7528\u57df\u540e\u5c31\u88ab\u81ea\u52a8\u91ca\u653e\u3002\u4e0b\u9762\u662f\u793a\u4f8b 4-1 \u4e2d\u4f5c\u7528\u57df\u4f8b\u5b50\u7684\u4e00\u4e2a\u4f7f\u7528 String \u800c\u4e0d\u662f\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u7684\u7248\u672c\uff1a</p> <p><pre><code>fn main() {\n    {\n        let s = String::from(\"hello\"); // \u4ece\u6b64\u5904\u8d77\uff0cs \u5f00\u59cb\u6709\u6548\n\n        // \u4f7f\u7528 s\n    }                                  // \u6b64\u4f5c\u7528\u57df\u5df2\u7ed3\u675f\uff0c\n                                       // s \u4e0d\u518d\u6709\u6548\n}\n</code></pre> \u5f53\u53d8\u91cf\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\uff0cRust \u4e3a\u6211\u4eec\u8c03\u7528\u4e00\u4e2a\u7279\u6b8a\u7684\u51fd\u6570\u3002\u8fd9\u4e2a\u51fd\u6570\u53eb\u505a <code>drop</code>\uff0c\u5b83\u7684\u529f\u80fd\u662f\u91ca\u653e\u6211\u4eec\u7684\u5185\u5b58\u3002Rust \u5728\u7ed3\u5c3e\u7684 <code>}</code> \u5904\u8c03\u7528 <code>drop</code>\u3002\u8fd9\u91cc\uff0cRust \u5728 <code>}</code> \u5904\u8c03\u7528 <code>drop</code>\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u8fd9\u4e2a\u4f5c\u7528\u57df\u4e2d\u4e0d\u518d\u9700\u8981\u8fd9\u4e2a\u53d8\u91cf\u7684\u65f6\u5019\u91ca\u653e\u8fd9\u4e2a\u5185\u5b58\u3002</p> <p>\u53ef\u53d8\u5f15\u7528\u548c\u4e0d\u53ef\u53d8\u5f15\u7528\u7684\u533a\u522b\u5728\u4e8e\u662f\u5426\u53ef\u4ee5\u4fee\u6539\u5f15\u7528\u7684\u503c</p>"},{"location":"tool/rust/#string-slice","title":"String slice","text":"<p>\u5b57\u7b26\u4e32 slice \u662f String \u4e2d\u4e00\u90e8\u5206\u503c\u7684\u5f15\u7528\u3002String slice \u7684\u7c7b\u578b\u58f0\u660e\u5199\u4f5c <code>&amp;str</code>\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u5b57\u7b26\u4e32 slice \u662f\u4e00\u4e2a\u6307\u5411\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u4f4d\u7f6e\u7684\u6307\u9488\uff0c\u4ee5\u53ca slice \u7684\u957f\u5ea6\u3002\u8fd9\u4e5f\u5c31\u662f\u4e3a\u4ec0\u4e48\u5b57\u7b26\u4e32 slice \u662f\u4e00\u4e2a\u5f15\u7528\uff1a\u5b83\u6ca1\u6709\u6240\u6709\u6743\u3002 slice\u4f9d\u7136\u662f\u5de6\u95ed\u53f3\u5f00,\u7b26\u5408\u81ea\u7136\u7684\u4e60\u60ef(\u597d\u7b97\u957f\u5ea6,\u53e6\u5916\u4e5f\u7b26\u5408\u903b\u8f91,\u4e0d\u4f1a\u51fa\u73b0\u5b9a\u4e49\u4e0d\u80fd\u8986\u76d6\u7684\u60c5\u5f62)</p>"},{"location":"tool/rust/#rust-null","title":"rust \u6ca1\u6709NUll","text":"<p>\u5728\u5f88\u591a\u8bed\u8a00\u4e2d\uff0cnull \u662f\u4e00\u4e2a\u503c\uff0c\u4ee3\u8868\u6ca1\u6709\u503c\u3002\u5728 Rust \u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 Option \u6765\u8868\u8fbe\u4e00\u4e2a\u503c\u53ef\u80fd\u4e3a\u7a7a\u7684\u60c5\u51b5\u3002Option \u662f\u4e00\u4e2a\u679a\u4e3e\u3002Option \u6709\u4e24\u4e2a\u53d8\u91cf\uff1aSome(T) \u548c None\u3002Some(T) \u4fdd\u5b58\u4e00\u4e2a T \u7c7b\u578b\u7684\u503c\uff0c\u800c None \u4ee3\u8868\u6ca1\u6709\u503c\u3002 <pre><code>enum Option&lt;T&gt;{\n    Some(T),\n    None,\n}\n</code></pre> \u8fd9\u4e2a\u679a\u4e3e\u548c\u6cdb\u578b\u7ed3\u5408\u7684\u65b9\u5f0f\u662f Rust \u7684\u4e00\u4e2a\u5f3a\u5927\u529f\u80fd\u3002Option \u4f7f\u5f97 Rust \u4e0d\u9700\u8981 null \u68c0\u67e5\u3002Option \u6709\u4e00\u4e2a expect \u65b9\u6cd5\uff0c\u5982\u679c Option \u662f None\uff0cexpect \u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u5e76\u663e\u793a expect \u4e2d\u7684\u4fe1\u606f\u3002\u8fd9\u4e2a\u65b9\u6cd5\u5728\u8c03\u8bd5\u65f6\u975e\u5e38\u6709\u7528\uff0c\u4f46\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u53ef\u80fd\u4f1a\u9009\u62e9\u5176\u4ed6\u5904\u7406 None \u7684\u65b9\u6cd5\u3002 <p>Option \u679a\u4e3e\u548c\u5176\u76f8\u5bf9\u4e8e\u7a7a\u503c\u7684\u4f18\u52bf \u8fd9\u4e00\u90e8\u5206\u4f1a\u5206\u6790\u4e00\u4e2a Option \u7684\u6848\u4f8b\uff0cOption \u662f\u6807\u51c6\u5e93\u5b9a\u4e49\u7684\u53e6\u4e00\u4e2a\u679a\u4e3e\u3002Option \u7c7b\u578b\u5e94\u7528\u5e7f\u6cdb\u56e0\u4e3a\u5b83\u7f16\u7801\u4e86\u4e00\u4e2a\u975e\u5e38\u666e\u904d\u7684\u573a\u666f\uff0c\u5373\u4e00\u4e2a\u503c\u8981\u4e48\u6709\u503c\u8981\u4e48\u6ca1\u503c\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u8bf7\u6c42\u4e00\u4e2a\u975e\u7a7a\u5217\u8868\u7684\u7b2c\u4e00\u9879\uff0c\u4f1a\u5f97\u5230\u4e00\u4e2a\u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e00\u4e2a\u7a7a\u7684\u5217\u8868\uff0c\u5c31\u4ec0\u4e48\u4e5f\u4e0d\u4f1a\u5f97\u5230\u3002\u4ece\u7c7b\u578b\u7cfb\u7edf\u7684\u89d2\u5ea6\u6765\u8868\u8fbe\u8fd9\u4e2a\u6982\u5ff5\u5c31\u610f\u5473\u7740\u7f16\u8bd1\u5668\u9700\u8981\u68c0\u67e5\u662f\u5426\u5904\u7406\u4e86\u6240\u6709\u5e94\u8be5\u5904\u7406\u7684\u60c5\u51b5\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u907f\u514d\u5728\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4e2d\u975e\u5e38\u5e38\u89c1\u7684 bug\u3002</p> <p>\u7f16\u7a0b\u8bed\u8a00\u7684\u8bbe\u8ba1\u7ecf\u5e38\u8981\u8003\u8651\u5305\u542b\u54ea\u4e9b\u529f\u80fd\uff0c\u4f46\u8003\u8651\u6392\u9664\u54ea\u4e9b\u529f\u80fd\u4e5f\u5f88\u91cd\u8981\u3002Rust \u5e76\u6ca1\u6709\u5f88\u591a\u5176\u4ed6\u8bed\u8a00\u4e2d\u6709\u7684\u7a7a\u503c\u529f\u80fd\u3002\u7a7a\u503c\uff08Null \uff09\u662f\u4e00\u4e2a\u503c\uff0c\u5b83\u4ee3\u8868\u6ca1\u6709\u503c\u3002\u5728\u6709\u7a7a\u503c\u7684\u8bed\u8a00\u4e2d\uff0c\u53d8\u91cf\u603b\u662f\u8fd9\u4e24\u79cd\u72b6\u6001\u4e4b\u4e00\uff1a\u7a7a\u503c\u548c\u975e\u7a7a\u503c\u3002</p> <p>Tony Hoare\uff0cnull \u7684\u53d1\u660e\u8005\uff0c\u5728\u4ed6 2009 \u5e74\u7684\u6f14\u8bb2 \u201cNull References: The Billion Dollar Mistake\u201d \u4e2d\u66fe\u7ecf\u8bf4\u5230\uff1a</p> <p>I call it my billion-dollar mistake. At that time, I was designing the first comprehensive type system for references in an object-oriented language. My goal was to ensure that all use of references should be absolutely safe, with checking performed automatically by the compiler. But I couldn't resist the temptation to put in a null reference, simply because it was so easy to implement. This has led to innumerable errors, vulnerabilities, and system crashes, which have probably caused a billion dollars of pain and damage in the last forty years.</p> <p>\u6211\u79f0\u4e4b\u4e3a\u6211\u5341\u4ebf\u7f8e\u5143\u7684\u9519\u8bef\u3002\u5f53\u65f6\uff0c\u6211\u5728\u4e3a\u4e00\u4e2a\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u8bbe\u8ba1\u7b2c\u4e00\u4e2a\u7efc\u5408\u6027\u7684\u9762\u5411\u5f15\u7528\u7684\u7c7b\u578b\u7cfb\u7edf\u3002\u6211\u7684\u76ee\u6807\u662f\u901a\u8fc7\u7f16\u8bd1\u5668\u7684\u81ea\u52a8\u68c0\u67e5\u6765\u4fdd\u8bc1\u6240\u6709\u5f15\u7528\u7684\u4f7f\u7528\u90fd\u5e94\u8be5\u662f\u7edd\u5bf9\u5b89\u5168\u7684\u3002\u4e0d\u8fc7\u6211\u672a\u80fd\u62b5\u6297\u4f4f\u5f15\u5165\u4e00\u4e2a\u7a7a\u5f15\u7528\u7684\u8bf1\u60d1\uff0c\u4ec5\u4ec5\u662f\u56e0\u4e3a\u5b83\u662f\u8fd9\u4e48\u7684\u5bb9\u6613\u5b9e\u73b0\u3002\u8fd9\u5f15\u53d1\u4e86\u65e0\u6570\u9519\u8bef\u3001\u6f0f\u6d1e\u548c\u7cfb\u7edf\u5d29\u6e83\uff0c\u5728\u4e4b\u540e\u7684\u56db\u5341\u591a\u5e74\u4e2d\u9020\u6210\u4e86\u6570\u5341\u4ebf\u7f8e\u5143\u7684\u82e6\u75db\u548c\u4f24\u5bb3\u3002</p> <p><pre><code>enum Option&lt;T&gt;{\n    None,\n    Some(T),\n}\n\nlet some_number=Some(5);\nlet some_char=Some('a');\nlet absent_number:Option&lt;i32&gt;=None;\n</code></pre> Option \u548c T \u662f\u4e0d\u540c\u7684\u7c7b\u578b\uff0c\u56e0\u4e3a Option \u548c T \u662f\u4e0d\u540c\u7684\u679a\u4e3e\u6210\u5458\u3002\u8fd9\u610f\u5473\u7740\u7f16\u8bd1\u5668\u53ef\u4ee5\u5728\u7f16\u8bd1\u65f6\u68c0\u67e5\u662f\u5426\u6b63\u786e\u5730\u5904\u7406\u4e86\u6240\u6709\u60c5\u51b5\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u7a7a\u503c\u9519\u8bef\u3002 <p>\u5f53\u6709\u4e00\u4e2aSome(T)\u503c\u65f6\uff0cT \u5c31\u662f\u6211\u4eec\u7684\u503c\uff0c\u5f53\u6709\u4e00\u4e2a None \u65f6\uff0c\u6ca1\u6709\u503c\u3002Option \u662f\u4e00\u4e2a\u975e\u5e38\u901a\u7528\u7684\u679a\u4e3e\uff0c\u5b83\u5728\u6807\u51c6\u5e93\u4e2d\u6709\u5f88\u591a\u7528\u9014\u3002 <p>option\u7684\u5b9a\u4e49\u8ba9\u6211\u4eec\u5728\u7f16\u8bd1\u65f6\u5c31\u80fd\u591f\u77e5\u9053\u662f\u5426\u5904\u7406\u4e86\u6240\u6709\u7684\u60c5\u51b5,\u8fd9\u6837\u5c31\u4e0d\u4f1a\u51fa\u73b0\u7a7a\u503c\u9519\u8bef(\u4f8b\u5982,Option\u548ci8,i8\u7f16\u8bd1\u5668\u53ef\u4ee5\u786e\u4fdd\u603b\u662f\u6709\u4e00\u4e2a\u6709\u6548\u7684\u503c) <p>\u6362\u53e5\u8bdd\u8bf4\uff0c\u5728\u5bf9 Option \u8fdb\u884c\u8fd0\u7b97\u4e4b\u524d\u5fc5\u987b\u5c06\u5176\u8f6c\u6362\u4e3a T\u3002\u901a\u5e38\u8fd9\u80fd\u5e2e\u52a9\u6211\u4eec\u6355\u83b7\u5230\u7a7a\u503c\u6700\u5e38\u89c1\u7684\u95ee\u9898\u4e4b\u4e00\uff1a\u5047\u8bbe\u67d0\u503c\u4e0d\u4e3a\u7a7a\u4f46\u5b9e\u9645\u4e0a\u4e3a\u7a7a\u7684\u60c5\u51b5\u3002 <p>\u6d88\u9664\u4e86\u9519\u8bef\u5730\u5047\u8bbe\u4e00\u4e2a\u975e\u7a7a\u503c\u7684\u98ce\u9669\uff0c\u4f1a\u8ba9\u4f60\u5bf9\u4ee3\u7801\u66f4\u52a0\u6709\u4fe1\u5fc3\u3002\u4e3a\u4e86\u62e5\u6709\u4e00\u4e2a\u53ef\u80fd\u4e3a\u7a7a\u7684\u503c\uff0c\u4f60\u5fc5\u987b\u8981\u663e\u5f0f\u7684\u5c06\u5176\u653e\u5165\u5bf9\u5e94\u7c7b\u578b\u7684 Option \u4e2d\u3002\u63a5\u7740\uff0c\u5f53\u4f7f\u7528\u8fd9\u4e2a\u503c\u65f6\uff0c\u5fc5\u987b\u660e\u786e\u7684\u5904\u7406\u503c\u4e3a\u7a7a\u7684\u60c5\u51b5\u3002\u53ea\u8981\u4e00\u4e2a\u503c\u4e0d\u662f Option \u7c7b\u578b\uff0c\u4f60\u5c31 \u53ef\u4ee5 \u5b89\u5168\u7684\u8ba4\u5b9a\u5b83\u7684\u503c\u4e0d\u4e3a\u7a7a\u3002\u8fd9\u662f Rust \u7684\u4e00\u4e2a\u7ecf\u8fc7\u6df1\u601d\u719f\u8651\u7684\u8bbe\u8ba1\u51b3\u7b56\uff0c\u6765\u9650\u5236\u7a7a\u503c\u7684\u6cdb\u6ee5\u4ee5\u589e\u52a0 Rust \u4ee3\u7801\u7684\u5b89\u5168\u6027\u3002 <p>\u90a3\u4e48\u5f53\u6709\u4e00\u4e2a Option \u7684\u503c\u65f6\uff0c\u5982\u4f55\u4ece Some \u6210\u5458\u4e2d\u53d6\u51fa T \u7684\u503c\u6765\u4f7f\u7528\u5b83\u5462\uff1fOption \u679a\u4e3e\u62e5\u6709\u5927\u91cf\u7528\u4e8e\u5404\u79cd\u60c5\u51b5\u7684\u65b9\u6cd5\uff1a\u4f60\u53ef\u4ee5\u67e5\u770b\u5b83\u7684\u6587\u6863\u3002\u719f\u6089 Option \u7684\u65b9\u6cd5\u5c06\u5bf9\u4f60\u7684 Rust \u4e4b\u65c5\u975e\u5e38\u6709\u7528\u3002 <p>\u603b\u7684\u6765\u8bf4\uff0c\u4e3a\u4e86\u4f7f\u7528 Option \u503c\uff0c\u9700\u8981\u7f16\u5199\u5904\u7406\u6bcf\u4e2a\u6210\u5458\u7684\u4ee3\u7801\u3002\u4f60\u60f3\u8981\u4e00\u4e9b\u4ee3\u7801\u53ea\u5f53\u62e5\u6709 Some(T) \u503c\u65f6\u8fd0\u884c\uff0c\u5141\u8bb8\u8fd9\u4e9b\u4ee3\u7801\u4f7f\u7528\u5176\u4e2d\u7684 T\u3002\u4e5f\u5e0c\u671b\u4e00\u4e9b\u4ee3\u7801\u53ea\u5728\u503c\u4e3a None \u65f6\u8fd0\u884c\uff0c\u8fd9\u4e9b\u4ee3\u7801\u5e76\u6ca1\u6709\u4e00\u4e2a\u53ef\u7528\u7684 T \u503c\u3002match \u8868\u8fbe\u5f0f\u5c31\u662f\u8fd9\u4e48\u4e00\u4e2a\u5904\u7406\u679a\u4e3e\u7684\u63a7\u5236\u6d41\u7ed3\u6784\uff1a\u5b83\u4f1a\u6839\u636e\u679a\u4e3e\u7684\u6210\u5458\u8fd0\u884c\u4e0d\u540c\u7684\u4ee3\u7801\uff0c\u8fd9\u4e9b\u4ee3\u7801\u53ef\u4ee5\u4f7f\u7528\u5339\u914d\u5230\u7684\u503c\u4e2d\u7684\u6570\u636e\u3002"},{"location":"tool/rust/#option","title":"\u5339\u914d Option <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 match \u8868\u8fbe\u5f0f\u6765\u5904\u7406 Option\u3002\u8fd9\u91cc\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5b83\u53ea\u4f1a\u5728 Option \u662f Some(3) \u65f6\u6267\u884c\u4ee3\u7801\uff1a <p><pre><code>fn main() {\n    let some_number = Some(5);\n    let some_string = Some(\"a string\");\n\n    let absent_number: Option&lt;i32&gt; = None;\n\n    match some_number {\n        Some(i) =&gt; println!(\"This is a number: {}\", i),\n        None =&gt; println!(\"This is not a number\"),\n    }\n\n    match some_string {\n        Some(s) =&gt; println!(\"This is a string: {}\", s),\n        None =&gt; println!(\"This is not a string\"),\n    }\n\n    match absent_number {\n        Some(i) =&gt; println!(\"This is a number: {}\", i),\n        None =&gt; println!(\"This is not a number\"),\n    }\n}\n</code></pre> Rust\u4e2d\u7684match\u662f\u7a77\u5c3d\u7684(exhaustive):\u5fc5\u987b\u8986\u76d6\u6240\u6709\u53ef\u80fd\u7684\u60c5\u51b5,\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u4e0d\u4f1a\u6709\u4efb\u4f55\u7684\u7a7a\u503c\u9519\u8bef.</p>","text":""},{"location":"tool/rust/#crate","title":"\u4f7f\u7528\u5305,Crate,\u6a21\u5757\u7ec4\u7ec7\u4ee3\u7801","text":""},{"location":"tool/rust/#encapsulation","title":"\u5c01\u88c5(encapsulation) <p>\u6211\u4eec\u4e5f\u4f1a\u8ba8\u8bba\u5c01\u88c5\u6765\u5b9e\u73b0\u7ec6\u8282\uff0c\u8fd9\u53ef\u4ee5\u4f7f\u4f60\u66f4\u9ad8\u7ea7\u5730\u91cd\u7528\u4ee3\u7801\uff1a\u4f60\u5b9e\u73b0\u4e86\u4e00\u4e2a\u64cd\u4f5c\u540e\uff0c\u5176\u4ed6\u7684\u4ee3\u7801\u53ef\u4ee5\u901a\u8fc7\u8be5\u4ee3\u7801\u7684\u516c\u5171\u63a5\u53e3\u6765\u8fdb\u884c\u8c03\u7528\uff0c\u800c\u4e0d\u9700\u8981\u77e5\u9053\u5b83\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u3002\u4f60\u5728\u7f16\u5199\u4ee3\u7801\u65f6\u53ef\u4ee5\u5b9a\u4e49\u54ea\u4e9b\u90e8\u5206\u662f\u5176\u4ed6\u4ee3\u7801\u53ef\u4ee5\u4f7f\u7528\u7684\u516c\u5171\u90e8\u5206\uff0c\u4ee5\u53ca\u54ea\u4e9b\u90e8\u5206\u662f\u4f60\u6709\u6743\u66f4\u6539\u5b9e\u73b0\u7ec6\u8282\u7684\u79c1\u6709\u90e8\u5206\u3002\u8fd9\u662f\u53e6\u4e00\u79cd\u51cf\u5c11\u4f60\u5728\u8111\u6d77\u4e2d\u8bb0\u4f4f\u9879\u76ee\u5185\u5bb9\u6570\u91cf\u7684\u65b9\u6cd5\u3002</p> <p>\u201cEncapsulate\u201d \u662f\u4e00\u4e2a\u82f1\u6587\u5355\u8bcd\uff0c\u5176\u8bcd\u6e90\u548c\u8bed\u4e49\u53ef\u4ee5\u901a\u8fc7\u5206\u6790\u5176\u62c9\u4e01\u8bcd\u6839\u548c\u524d\u7f00\u6765\u7406\u89e3\u3002\u4ee5\u4e0b\u662f\u5bf9\u8fd9\u4e2a\u5355\u8bcd\u7684\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>","text":""},{"location":"tool/rust/#_4","title":"\u8bcd\u6e90 <p>\u201cEncapsulate\u201d \u6765\u6e90\u4e8e\u62c9\u4e01\u8bed\uff0c\u5176\u7ec4\u6210\u90e8\u5206\u5982\u4e0b\uff1a</p> <ol> <li>\u524d\u7f00 \u201cen-\u201d\uff1a\u8fd9\u4e2a\u524d\u7f00\u8868\u793a\u201c\u8fdb\u5165\u201d\u6216\u201c\u4f7f\u6210\u2026\u201d\uff0c\u6765\u6e90\u4e8e\u62c9\u4e01\u8bed\u201cin-\u201d\u3002</li> <li>\u8bcd\u6839 \u201ccapsula\u201d\uff1a\u8fd9\u662f\u62c9\u4e01\u8bed\u4e2d\u7684\u4e00\u4e2a\u5c0f\u76d2\u5b50\u6216\u5bb9\u5668\uff0c\u6e90\u81ea\u201ccapsa\u201d\uff0c\u610f\u601d\u662f\u76d2\u5b50\u3002</li> <li>\u540e\u7f00 \u201c-ate\u201d\uff1a\u8fd9\u662f\u4e00\u4e2a\u52a8\u8bcd\u540e\u7f00\uff0c\u8868\u793a\u201c\u4f7f\u6210\u4e3a\u201d\u6216\u201c\u8fdb\u884c\u2026\u7684\u52a8\u4f5c\u201d\u3002</li> </ol> <p>\u56e0\u6b64\uff0c\u201cencapsulate\u201d \u7684\u539f\u59cb\u610f\u601d\u662f\u201c\u653e\u5165\u5c0f\u76d2\u5b50\u4e2d\u201d\u6216\u201c\u4f7f\u5176\u6210\u4e3a\u4e00\u4e2a\u5bb9\u5668\u201d\u3002</p>","text":""},{"location":"tool/rust/#_5","title":"\u8bed\u4e49 <p>\u73b0\u4ee3\u82f1\u8bed\u4e2d\uff0c\u201cencapsulate\u201d \u7684\u610f\u601d\u6709\u4ee5\u4e0b\u51e0\u4e2a\u5c42\u9762\uff1a</p> <ol> <li>\u7269\u7406\u4e0a\u7684\u5c01\u88c5\uff1a\u5c06\u67d0\u7269\u5c01\u95ed\u5728\u4e00\u4e2a\u5bb9\u5668\u6216\u4fdd\u62a4\u58f3\u4e2d\u3002</li> <li> <p>\u4f8b\u5982\uff0c\u836f\u54c1\u88ab\u5c01\u88c5\u5728\u80f6\u56ca\u4e2d\u3002</p> </li> <li> <p>\u6982\u5ff5\u4e0a\u7684\u5c01\u88c5\uff1a\u5c06\u4fe1\u606f\u3001\u529f\u80fd\u6216\u6570\u636e\u9690\u85cf\u6216\u5c01\u95ed\u8d77\u6765\uff0c\u53ea\u66b4\u9732\u5fc5\u8981\u7684\u90e8\u5206\u3002</p> </li> <li>\u4f8b\u5982\uff0c\u5728\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\uff0c\u5c01\u88c5\u662f\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u91cd\u8981\u6982\u5ff5\uff0c\u5b83\u5c06\u5bf9\u8c61\u7684\u72b6\u6001\u548c\u884c\u4e3a\u5c01\u88c5\u5728\u4e00\u4e2a\u5bf9\u8c61\u5185\uff0c\u53ea\u5141\u8bb8\u901a\u8fc7\u5b9a\u4e49\u597d\u7684\u63a5\u53e3\u8fdb\u884c\u8bbf\u95ee\u3002</li> </ol>","text":""},{"location":"tool/rust/#_6","title":"\u793a\u4f8b","text":""},{"location":"tool/rust/#_7","title":"\u7269\u7406\u4e0a\u7684\u5c01\u88c5","text":"<ul> <li>\u53e5\u5b50: The medicine is encapsulated in a gelatin capsule.</li> <li>\u7ffb\u8bd1: \u8fd9\u79cd\u836f\u7269\u88ab\u5c01\u88c5\u5728\u4e00\u4e2a\u660e\u80f6\u80f6\u56ca\u4e2d\u3002</li> </ul>"},{"location":"tool/rust/#_8","title":"\u6982\u5ff5\u4e0a\u7684\u5c01\u88c5","text":"<ul> <li>\u53e5\u5b50: In software engineering, encapsulation is used to hide the internal state and implementation details of an object.</li> <li>\u7ffb\u8bd1: \u5728\u8f6f\u4ef6\u5de5\u7a0b\u4e2d\uff0c\u5c01\u88c5\u7528\u4e8e\u9690\u85cf\u5bf9\u8c61\u7684\u5185\u90e8\u72b6\u6001\u548c\u5b9e\u73b0\u7ec6\u8282\u3002</li> </ul>"},{"location":"tool/rust/#_9","title":"\u76f8\u5173\u6982\u5ff5","text":""},{"location":"tool/rust/#encapsulation_1","title":"\u5c01\u88c5\uff08Encapsulation\uff09\u5728\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\u7684\u5e94\u7528","text":"<p>\u5c01\u88c5\u662f\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\uff08OOP\uff09\u7684\u56db\u5927\u57fa\u672c\u539f\u5219\u4e4b\u4e00\uff08\u5176\u4ed6\u4e09\u4e2a\u662f\u7ee7\u627f\u3001\u591a\u6001\u548c\u62bd\u8c61\uff09\u3002\u5b83\u4e3b\u8981\u6d89\u53ca\u4ee5\u4e0b\u65b9\u9762\uff1a</p> <ol> <li>\u6570\u636e\u9690\u85cf\uff1a\u901a\u8fc7\u9650\u5236\u8bbf\u95ee\u6743\u9650\u6765\u9690\u85cf\u5bf9\u8c61\u7684\u5185\u90e8\u6570\u636e\uff0c\u4ec5\u5141\u8bb8\u901a\u8fc7\u516c\u5f00\u7684\u65b9\u6cd5\u8bbf\u95ee\u548c\u4fee\u6539\u6570\u636e\u3002\u8fd9\u6709\u52a9\u4e8e\u4fdd\u62a4\u5bf9\u8c61\u7684\u5b8c\u6574\u6027\u548c\u9632\u6b62\u610f\u5916\u7684\u5e72\u6270\u3002</li> <li> <p>\u4f8b\u5982\uff0c\u5728\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u4f7f\u7528 <code>private</code> \u5173\u952e\u5b57\u5c06\u5c5e\u6027\u79c1\u6709\u5316\uff0c\u7136\u540e\u63d0\u4f9b <code>public</code> \u65b9\u6cd5\u8fdb\u884c\u8bbf\u95ee\u548c\u4fee\u6539\u3002</p> </li> <li> <p>\u63a5\u53e3\u5b9a\u4e49\uff1a\u5b9a\u4e49\u5bf9\u8c61\u4e0e\u5916\u90e8\u4ea4\u4e92\u7684\u63a5\u53e3\uff0c\u4f7f\u5bf9\u8c61\u7684\u5185\u90e8\u5b9e\u73b0\u53ef\u4ee5\u72ec\u7acb\u4e8e\u5916\u90e8\u4f7f\u7528\u65b9\u5f0f\u8fdb\u884c\u4fee\u6539\u3002</p> </li> <li>\u4f8b\u5982\uff0c\u901a\u8fc7 getter \u548c setter \u65b9\u6cd5\u8bbf\u95ee\u79c1\u6709\u5c5e\u6027\u3002</li> </ol>"},{"location":"tool/rust/#_10","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5c01\u88c5\u5728\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u4e2d\u7684\u5e94\u7528\uff1a</p> <pre><code>struct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nimpl Rectangle {\n    // \u6784\u9020\u51fd\u6570\n    fn new(width: u32, height: u32) -&gt; Rectangle {\n        Rectangle { width, height }\n    }\n\n    // \u83b7\u53d6\u5bbd\u5ea6\n    fn width(&amp;self) -&gt; u32 {\n        self.width\n    }\n\n    // \u83b7\u53d6\u9ad8\u5ea6\n    fn height(&amp;self) -&gt; u32 {\n        self.height\n    }\n\n    // \u8ba1\u7b97\u9762\u79ef\n    fn area(&amp;self) -&gt; u32 {\n        self.width * self.height\n    }\n}\n\nfn main() {\n    let rect = Rectangle::new(10, 20);\n    println!(\"The width of the rectangle is: {}\", rect.width());\n    println!(\"The height of the rectangle is: {}\", rect.height());\n    println!(\"The area of the rectangle is: {}\", rect.area());\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>Rectangle</code> \u7ed3\u6784\u4f53\u7684\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u901a\u8fc7\u6784\u9020\u51fd\u6570\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u65b9\u6cd5\u6765\u8bbf\u95ee\u8fd9\u4e9b\u5c5e\u6027\u548c\u8ba1\u7b97\u9762\u79ef\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6211\u4eec\u5c01\u88c5\u4e86\u6570\u636e\uff0c\u5e76\u5b9a\u4e49\u4e86\u5bf9\u6570\u636e\u7684\u8bbf\u95ee\u63a5\u53e3\u3002</p>"},{"location":"tool/rust/#_11","title":"\u603b\u7ed3 <p>\u201cEncapsulate\u201d \u8fd9\u4e2a\u8bcd\u6e90\u81ea\u62c9\u4e01\u8bed\uff0c\u8868\u793a\u5c06\u67d0\u7269\u5c01\u95ed\u5728\u4e00\u4e2a\u5c0f\u5bb9\u5668\u4e2d\u3002\u73b0\u4ee3\u8bed\u4e49\u4e0a\uff0c\u5b83\u65e2\u53ef\u4ee5\u6307\u7269\u7406\u4e0a\u7684\u5c01\u88c5\uff0c\u4e5f\u53ef\u4ee5\u6307\u6982\u5ff5\u4e0a\u7684\u5c01\u88c5\uff0c\u5982\u5728\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\u7684\u6570\u636e\u9690\u85cf\u548c\u63a5\u53e3\u5b9a\u4e49\u3002\u901a\u8fc7\u7406\u89e3\u5176\u8bcd\u6e90\u548c\u8bed\u4e49\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u597d\u5730\u7406\u89e3\u548c\u5e94\u7528\u8fd9\u4e2a\u6982\u5ff5\u3002</p>","text":""},{"location":"tool/rust/#scope","title":"\u4f5c\u7528\u57df(scope) <p>\u8fd9\u91cc\u6709\u4e00\u4e2a\u9700\u8981\u8bf4\u660e\u7684\u6982\u5ff5 \u201c\u4f5c\u7528\u57df\uff08scope\uff09\u201d\uff1a\u4ee3\u7801\u6240\u5728\u7684\u5d4c\u5957\u4e0a\u4e0b\u6587\u6709\u4e00\u7ec4\u5b9a\u4e49\u4e3a \u201cin scope\u201d \u7684\u540d\u79f0\u3002\u5f53\u9605\u8bfb\u3001\u7f16\u5199\u548c\u7f16\u8bd1\u4ee3\u7801\u65f6\uff0c\u7a0b\u5e8f\u5458\u548c\u7f16\u8bd1\u5668\u9700\u8981\u77e5\u9053\u7279\u5b9a\u4f4d\u7f6e\u7684\u7279\u5b9a\u540d\u79f0\u662f\u5426\u5f15\u7528\u4e86\u53d8\u91cf\u3001\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u3001\u6a21\u5757\u3001\u5e38\u91cf\u6216\u8005\u5176\u4ed6\u6709\u610f\u4e49\u7684\u9879\u3002\u4f60\u53ef\u4ee5\u521b\u5efa\u4f5c\u7528\u57df\uff0c\u4ee5\u53ca\u6539\u53d8\u54ea\u4e9b\u540d\u79f0\u5728\u4f5c\u7528\u57df\u5185\u8fd8\u662f\u4f5c\u7528\u57df\u5916\u3002\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\u5185\u4e0d\u80fd\u62e5\u6709\u4e24\u4e2a\u76f8\u540c\u540d\u79f0\u7684\u9879\uff1b\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u5de5\u5177\u6765\u89e3\u51b3\u540d\u79f0\u51b2\u7a81\u3002</p> <p>\u201cCrates\u201d \u662f\u4e00\u4e2a\u82f1\u8bed\u5355\u8bcd\uff0c\u901a\u5e38\u6307\u5927\u6728\u7bb1\u6216\u5305\u88c5\u7bb1\u3002\u5b83\u7684\u8bcd\u6e90\u548c\u5386\u53f2\u53ef\u4ee5\u8ffd\u6eaf\u5230\u62c9\u4e01\u8bed\u548c\u53e4\u5e0c\u814a\u8bed\u3002\u4ee5\u4e0b\u662f\u5bf9\u8fd9\u4e2a\u8bcd\u6e90\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff1a</p>","text":""},{"location":"tool/rust/#_12","title":"\u8bcd\u6e90 <ol> <li> <p>\u62c9\u4e01\u8bed\uff1a\u8fd9\u4e2a\u8bcd\u6700\u521d\u6765\u81ea\u62c9\u4e01\u8bed\u7684 \u201ccratis\u201d\uff0c\u610f\u601d\u662f\u201c\u7f16\u7ec7\u7684\u7b50\u201d\u6216\u201c\u683c\u5b50\u201d\u3002\u201cCratis\u201d \u6307\u7684\u662f\u4e00\u79cd\u7528\u6765\u88c5\u8f7d\u6216\u8fd0\u8f93\u7269\u54c1\u7684\u5bb9\u5668\uff0c\u901a\u5e38\u7531\u6728\u6761\u6216\u85e4\u6761\u7f16\u7ec7\u800c\u6210\u3002</p> </li> <li> <p>\u53e4\u5e0c\u814a\u8bed\uff1a\u8fd9\u4e2a\u8bcd\u6839\u6e90\u81ea\u53e4\u5e0c\u814a\u8bed \u201ckratos\u201d\uff08\u03ba\u03c1\u03ac\u03c4\u03bf\u03c2\uff09\uff0c\u610f\u601d\u662f\u201c\u529b\u91cf\u201d\u6216\u201c\u652f\u6491\u201d\u3002\u867d\u7136\u76f4\u63a5\u8054\u7cfb\u4e0d\u592a\u660e\u663e\uff0c\u4f46\u5b83\u53ef\u80fd\u5f71\u54cd\u4e86\u201ccratis\u201d \u7684\u7528\u6cd5\uff0c\u56e0\u4e3a\u6728\u6761\u7f16\u7ec7\u7684\u5bb9\u5668\u9700\u8981\u5177\u6709\u4e00\u5b9a\u7684\u5f3a\u5ea6\u548c\u652f\u6491\u529b\u3002</p> </li> <li> <p>\u53e4\u6cd5\u8bed\uff1a\u5728\u8fdb\u5165\u82f1\u8bed\u4e4b\u524d\uff0c\u8fd9\u4e2a\u8bcd\u901a\u8fc7\u53e4\u6cd5\u8bed \u201ccrate\u201d \u6216 \u201ccrat\u201d \u88ab\u5f15\u5165\uff0c\u4fdd\u6301\u4e86\u7c7b\u4f3c\u7684\u542b\u4e49\uff0c\u5373\u7528\u6765\u8fd0\u8f93\u8d27\u7269\u7684\u5bb9\u5668\u6216\u7b50\u5b50\u3002</p> </li> </ol>","text":""},{"location":"tool/rust/#_13","title":"\u82f1\u8bed\u4e2d\u7684\u6f14\u53d8 <p>\u5728\u82f1\u8bed\u4e2d\uff0c\u201ccrate\u201d \u4e00\u8bcd\u9010\u6e10\u6f14\u53d8\u6210\u6307\u7528\u4e8e\u8fd0\u8f93\u548c\u50a8\u5b58\u5927\u4ef6\u7269\u54c1\u7684\u6728\u7bb1\u6216\u5927\u7bb1\u5b50\u3002\u73b0\u4ee3\u82f1\u8bed\u4e2d\uff0c\u201ccrate\u201d \u4e3b\u8981\u7528\u4e8e\u63cf\u8ff0\u575a\u56fa\u7684\u5bb9\u5668\uff0c\u901a\u5e38\u7531\u6728\u5934\u6216\u5851\u6599\u5236\u6210\uff0c\u7528\u4e8e\u5305\u88c5\u3001\u8fd0\u8f93\u548c\u50a8\u5b58\u5404\u79cd\u7269\u54c1\u3002</p>","text":""},{"location":"tool/rust/#_14","title":"\u7528\u6cd5\u793a\u4f8b <ul> <li>\u666e\u901a\u7528\u6cd5\uff1a</li> <li>\u53e5\u5b50\uff1aWe used a wooden crate to ship the furniture overseas. </li> <li> <p>\u7ffb\u8bd1\uff1a\u6211\u4eec\u7528\u4e00\u4e2a\u6728\u7bb1\u628a\u5bb6\u5177\u8fd0\u5230\u6d77\u5916\u3002</p> </li> <li> <p>\u6bd4\u55bb\u7528\u6cd5\uff1a</p> </li> <li>\u53e5\u5b50\uff1aThe old car was such a crate, it barely ran.</li> <li>\u7ffb\u8bd1\uff1a\u90a3\u8f86\u65e7\u8f66\u7b80\u76f4\u5c31\u662f\u4e2a\u7834\u7bb1\u5b50\uff0c\u51e0\u4e4e\u90fd\u4e0d\u80fd\u5f00\u3002</li> </ul>","text":""},{"location":"tool/rust/#_15","title":"\u76f8\u5173\u672f\u8bed <ul> <li>Crating\uff1a\u6307\u7684\u662f\u4f7f\u7528\u7bb1\u5b50\u5305\u88c5\u6216\u8fd0\u8f93\u7269\u54c1\u7684\u8fc7\u7a0b\u3002</li> <li>\u53e5\u5b50\uff1aThe company specializes in crating and shipping fine art.</li> <li> <p>\u7ffb\u8bd1\uff1a\u8fd9\u5bb6\u516c\u53f8\u4e13\u95e8\u4ece\u4e8b\u7f8e\u672f\u54c1\u7684\u5305\u88c5\u548c\u8fd0\u8f93\u3002</p> </li> <li> <p>Milk Crate\uff1a\u4e00\u79cd\u7528\u4e8e\u8fd0\u8f93\u548c\u50a8\u5b58\u725b\u5976\u74f6\u7684\u575a\u56fa\u5851\u6599\u7bb1\u5b50\u3002</p> </li> <li>\u53e5\u5b50\uff1aHe used a milk crate as a makeshift chair.</li> <li>\u7ffb\u8bd1\uff1a\u4ed6\u7528\u4e00\u4e2a\u725b\u5976\u7bb1\u4e34\u65f6\u5f53\u6905\u5b50\u3002</li> </ul>","text":""},{"location":"tool/rust/#_16","title":"\u603b\u7ed3 <p>\u201cCrate\u201d \u4e00\u8bcd\u6e90\u81ea\u62c9\u4e01\u8bed \u201ccratis\u201d\uff0c\u6307\u7f16\u7ec7\u7684\u7b50\u6216\u683c\u5b50\uff0c\u7ecf\u8fc7\u53e4\u6cd5\u8bed\u8fdb\u5165\u82f1\u8bed\u540e\u6f14\u53d8\u6210\u63cf\u8ff0\u8fd0\u8f93\u548c\u50a8\u5b58\u5bb9\u5668\u7684\u5e38\u7528\u672f\u8bed\u3002\u5728\u73b0\u4ee3\u82f1\u8bed\u4e2d\uff0c\u201ccrate\u201d \u4e3b\u8981\u6307\u7528\u4e8e\u5305\u88c5\u548c\u8fd0\u8f93\u7684\u575a\u56fa\u7bb1\u5b50\u3002\u8fd9\u79cd\u8bcd\u6e90\u7684\u6f14\u53d8\u5c55\u793a\u4e86\u8bed\u8a00\u5982\u4f55\u968f\u7740\u65f6\u95f4\u548c\u6587\u5316\u4ea4\u6d41\u4e0d\u65ad\u53d1\u5c55\u3002</p> <p>binary crate \u8d77\u59cb\u70b9\u4e00\u822c\u662fmain.rs,library crate \u8d77\u59cb\u70b9\u4e00\u822c\u662flib.rs,</p>","text":""},{"location":"tool/shell_gpt/","title":"shell_gpt","text":""},{"location":"tool/shell_gpt/#shell-gpt","title":"shell-gpt\u4f7f\u7528\u8bf4\u660e","text":"<p>\u9700\u6c42\u5c31\u662f\u5728\u547d\u4ee4\u884c\u4f7f\u7528\u5927\u6a21\u578b,\u9879\u76ee\u5df2\u7ecf\u975e\u5e38\u4e0d\u9519,\u800c\u4e14\u4e5f\u6709\u597d\u5fc3\u4eba\u53ef\u4ee5\u751f\u6210\u514d\u8d39\u7684api\u6765\u4f7f\u7528chatgpt.\u6240\u4ee5\u7528\u8d77\u6765\u5c31\u975e\u5e38\u723d(ubuntu\u8fd9\u4e2ab\u8f93\u5165\u6cd5\u771f\u7684\u662f\u4e00\u70ae\u5927\u4fbf\u554a,\u5199\u4e0b\u8fd9\u53e5\u8bdd\u7684\u540e\u9762\u6211\u5c31\u6765\u88c5\u597d\u7684\u8f93\u5165\u6cd5,rime\u8f93\u5165\u6cd5+\u96fe\u6dde\u62fc\u97f3)</p> <pre><code>(base) along@along-Lenovo-Legion-Y9000K2020H: /home/along  \n\u279c   sgpt --shell \"\u67e5\u770b\u6211\u7cfb\u7edf\u4e0a\u662f\u5982\u4f55\u5f00\u673a\u542f\u52a8clash\u7684\"         \nls /etc/systemd/system/clash.service\nsudo systemctl status clash.service\n[E]xecute, [D]escribe, [A]bort: E\n/etc/systemd/system/clash.service\n[sudo] password for along: \nSorry, try again.\n[sudo] password for along: \n\u25cf clash.service - clash\n     Loaded: loaded (/etc/systemd/system/clash.service; enabled; vendor preset: enabled)\n     Active: active (running) since Fri 2024-06-28 01:41:38 CST; 1h 26min ago\n   Main PID: 1109 (clash)\n      Tasks: 22 (limit: 76692)\n     Memory: 36.8M\n     CGroup: /system.slice/clash.service\n             \u2514\u25001109 /usr/bin/clash -f /home/along/desk/clash/config.yaml\n\nJun 28 03:07:42 along-Lenovo-Legion-Y9000K2020H clash[1109]: time=\"2024-06-28T03:07:42+08:00\" level=info msg=\"[TCP] 127.0.0.1:45726 --&gt; &gt;\nJun 28 03:07:42 along-Lenovo-Legion-Y9000K2020H clash[1109]: time=\"2024-06-28T03:07:42+08:00\" level=info msg=\"[TCP] 127.0.0.1:45742 --&gt; &gt;\nJun 28 03:07:50 along-Lenovo-Legion-Y9000K2020H clash[1109]: time=\"2024-06-28T03:07:50+08:00\" level=info msg=\"[TCP] 127.0.0.1:34094 --&gt; &gt;\nJun 28 03:07:50 along-Lenovo-Legion-Y9000K2020H clash[1109]: time=\"2024-06-28T03:07:50+08:00\" level=info msg=\"[TCP] 127.0.0.1:34080 --&gt; &gt;\nJun 28 03:07:53 along-Lenovo-Legion-Y9000K2020H clash[1109]: time=\"2024-06-28T03:07:53+08:00\" level=info msg=\"[TCP] 127.0.0.1:34106 --&gt; &gt;\nJun 28 03:07:58 along-Lenovo-Legion-Y9000K2020H clash[1109]: time=\"2024-06-28T03:07:58+08:00\" level=info msg=\"[TCP] 127.0.0.1:43650 --&gt; &gt;\nJun 28 03:07:58 along-Lenovo-Legion-Y9000K2020H clash[1109]: time=\"2024-06-28T03:07:58+08:00\" level=info msg=\"[TCP] 127.0.0.1:43654 --&gt; &gt;\nJun 28 03:08:06 along-Lenovo-Legion-Y9000K2020H clash[1109]: time=\"2024-06-28T03:08:06+08:00\" level=info msg=\"[TCP] 127.0.0.1:41268 --&gt; &gt;\n</code></pre>"},{"location":"tool/shell_gpt/#_1","title":"\u4eca\u591c\u7684\u5947\u5e7b\u65c5\u884c","text":"<p>\u9996\u5148\u6211\u53d1\u73b0\u6211\u7684zsh_history\u51fa\u5927\u95ee\u9898,\u6709\u4e00\u4e9b\u4e0d\u597d\u7684\u4e2d\u6587\u5386\u53f2\u8bb0\u5f55\u8981\u5220\u9664 <pre><code>zsh_histroy\u7684\u7f16\u7801\u683c\u5f0f\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u683c\u5f0f,\u5bfc\u81f4\u4e86zsh_history\u7684\u6587\u4ef6\u5185\u5bb9\u51fa\u73b0\u4e86\u4e71\u7801,\u6240\u4ee5vim\u6216\u8005vscode\u6253\u5f00\u65f6\u5019\u5c31\u4f1a\u51fa\u73b0\u4e2d\u6587\u4e71\u7801.\n</code></pre> \u8fd9\u4e2a\u4e0d\u662f\u8bf4\u5e38\u89c1\u7684zsh\u7684\u4e2d\u6587\u4e71\u7801\u800c\u662f\u5386\u53f2\u8bb0\u5f55\u7684\u4e71\u7801,\u89e3\u7801\u542b\u6709Unicode\u7684zsh\u5386\u53f2\u8bb0\u5f55</p>"},{"location":"tool/shell_gpt/#zsh_hist","title":"zsh_hist\u539f\u56e0","text":"<p>zsh\u7684\u5386\u53f2\u8bb0\u5f55\u5e76\u975e\u76f4\u63a5\u4f7f\u7528UTF-8\u7f16\u7801\uff0c\u800c\u662f\u4f7f\u7528\u4e86\u4e00\u79cd\u7279\u6b8a\u7684\u5143\u683c\u5f0f\u7f16\u7801\u3002\u8fd9\u79cd\u7f16\u7801\u7684\u683c\u5f0f\u5982\u4e0b\uff1a</p> <p>Unicode\u5b57\u8282\u524d\u52a0\u4e0a\u4e86\u5143\u5b57\u82820x83\u5f00\u5934 \u540e\u7eed\u7684\u5185\u5bb9\u9700\u8981\u4e0e32\u8fdb\u884c\u5f02\u6216\u8fd0\u7b97\u624d\u80fd\u5f97\u5230\u539f\u59cb\u503c \u56e0\u6b64\uff0c\u5982\u679c\u8981\u89e3\u7801zsh\u7684\u5386\u53f2\u8bb0\u5f55\uff0c\u9700\u8981\u5148\u627e\u52300x83\u5f00\u5934\u7684\u5b57\u8282\uff0c\u5c06\u5176\u540e\u9762\u7684\u5185\u5bb9\u8f6c\u5316\u4e3a\u4e0e32\u8fdb\u884c\u5f02\u6216\u8fd0\u7b97\u7684\u503c\uff0c\u624d\u80fd\u5f97\u5230\u7ed3\u679c\u3002</p>"},{"location":"tool/shell_gpt/#zsh_history","title":"zsh_history\u4f18\u5316","text":"<p>.zsh_history \u5386\u53f2\u8bb0\u5f55\u4f18\u5316 .zsh_history\u7684\u5b58\u50a8\u7f16\u7801\u662f\u4e00\u4e2a\u975e\u5e38\u7279\u6b8a\u7684\u7f16\u7801,\u4e0d\u662f\u5e38\u89c1\u7684utf,gbk\u4ec0\u4e48\u7684\uff0c\u6240\u4ee5\u91cc\u9762\u4e2d\u6587\u7528\u522b\u7684\u8f6f\u4ef6\u6253\u5f00\u4e86\u5c31\u4e71\u7801\u4e86\uff0c\u60f3\u7528python\u628a.zsh_history\u7684\u91cd\u590d\u7684\u90fd\u53bb\u6389\uff0c\u8bfb\u7684\u65f6\u5019\u5c31\u62a5\u9519\u4e86\uff0czsh\u5b98\u65b9\u6709\u4eba\u95ee\u7279\u6b8a\u5b57\u7b26\u600e\u4e48\u529e\uff0c\u5012\u662f\u6709\u4e00\u4e2ac\u8bed\u8a00\u7684\u7248\u672c\uff0c\u6700\u540e\u7528:</p> <p>bash setopt HIST_IGNORE_ALL_DUPS sort -t \";\" -k 2 -u ~/.zsh_history | sort -o ~/.zsh_history \u89e3\u51b3\u95ee\u9898\uff0c\u6709\u65f6\u5019shell\u771f\u7684\u662f\u795e\u5668</p>"},{"location":"tool/shell_gpt/#_2","title":"\u6211\u8bd5\u51fa\u6765\u7684\u4e00\u4e2a\u5f88\u5510\u7684","text":"<p>\u5728zsh\u7684'.zshrc'\u7684plugins\u4e2d\u6dfb\u52a0history\u5c31\u4f1a\u628a\u6240\u6709\u7684\u5386\u53f2\u8bb0\u5f55\u4e2d\u7684\u4e71\u7801\u5168\u90e8\u5220\u9664.\u8fd9\u4e2a\u662f\u4e00\u4e2a\u5f88\u5510\u7684\u65b9\u6cd5,\u4f46\u662f\u786e\u5b9e\u6709\u6548,\u6211\u4e5f\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48,\u4f46\u662f\u786e\u5b9e\u6709\u6548.</p>"},{"location":"tool/shell_gpt/#rime","title":"rime\u8f93\u5165\u6cd5","text":""},{"location":"tool/shell_gpt/#_3","title":"\u5b89\u88c5\u7b49\u4e00\u7b14\u5e26\u8fc7","text":"<p>Ubuntu 22.04 Desktop\u914d\u7f6e\u96fe\u51c7\u62fc\u97f3Rime-Ice</p>"},{"location":"tool/shell_gpt/#_4","title":"\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9","text":"<p>Plum\u7ba1\u7406rime\u914d\u7f6e</p> <p>Ctrl+` \u4f1a\u5207\u6362\u8f93\u5165\u65b9\u6848,\u8fd9\u4e2a\u662f\u9ed8\u8ba4\u7684\u5feb\u6377\u952e,\u6211\u628a\u8fd9\u4e2a\u5feb\u6377\u952e\u6539\u6ca1\u4e86,\u8fd9\u4e2a\u662f\u6211\u4e60\u60ef\u7684(\u56e0\u4e3a\u4ed6\u8fd9\u51e0\u4e2a\u70ed\u952e\u6211\u90fd\u8981\u7528),\u5728rime\u8f93\u5165\u6cd5\u7684\u914d\u7f6e\u6587\u4ef6'default.yaml(/home/along/.config/ibus/rime/default.yaml)'\u4e2d\u4fee\u6539</p> <p>\u628aibus\u8fd9\u989c\u8272\u6362\u6210\u7eff\u8272,\u6a59\u8272\u592a\u523a\u773c\u6765.</p>"},{"location":"tool/shell_gpt/#vimtab4","title":"vim\u7684tab\u8fd8\u662f\u8bbe\u7f6e\u4e3a4\u683c\u6bd4\u8f83\u597d","text":"<p>\u5728 Python \u7f16\u7a0b\u4e2d\uff0c\u901a\u5e38\u63a8\u8350\u4f7f\u75284\u4e2a\u7a7a\u683c\u6765\u8fdb\u884c\u7f29\u8fdb\u3002\u8fd9\u4e00\u5efa\u8bae\u6765\u81ea\u4e8e Python \u7684\u5b98\u65b9\u98ce\u683c\u6307\u5357 PEP 8\uff08Python Enhancement Proposal 8\uff09\uff0c\u5b83\u88ab\u5e7f\u6cdb\u63a5\u53d7\u548c\u5e94\u7528\u4e8e\u5927\u591a\u6570 Python \u9879\u76ee\u4e2d\u3002\u7136\u800c\uff0c2\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\u5728\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u548c\u4e00\u4e9b\u56e2\u961f\u4e2d\u4e5f\u5f88\u5e38\u89c1\u3002\u4ee5\u4e0b\u662f\u4e24\u79cd\u7f29\u8fdb\u65b9\u5f0f\u7684\u4f18\u7f3a\u70b9\uff1a</p>"},{"location":"tool/shell_gpt/#4","title":"4\u4e2a\u7a7a\u683c\u7f29\u8fdb","text":""},{"location":"tool/shell_gpt/#_5","title":"\u4f18\u70b9\uff1a","text":"<ol> <li>\u53ef\u8bfb\u6027\u9ad8\uff1a4\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\u4f7f\u4ee3\u7801\u5757\u4e4b\u95f4\u7684\u5c42\u6b21\u7ed3\u6784\u66f4\u52a0\u660e\u663e\uff0c\u7279\u522b\u662f\u5728\u5d4c\u5957\u8f83\u6df1\u7684\u60c5\u51b5\u4e0b\u3002</li> <li>\u5e7f\u6cdb\u63a5\u53d7\uff1a4\u4e2a\u7a7a\u683c\u662f Python \u793e\u533a\u548c\u8bb8\u591a\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u793e\u533a\u7684\u6807\u51c6\uff0c\u9075\u5faa\u8fd9\u4e00\u6807\u51c6\u53ef\u4ee5\u4f7f\u4ee3\u7801\u66f4\u6613\u4e8e\u5171\u4eab\u548c\u534f\u4f5c\u3002</li> <li>\u5de5\u5177\u652f\u6301\uff1a\u5927\u591a\u6570\u4ee3\u7801\u7f16\u8f91\u5668\u548cIDE\u9ed8\u8ba4\u652f\u6301\u5e76\u914d\u7f6e\u4e3a4\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\u3002</li> </ol>"},{"location":"tool/shell_gpt/#_6","title":"\u7f3a\u70b9\uff1a","text":"<ol> <li>\u5360\u7528\u7a7a\u95f4\u591a\uff1a\u76f8\u6bd42\u4e2a\u7a7a\u683c\uff0c4\u4e2a\u7a7a\u683c\u4f1a\u5728\u6bcf\u4e00\u5c42\u7f29\u8fdb\u65f6\u5360\u7528\u66f4\u591a\u7684\u6c34\u5e73\u7a7a\u95f4\uff0c\u8fd9\u5728\u4e00\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u5bfc\u81f4\u4ee3\u7801\u884c\u8fc7\u957f\u3002</li> </ol>"},{"location":"tool/shell_gpt/#2","title":"2\u4e2a\u7a7a\u683c\u7f29\u8fdb","text":""},{"location":"tool/shell_gpt/#_7","title":"\u4f18\u70b9\uff1a","text":"<ol> <li>\u8282\u7701\u7a7a\u95f4\uff1a2\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\u5360\u7528\u7684\u6c34\u5e73\u7a7a\u95f4\u66f4\u5c11\uff0c\u53ef\u4ee5\u5728\u6709\u9650\u7684\u5c4f\u5e55\u5bbd\u5ea6\u5185\u663e\u793a\u66f4\u591a\u7684\u4ee3\u7801\u5185\u5bb9\u3002</li> <li>\u7b80\u6d01\uff1a\u5bf9\u4e8e\u7b80\u5355\u7684\u4ee3\u7801\u6216\u5d4c\u5957\u5c42\u6b21\u8f83\u5c11\u7684\u4ee3\u7801\uff0c2\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\u663e\u5f97\u66f4\u7b80\u6d01\u3002</li> </ol>"},{"location":"tool/shell_gpt/#_8","title":"\u7f3a\u70b9\uff1a","text":"<ol> <li>\u53ef\u8bfb\u6027\u8f83\u5dee\uff1a\u5728\u6df1\u5c42\u5d4c\u5957\u65f6\uff0c2\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\u53ef\u80fd\u4e0d\u59824\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\u90a3\u4e48\u6e05\u6670\uff0c\u5bb9\u6613\u5bfc\u81f4\u9605\u8bfb\u548c\u7406\u89e3\u56f0\u96be\u3002</li> <li>\u4e0d\u7b26\u5408\u4e3b\u6d41\u6807\u51c6\uff1a\u5728Python \u7f16\u7a0b\u4e2d\uff0c2\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\u4e0d\u7b26\u5408 PEP 8 \u7684\u5efa\u8bae\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56e2\u961f\u5408\u4f5c\u4e2d\u7684\u4e0d\u4e00\u81f4\u6027\u3002</li> </ol>"},{"location":"tool/shell_gpt/#_9","title":"\u603b\u7ed3","text":"<p>\u5bf9\u4e8e Python \u7f16\u7a0b\uff0c\u901a\u5e38\u63a8\u8350\u4f7f\u75284\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\uff0c\u56e0\u4e3a\u5b83\u662f PEP 8 \u7684\u5efa\u8bae\u5e76\u4e14\u88ab\u5e7f\u6cdb\u63a5\u53d7\u548c\u5e94\u7528\u3002\u5982\u679c\u4f60\u5728\u4e00\u4e2a\u56e2\u961f\u4e2d\u5de5\u4f5c\uff0c\u9075\u5faa\u56e2\u961f\u7684\u4ee3\u7801\u98ce\u683c\u6307\u5357\u662f\u6700\u91cd\u8981\u7684\u3002\u5982\u679c\u6ca1\u6709\u7279\u5b9a\u7684\u8981\u6c42\uff0c4\u4e2a\u7a7a\u683c\u662f\u4e00\u4e2a\u5b89\u5168\u7684\u9009\u62e9\u3002\u5bf9\u4e8e\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u548c\u7279\u5b9a\u9879\u76ee\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u9009\u62e92\u4e2a\u62164\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\u3002</p>"},{"location":"tool/shell_gpt/#_10","title":"\u914d\u7f6e\u7f16\u8f91\u5668","text":"<p>\u786e\u4fdd\u4f60\u7684\u7f16\u8f91\u5668\u914d\u7f6e\u6b63\u786e\uff0c\u4ee5\u4fbf\u81ea\u52a8\u4f7f\u75284\u4e2a\u7a7a\u683c\u8fdb\u884c\u7f29\u8fdb\uff1a</p>"},{"location":"tool/shell_gpt/#vs-code","title":"VS Code","text":"<pre><code>{\n    \"editor.tabSize\": 4,\n    \"editor.insertSpaces\": true\n}\n</code></pre>"},{"location":"tool/shell_gpt/#vim","title":"Vim","text":"<pre><code>set tabstop=4\nset shiftwidth=4\nset expandtab\n</code></pre> <p>\u901a\u8fc7\u8fd9\u4e9b\u914d\u7f6e\uff0c\u53ef\u4ee5\u786e\u4fdd\u4f60\u7684\u4ee3\u7801\u7f29\u8fdb\u59cb\u7ec8\u7b26\u5408\u6807\u51c6\uff0c\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u4e00\u81f4\u6027\u3002</p>"},{"location":"tool/shell_gpt/#zsh-vs-fish","title":"zsh vs fish","text":"<p>\u88abzsh_history\u641e\u4e86\u4e00\u6b21\u540e\u6211\u6709\u70b9\u60f3\u6362\u5230fish\u4e86(\u4f46\u662f\u786e\u5b9e\u6709\u70b9\u9ebb\u70e6),\u6211\u786e\u5b9e\u6709\u70b9\u6c89\u8ff7\u5728\u5de5\u5177\u7684\u4f18\u5316\u4e0a\u4e86,\u5f53\u7136\u4e86,\u8f93\u5165\u6cd5\u8fd8\u662f\u503c\u5f97\u4f18\u5316\u4e00\u4e0b\u7684.</p>"}]}